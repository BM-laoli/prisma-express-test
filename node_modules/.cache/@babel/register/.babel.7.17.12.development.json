{"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const express = require('express');\n\nconst bodyParser = require('body-parser');\n\nconst initConnection = require('./db');\n\ninitConnection();\nconst app = express();\napp.use(bodyParser.json()); // 应用这个 中间件\n\napp.get('/graphql', async (req, res) => {\n  res.json({\n    name: '8888'\n  });\n});\nconst server = app.listen(3000, () => {\n  console.log('server start');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImJvZHlQYXJzZXIiLCJpbml0Q29ubmVjdGlvbiIsImFwcCIsInVzZSIsImpzb24iLCJnZXQiLCJyZXEiLCJyZXMiLCJuYW1lIiwic2VydmVyIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiL1ZvbHVtZXMvV0RfQkxBQ0svb3JpZ2luL3ByaXNtYS1leHByZXNzLXRlc3QvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgYm9keVBhcnNlciA9IHJlcXVpcmUoJ2JvZHktcGFyc2VyJyk7XG5jb25zdCBpbml0Q29ubmVjdGlvbiA9IHJlcXVpcmUoJy4vZGInKTtcblxuaW5pdENvbm5lY3Rpb24oKTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5cbi8vIOW6lOeUqOi/meS4qiDkuK3pl7Tku7ZcbmFwcC5nZXQoJy9ncmFwaHFsJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5qc29uKHtcbiAgICBuYW1lOiAnODg4OCcsXG4gIH0pO1xufSk7XG5cbmNvbnN0IHNlcnZlciA9IGFwcC5saXN0ZW4oMzAwMCwgKCkgPT4ge1xuICBjb25zb2xlLmxvZygnc2VydmVyIHN0YXJ0Jyk7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUF2Qjs7QUFDQSxNQUFNQyxVQUFVLEdBQUdELE9BQU8sQ0FBQyxhQUFELENBQTFCOztBQUNBLE1BQU1FLGNBQWMsR0FBR0YsT0FBTyxDQUFDLE1BQUQsQ0FBOUI7O0FBRUFFLGNBQWM7QUFFZCxNQUFNQyxHQUFHLEdBQUdKLE9BQU8sRUFBbkI7QUFDQUksR0FBRyxDQUFDQyxHQUFKLENBQVFILFVBQVUsQ0FBQ0ksSUFBWCxFQUFSLEUsQ0FFQTs7QUFDQUYsR0FBRyxDQUFDRyxHQUFKLENBQVEsVUFBUixFQUFvQixPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7RUFDdENBLEdBQUcsQ0FBQ0gsSUFBSixDQUFTO0lBQ1BJLElBQUksRUFBRTtFQURDLENBQVQ7QUFHRCxDQUpEO0FBTUEsTUFBTUMsTUFBTSxHQUFHUCxHQUFHLENBQUNRLE1BQUosQ0FBVyxJQUFYLEVBQWlCLE1BQU07RUFDcENDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGNBQVo7QUFDRCxDQUZjLENBQWYifQ==","map":{"version":3,"names":["express","require","bodyParser","initConnection","app","use","json","get","req","res","name","server","listen","console","log"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/","sources":["index.js"],"sourcesContent":["const express = require('express');\nconst bodyParser = require('body-parser');\nconst initConnection = require('./db');\n\ninitConnection();\n\nconst app = express();\napp.use(bodyParser.json());\n\n// 应用这个 中间件\napp.get('/graphql', async (req, res) => {\n  res.json({\n    name: '8888',\n  });\n});\n\nconst server = app.listen(3000, () => {\n  console.log('server start');\n});\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,UAAU,GAAGD,OAAO,CAAC,aAAD,CAA1B;;AACA,MAAME,cAAc,GAAGF,OAAO,CAAC,MAAD,CAA9B;;AAEAE,cAAc;AAEd,MAAMC,GAAG,GAAGJ,OAAO,EAAnB;AACAI,GAAG,CAACC,GAAJ,CAAQH,UAAU,CAACI,IAAX,EAAR,E,CAEA;;AACAF,GAAG,CAACG,GAAJ,CAAQ,UAAR,EAAoB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;EACtCA,GAAG,CAACH,IAAJ,CAAS;IACPI,IAAI,EAAE;EADC,CAAT;AAGD,CAJD;AAMA,MAAMC,MAAM,GAAGP,GAAG,CAACQ,MAAJ,CAAW,IAAX,EAAiB,MAAM;EACpCC,OAAO,CAACC,GAAR,CAAY,cAAZ;AACD,CAFc,CAAf"}},"mtime":1653139705760},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/db/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/db/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const mongoose = require('mongoose');\n\nconst dbConfig = require('./config');\n\nconst {\n  logger\n} = require('../utils/logger');\n\nconst initConnection = async () => {\n  // 让 mongoose 使用全局 Promise 库\n  mongoose.Promise = global.Promise; // 注意mongoDB 的数据库密码 只对当前的库有效！\n  // const connection = mongoose.connect(\"mongodb://admin:123456@192.168.101.10:27017/admin\",\n  //   { useUnifiedTopology: true, useNewUrlParser: true, useCreateIndex: true })\n\n  return new Promise((resolve, reject) => {\n    // const connection = mongoose.connect('mongodb://192.168.101.10:27017/test', {\n    //   useUnifiedTopology: true,\n    //   useNewUrlParser: true,\n    // });\n    // `mongodb://${dbConfig.username}:${dbConfig.password}@${dbConfig.host}:${dbConfig.port}/${dbConfig.dbName}?authSource=admin`,\n    const connection = mongoose.connect( // 我们的test 通过admin库进行登录认证，才能去操作\n    `mongodb://${dbConfig.username}:${dbConfig.password}@${dbConfig.url}:${dbConfig.prot}/${dbConfig.dbName}?authSource=admin`, {\n      useUnifiedTopology: true,\n      useNewUrlParser: true\n    });\n    mongoose.connection.on('connected', err => {\n      resolve(connection);\n    });\n    mongoose.connection.on('error', err => {\n      reject(err);\n      logger.error({\n        level: 'error',\n        message: '数据库没有连接成功'\n      });\n    });\n  });\n};\n\nmodule.exports = {\n  initConnection: initConnection,\n  disconnect: async () => {\n    mongoose.disconnect();\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJkYkNvbmZpZyIsImxvZ2dlciIsImluaXRDb25uZWN0aW9uIiwiUHJvbWlzZSIsImdsb2JhbCIsInJlc29sdmUiLCJyZWplY3QiLCJjb25uZWN0aW9uIiwiY29ubmVjdCIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJ1cmwiLCJwcm90IiwiZGJOYW1lIiwidXNlVW5pZmllZFRvcG9sb2d5IiwidXNlTmV3VXJsUGFyc2VyIiwib24iLCJlcnIiLCJlcnJvciIsImxldmVsIiwibWVzc2FnZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJkaXNjb25uZWN0Il0sInNvdXJjZVJvb3QiOiIvVm9sdW1lcy9XRF9CTEFDSy9vcmlnaW4vcHJpc21hLWV4cHJlc3MtdGVzdC9kYi8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IGRiQ29uZmlnID0gcmVxdWlyZSgnLi9jb25maWcnKTtcbmNvbnN0IHsgbG9nZ2VyIH0gPSByZXF1aXJlKCcuLi91dGlscy9sb2dnZXInKTtcblxuY29uc3QgaW5pdENvbm5lY3Rpb24gPSBhc3luYyAoKSA9PiB7XG4gIC8vIOiuqSBtb25nb29zZSDkvb/nlKjlhajlsYAgUHJvbWlzZSDlupNcbiAgbW9uZ29vc2UuUHJvbWlzZSA9IGdsb2JhbC5Qcm9taXNlO1xuXG4gIC8vIOazqOaEj21vbmdvREIg55qE5pWw5o2u5bqT5a+G56CBIOWPquWvueW9k+WJjeeahOW6k+acieaViO+8gVxuICAvLyBjb25zdCBjb25uZWN0aW9uID0gbW9uZ29vc2UuY29ubmVjdChcIm1vbmdvZGI6Ly9hZG1pbjoxMjM0NTZAMTkyLjE2OC4xMDEuMTA6MjcwMTcvYWRtaW5cIixcbiAgLy8gICB7IHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSwgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLCB1c2VDcmVhdGVJbmRleDogdHJ1ZSB9KVxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIC8vIGNvbnN0IGNvbm5lY3Rpb24gPSBtb25nb29zZS5jb25uZWN0KCdtb25nb2RiOi8vMTkyLjE2OC4xMDEuMTA6MjcwMTcvdGVzdCcsIHtcbiAgICAvLyAgIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSxcbiAgICAvLyAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgICAvLyB9KTtcbiAgICAvLyBgbW9uZ29kYjovLyR7ZGJDb25maWcudXNlcm5hbWV9OiR7ZGJDb25maWcucGFzc3dvcmR9QCR7ZGJDb25maWcuaG9zdH06JHtkYkNvbmZpZy5wb3J0fS8ke2RiQ29uZmlnLmRiTmFtZX0/YXV0aFNvdXJjZT1hZG1pbmAsXG4gICAgY29uc3QgY29ubmVjdGlvbiA9IG1vbmdvb3NlLmNvbm5lY3QoXG4gICAgICAvLyDmiJHku6znmoR0ZXN0IOmAmui/h2FkbWlu5bqT6L+b6KGM55m75b2V6K6k6K+B77yM5omN6IO95Y675pON5L2cXG4gICAgICBgbW9uZ29kYjovLyR7ZGJDb25maWcudXNlcm5hbWV9OiR7ZGJDb25maWcucGFzc3dvcmR9QCR7ZGJDb25maWcudXJsfToke2RiQ29uZmlnLnByb3R9LyR7ZGJDb25maWcuZGJOYW1lfT9hdXRoU291cmNlPWFkbWluYCxcbiAgICAgIHtcbiAgICAgICAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxuICAgICAgICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXG4gICAgICB9LFxuICAgICk7XG5cbiAgICBtb25nb29zZS5jb25uZWN0aW9uLm9uKCdjb25uZWN0ZWQnLCAoZXJyKSA9PiB7XG4gICAgICByZXNvbHZlKGNvbm5lY3Rpb24pO1xuICAgIH0pO1xuXG4gICAgbW9uZ29vc2UuY29ubmVjdGlvbi5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICByZWplY3QoZXJyKTtcbiAgICAgIGxvZ2dlci5lcnJvcih7XG4gICAgICAgIGxldmVsOiAnZXJyb3InLFxuICAgICAgICBtZXNzYWdlOiAn5pWw5o2u5bqT5rKh5pyJ6L+e5o6l5oiQ5YqfJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpbml0Q29ubmVjdGlvbjogaW5pdENvbm5lY3Rpb24sXG4gIGRpc2Nvbm5lY3Q6IGFzeW5jICgpID0+IHtcbiAgICBtb25nb29zZS5kaXNjb25uZWN0KCk7XG4gIH0sXG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQXhCOztBQUNBLE1BQU1DLFFBQVEsR0FBR0QsT0FBTyxDQUFDLFVBQUQsQ0FBeEI7O0FBQ0EsTUFBTTtFQUFFRTtBQUFGLElBQWFGLE9BQU8sQ0FBQyxpQkFBRCxDQUExQjs7QUFFQSxNQUFNRyxjQUFjLEdBQUcsWUFBWTtFQUNqQztFQUNBSixRQUFRLENBQUNLLE9BQVQsR0FBbUJDLE1BQU0sQ0FBQ0QsT0FBMUIsQ0FGaUMsQ0FJakM7RUFDQTtFQUNBOztFQUNBLE9BQU8sSUFBSUEsT0FBSixDQUFZLENBQUNFLE9BQUQsRUFBVUMsTUFBVixLQUFxQjtJQUN0QztJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0EsTUFBTUMsVUFBVSxHQUFHVCxRQUFRLENBQUNVLE9BQVQsRUFDakI7SUFDQyxhQUFZUixRQUFRLENBQUNTLFFBQVMsSUFBR1QsUUFBUSxDQUFDVSxRQUFTLElBQUdWLFFBQVEsQ0FBQ1csR0FBSSxJQUFHWCxRQUFRLENBQUNZLElBQUssSUFBR1osUUFBUSxDQUFDYSxNQUFPLG1CQUZ2RixFQUdqQjtNQUNFQyxrQkFBa0IsRUFBRSxJQUR0QjtNQUVFQyxlQUFlLEVBQUU7SUFGbkIsQ0FIaUIsQ0FBbkI7SUFTQWpCLFFBQVEsQ0FBQ1MsVUFBVCxDQUFvQlMsRUFBcEIsQ0FBdUIsV0FBdkIsRUFBcUNDLEdBQUQsSUFBUztNQUMzQ1osT0FBTyxDQUFDRSxVQUFELENBQVA7SUFDRCxDQUZEO0lBSUFULFFBQVEsQ0FBQ1MsVUFBVCxDQUFvQlMsRUFBcEIsQ0FBdUIsT0FBdkIsRUFBaUNDLEdBQUQsSUFBUztNQUN2Q1gsTUFBTSxDQUFDVyxHQUFELENBQU47TUFDQWhCLE1BQU0sQ0FBQ2lCLEtBQVAsQ0FBYTtRQUNYQyxLQUFLLEVBQUUsT0FESTtRQUVYQyxPQUFPLEVBQUU7TUFGRSxDQUFiO0lBSUQsQ0FORDtFQU9ELENBMUJNLENBQVA7QUEyQkQsQ0FsQ0Q7O0FBb0NBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUI7RUFDZnBCLGNBQWMsRUFBRUEsY0FERDtFQUVmcUIsVUFBVSxFQUFFLFlBQVk7SUFDdEJ6QixRQUFRLENBQUN5QixVQUFUO0VBQ0Q7QUFKYyxDQUFqQiJ9","map":{"version":3,"names":["mongoose","require","dbConfig","logger","initConnection","Promise","global","resolve","reject","connection","connect","username","password","url","prot","dbName","useUnifiedTopology","useNewUrlParser","on","err","error","level","message","module","exports","disconnect"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/db/","sources":["index.js"],"sourcesContent":["const mongoose = require('mongoose');\nconst dbConfig = require('./config');\nconst { logger } = require('../utils/logger');\n\nconst initConnection = async () => {\n  // 让 mongoose 使用全局 Promise 库\n  mongoose.Promise = global.Promise;\n\n  // 注意mongoDB 的数据库密码 只对当前的库有效！\n  // const connection = mongoose.connect(\"mongodb://admin:123456@192.168.101.10:27017/admin\",\n  //   { useUnifiedTopology: true, useNewUrlParser: true, useCreateIndex: true })\n  return new Promise((resolve, reject) => {\n    // const connection = mongoose.connect('mongodb://192.168.101.10:27017/test', {\n    //   useUnifiedTopology: true,\n    //   useNewUrlParser: true,\n    // });\n    // `mongodb://${dbConfig.username}:${dbConfig.password}@${dbConfig.host}:${dbConfig.port}/${dbConfig.dbName}?authSource=admin`,\n    const connection = mongoose.connect(\n      // 我们的test 通过admin库进行登录认证，才能去操作\n      `mongodb://${dbConfig.username}:${dbConfig.password}@${dbConfig.url}:${dbConfig.prot}/${dbConfig.dbName}?authSource=admin`,\n      {\n        useUnifiedTopology: true,\n        useNewUrlParser: true,\n      },\n    );\n\n    mongoose.connection.on('connected', (err) => {\n      resolve(connection);\n    });\n\n    mongoose.connection.on('error', (err) => {\n      reject(err);\n      logger.error({\n        level: 'error',\n        message: '数据库没有连接成功',\n      });\n    });\n  });\n};\n\nmodule.exports = {\n  initConnection: initConnection,\n  disconnect: async () => {\n    mongoose.disconnect();\n  },\n};\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAM;EAAEE;AAAF,IAAaF,OAAO,CAAC,iBAAD,CAA1B;;AAEA,MAAMG,cAAc,GAAG,YAAY;EACjC;EACAJ,QAAQ,CAACK,OAAT,GAAmBC,MAAM,CAACD,OAA1B,CAFiC,CAIjC;EACA;EACA;;EACA,OAAO,IAAIA,OAAJ,CAAY,CAACE,OAAD,EAAUC,MAAV,KAAqB;IACtC;IACA;IACA;IACA;IACA;IACA,MAAMC,UAAU,GAAGT,QAAQ,CAACU,OAAT,EACjB;IACC,aAAYR,QAAQ,CAACS,QAAS,IAAGT,QAAQ,CAACU,QAAS,IAAGV,QAAQ,CAACW,GAAI,IAAGX,QAAQ,CAACY,IAAK,IAAGZ,QAAQ,CAACa,MAAO,mBAFvF,EAGjB;MACEC,kBAAkB,EAAE,IADtB;MAEEC,eAAe,EAAE;IAFnB,CAHiB,CAAnB;IASAjB,QAAQ,CAACS,UAAT,CAAoBS,EAApB,CAAuB,WAAvB,EAAqCC,GAAD,IAAS;MAC3CZ,OAAO,CAACE,UAAD,CAAP;IACD,CAFD;IAIAT,QAAQ,CAACS,UAAT,CAAoBS,EAApB,CAAuB,OAAvB,EAAiCC,GAAD,IAAS;MACvCX,MAAM,CAACW,GAAD,CAAN;MACAhB,MAAM,CAACiB,KAAP,CAAa;QACXC,KAAK,EAAE,OADI;QAEXC,OAAO,EAAE;MAFE,CAAb;IAID,CAND;EAOD,CA1BM,CAAP;AA2BD,CAlCD;;AAoCAC,MAAM,CAACC,OAAP,GAAiB;EACfpB,cAAc,EAAEA,cADD;EAEfqB,UAAU,EAAE,YAAY;IACtBzB,QAAQ,CAACyB,UAAT;EACD;AAJc,CAAjB"}},"mtime":1653922782660},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/db/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/db/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"module.exports = {\n  url: '192.168.101.10',\n  prot: 27017,\n  dbName: 'test',\n  username: 'admin',\n  password: 123456\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwidXJsIiwicHJvdCIsImRiTmFtZSIsInVzZXJuYW1lIiwicGFzc3dvcmQiXSwic291cmNlUm9vdCI6Ii9Wb2x1bWVzL1dEX0JMQUNLL29yaWdpbi9wcmlzbWEtZXhwcmVzcy10ZXN0L2RiLyIsInNvdXJjZXMiOlsiY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0ge1xuICB1cmw6ICcxOTIuMTY4LjEwMS4xMCcsXG4gIHByb3Q6IDI3MDE3LFxuICBkYk5hbWU6ICd0ZXN0JyxcbiAgdXNlcm5hbWU6ICdhZG1pbicsXG4gIHBhc3N3b3JkOiAxMjM0NTYsXG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQUEsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0VBQ2ZDLEdBQUcsRUFBRSxnQkFEVTtFQUVmQyxJQUFJLEVBQUUsS0FGUztFQUdmQyxNQUFNLEVBQUUsTUFITztFQUlmQyxRQUFRLEVBQUUsT0FKSztFQUtmQyxRQUFRLEVBQUU7QUFMSyxDQUFqQiJ9","map":{"version":3,"names":["module","exports","url","prot","dbName","username","password"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/db/","sources":["config.js"],"sourcesContent":["module.exports = {\n  url: '192.168.101.10',\n  prot: 27017,\n  dbName: 'test',\n  username: 'admin',\n  password: 123456,\n};\n"],"mappings":"AAAAA,MAAM,CAACC,OAAP,GAAiB;EACfC,GAAG,EAAE,gBADU;EAEfC,IAAI,EAAE,KAFS;EAGfC,MAAM,EAAE,MAHO;EAIfC,QAAQ,EAAE,OAJK;EAKfC,QAAQ,EAAE;AALK,CAAjB"}},"mtime":1653750301950},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const {\n  initConnection\n} = require('./db');\n\nconst app = require('./app');\n\ninitConnection().then(() => {\n  app.listen(3000, () => {\n    console.log('server start in 3000');\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbml0Q29ubmVjdGlvbiIsInJlcXVpcmUiLCJhcHAiLCJ0aGVuIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiL1ZvbHVtZXMvV0RfQkxBQ0svb3JpZ2luL3ByaXNtYS1leHByZXNzLXRlc3QvIiwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBpbml0Q29ubmVjdGlvbiB9ID0gcmVxdWlyZSgnLi9kYicpO1xuY29uc3QgYXBwID0gcmVxdWlyZSgnLi9hcHAnKTtcblxuaW5pdENvbm5lY3Rpb24oKS50aGVuKCgpID0+IHtcbiAgYXBwLmxpc3RlbigzMDAwLCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ3NlcnZlciBzdGFydCBpbiAzMDAwJyk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBRixJQUFxQkMsT0FBTyxDQUFDLE1BQUQsQ0FBbEM7O0FBQ0EsTUFBTUMsR0FBRyxHQUFHRCxPQUFPLENBQUMsT0FBRCxDQUFuQjs7QUFFQUQsY0FBYyxHQUFHRyxJQUFqQixDQUFzQixNQUFNO0VBQzFCRCxHQUFHLENBQUNFLE1BQUosQ0FBVyxJQUFYLEVBQWlCLE1BQU07SUFDckJDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLHNCQUFaO0VBQ0QsQ0FGRDtBQUdELENBSkQifQ==","map":{"version":3,"names":["initConnection","require","app","then","listen","console","log"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/","sources":["server.js"],"sourcesContent":["const { initConnection } = require('./db');\nconst app = require('./app');\n\ninitConnection().then(() => {\n  app.listen(3000, () => {\n    console.log('server start in 3000');\n  });\n});\n"],"mappings":"AAAA,MAAM;EAAEA;AAAF,IAAqBC,OAAO,CAAC,MAAD,CAAlC;;AACA,MAAMC,GAAG,GAAGD,OAAO,CAAC,OAAD,CAAnB;;AAEAD,cAAc,GAAGG,IAAjB,CAAsB,MAAM;EAC1BD,GAAG,CAACE,MAAJ,CAAW,IAAX,EAAiB,MAAM;IACrBC,OAAO,CAACC,GAAR,CAAY,sBAAZ;EACD,CAFD;AAGD,CAJD"}},"mtime":1653926340000},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/utils/logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const winston = require('winston');\n\nconst logger = winston.createLogger({\n  level: 'info',\n  format: winston.format.json(),\n  defaultMeta: {\n    service: 'user-service'\n  },\n  transports: [new winston.transports.File({\n    filename: 'log/error.log',\n    level: 'error'\n  }), new winston.transports.File({\n    filename: 'log/combined.log'\n  })]\n});\nmodule.exports = {\n  logger: logger\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3aW5zdG9uIiwicmVxdWlyZSIsImxvZ2dlciIsImNyZWF0ZUxvZ2dlciIsImxldmVsIiwiZm9ybWF0IiwianNvbiIsImRlZmF1bHRNZXRhIiwic2VydmljZSIsInRyYW5zcG9ydHMiLCJGaWxlIiwiZmlsZW5hbWUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVm9sdW1lcy9XRF9CTEFDSy9vcmlnaW4vcHJpc21hLWV4cHJlc3MtdGVzdC91dGlscy8iLCJzb3VyY2VzIjpbImxvZ2dlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB3aW5zdG9uID0gcmVxdWlyZSgnd2luc3RvbicpO1xuXG5jb25zdCBsb2dnZXIgPSB3aW5zdG9uLmNyZWF0ZUxvZ2dlcih7XG4gIGxldmVsOiAnaW5mbycsXG4gIGZvcm1hdDogd2luc3Rvbi5mb3JtYXQuanNvbigpLFxuICBkZWZhdWx0TWV0YTogeyBzZXJ2aWNlOiAndXNlci1zZXJ2aWNlJyB9LFxuICB0cmFuc3BvcnRzOiBbXG4gICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5GaWxlKHsgZmlsZW5hbWU6ICdsb2cvZXJyb3IubG9nJywgbGV2ZWw6ICdlcnJvcicgfSksXG4gICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5GaWxlKHsgZmlsZW5hbWU6ICdsb2cvY29tYmluZWQubG9nJyB9KSxcbiAgXSxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgbG9nZ2VyOiBsb2dnZXIsXG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQXZCOztBQUVBLE1BQU1DLE1BQU0sR0FBR0YsT0FBTyxDQUFDRyxZQUFSLENBQXFCO0VBQ2xDQyxLQUFLLEVBQUUsTUFEMkI7RUFFbENDLE1BQU0sRUFBRUwsT0FBTyxDQUFDSyxNQUFSLENBQWVDLElBQWYsRUFGMEI7RUFHbENDLFdBQVcsRUFBRTtJQUFFQyxPQUFPLEVBQUU7RUFBWCxDQUhxQjtFQUlsQ0MsVUFBVSxFQUFFLENBQ1YsSUFBSVQsT0FBTyxDQUFDUyxVQUFSLENBQW1CQyxJQUF2QixDQUE0QjtJQUFFQyxRQUFRLEVBQUUsZUFBWjtJQUE2QlAsS0FBSyxFQUFFO0VBQXBDLENBQTVCLENBRFUsRUFFVixJQUFJSixPQUFPLENBQUNTLFVBQVIsQ0FBbUJDLElBQXZCLENBQTRCO0lBQUVDLFFBQVEsRUFBRTtFQUFaLENBQTVCLENBRlU7QUFKc0IsQ0FBckIsQ0FBZjtBQVVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUI7RUFDZlgsTUFBTSxFQUFFQTtBQURPLENBQWpCIn0=","map":{"version":3,"names":["winston","require","logger","createLogger","level","format","json","defaultMeta","service","transports","File","filename","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/utils/","sources":["logger.js"],"sourcesContent":["const winston = require('winston');\n\nconst logger = winston.createLogger({\n  level: 'info',\n  format: winston.format.json(),\n  defaultMeta: { service: 'user-service' },\n  transports: [\n    new winston.transports.File({ filename: 'log/error.log', level: 'error' }),\n    new winston.transports.File({ filename: 'log/combined.log' }),\n  ],\n});\n\nmodule.exports = {\n  logger: logger,\n};\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AAEA,MAAMC,MAAM,GAAGF,OAAO,CAACG,YAAR,CAAqB;EAClCC,KAAK,EAAE,MAD2B;EAElCC,MAAM,EAAEL,OAAO,CAACK,MAAR,CAAeC,IAAf,EAF0B;EAGlCC,WAAW,EAAE;IAAEC,OAAO,EAAE;EAAX,CAHqB;EAIlCC,UAAU,EAAE,CACV,IAAIT,OAAO,CAACS,UAAR,CAAmBC,IAAvB,CAA4B;IAAEC,QAAQ,EAAE,eAAZ;IAA6BP,KAAK,EAAE;EAApC,CAA5B,CADU,EAEV,IAAIJ,OAAO,CAACS,UAAR,CAAmBC,IAAvB,CAA4B;IAAEC,QAAQ,EAAE;EAAZ,CAA5B,CAFU;AAJsB,CAArB,CAAf;AAUAC,MAAM,CAACC,OAAP,GAAiB;EACfX,MAAM,EAAEA;AADO,CAAjB"}},"mtime":1653999201670},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const express = require('express');\n\nconst bodyParser = require('body-parser');\n\nconst compression = require('compression');\n\nconst {\n  graphqlHTTP\n} = require('express-graphql');\n\nconst {\n  schema\n} = require('./graphql');\n\nconst {\n  logger\n} = require('./utils/logger');\n\nconst {\n  reqInfo\n} = require('./middleware/reqInfo');\n\nconst author = require('./routes/author');\n\nconst book = require('./routes/book');\n\nconst genre = require('./routes/genre');\n\nconst bookInstance = require('./routes/bookInstance');\n\nconst app = express();\napp.use(bodyParser.json());\napp.use(compression()); // 引用全局中间件\n\napp.use(reqInfo); // 我们定义一个路由对User 和 Book 做路由的CRUD\n\napp.use('/author', author);\napp.use('/book', book);\napp.use('/genre', genre);\napp.use('/book-instance', bookInstance); // 下面是单独的graphQL 路由\n\napp.use('/graphql', graphqlHTTP({\n  schema\n})); // 设置一个路由，如果前面的都有问题，就到这里来处理错误\n\napp.use((err, req, res, next) => {\n  logger.error({\n    level: 'error',\n    message: err.message\n  });\n  res.status(500).json(err);\n});\nmodule.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImJvZHlQYXJzZXIiLCJjb21wcmVzc2lvbiIsImdyYXBocWxIVFRQIiwic2NoZW1hIiwibG9nZ2VyIiwicmVxSW5mbyIsImF1dGhvciIsImJvb2siLCJnZW5yZSIsImJvb2tJbnN0YW5jZSIsImFwcCIsInVzZSIsImpzb24iLCJlcnIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiZXJyb3IiLCJsZXZlbCIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVm9sdW1lcy9XRF9CTEFDSy9vcmlnaW4vcHJpc21hLWV4cHJlc3MtdGVzdC8iLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgYm9keVBhcnNlciA9IHJlcXVpcmUoJ2JvZHktcGFyc2VyJyk7XG5jb25zdCBjb21wcmVzc2lvbiA9IHJlcXVpcmUoJ2NvbXByZXNzaW9uJyk7XG5cbmNvbnN0IHsgZ3JhcGhxbEhUVFAgfSA9IHJlcXVpcmUoJ2V4cHJlc3MtZ3JhcGhxbCcpO1xuY29uc3QgeyBzY2hlbWEgfSA9IHJlcXVpcmUoJy4vZ3JhcGhxbCcpO1xuXG5jb25zdCB7IGxvZ2dlciB9ID0gcmVxdWlyZSgnLi91dGlscy9sb2dnZXInKTtcbmNvbnN0IHsgcmVxSW5mbyB9ID0gcmVxdWlyZSgnLi9taWRkbGV3YXJlL3JlcUluZm8nKTtcbmNvbnN0IGF1dGhvciA9IHJlcXVpcmUoJy4vcm91dGVzL2F1dGhvcicpO1xuY29uc3QgYm9vayA9IHJlcXVpcmUoJy4vcm91dGVzL2Jvb2snKTtcbmNvbnN0IGdlbnJlID0gcmVxdWlyZSgnLi9yb3V0ZXMvZ2VucmUnKTtcbmNvbnN0IGJvb2tJbnN0YW5jZSA9IHJlcXVpcmUoJy4vcm91dGVzL2Jvb2tJbnN0YW5jZScpO1xuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbmFwcC51c2UoY29tcHJlc3Npb24oKSk7XG5cbi8vIOW8leeUqOWFqOWxgOS4remXtOS7tlxuYXBwLnVzZShyZXFJbmZvKTtcblxuLy8g5oiR5Lus5a6a5LmJ5LiA5Liq6Lev55Sx5a+5VXNlciDlkowgQm9vayDlgZrot6/nlLHnmoRDUlVEXG5hcHAudXNlKCcvYXV0aG9yJywgYXV0aG9yKTtcbmFwcC51c2UoJy9ib29rJywgYm9vayk7XG5hcHAudXNlKCcvZ2VucmUnLCBnZW5yZSk7XG5hcHAudXNlKCcvYm9vay1pbnN0YW5jZScsIGJvb2tJbnN0YW5jZSk7XG5cbi8vIOS4i+mdouaYr+WNleeLrOeahGdyYXBoUUwg6Lev55SxXG5hcHAudXNlKFxuICAnL2dyYXBocWwnLFxuICBncmFwaHFsSFRUUCh7XG4gICAgc2NoZW1hLFxuICB9KSxcbik7XG5cbi8vIOiuvue9ruS4gOS4qui3r+eUse+8jOWmguaenOWJjemdoueahOmDveaciemXrumimO+8jOWwseWIsOi/memHjOadpeWkhOeQhumUmeivr1xuYXBwLnVzZSgoZXJyLCByZXEsIHJlcywgbmV4dCkgPT4ge1xuICBsb2dnZXIuZXJyb3Ioe1xuICAgIGxldmVsOiAnZXJyb3InLFxuICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICB9KTtcbiAgcmVzLnN0YXR1cyg1MDApLmpzb24oZXJyKTtcbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBhcHA7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBdkI7O0FBQ0EsTUFBTUMsVUFBVSxHQUFHRCxPQUFPLENBQUMsYUFBRCxDQUExQjs7QUFDQSxNQUFNRSxXQUFXLEdBQUdGLE9BQU8sQ0FBQyxhQUFELENBQTNCOztBQUVBLE1BQU07RUFBRUc7QUFBRixJQUFrQkgsT0FBTyxDQUFDLGlCQUFELENBQS9COztBQUNBLE1BQU07RUFBRUk7QUFBRixJQUFhSixPQUFPLENBQUMsV0FBRCxDQUExQjs7QUFFQSxNQUFNO0VBQUVLO0FBQUYsSUFBYUwsT0FBTyxDQUFDLGdCQUFELENBQTFCOztBQUNBLE1BQU07RUFBRU07QUFBRixJQUFjTixPQUFPLENBQUMsc0JBQUQsQ0FBM0I7O0FBQ0EsTUFBTU8sTUFBTSxHQUFHUCxPQUFPLENBQUMsaUJBQUQsQ0FBdEI7O0FBQ0EsTUFBTVEsSUFBSSxHQUFHUixPQUFPLENBQUMsZUFBRCxDQUFwQjs7QUFDQSxNQUFNUyxLQUFLLEdBQUdULE9BQU8sQ0FBQyxnQkFBRCxDQUFyQjs7QUFDQSxNQUFNVSxZQUFZLEdBQUdWLE9BQU8sQ0FBQyx1QkFBRCxDQUE1Qjs7QUFFQSxNQUFNVyxHQUFHLEdBQUdaLE9BQU8sRUFBbkI7QUFDQVksR0FBRyxDQUFDQyxHQUFKLENBQVFYLFVBQVUsQ0FBQ1ksSUFBWCxFQUFSO0FBQ0FGLEdBQUcsQ0FBQ0MsR0FBSixDQUFRVixXQUFXLEVBQW5CLEUsQ0FFQTs7QUFDQVMsR0FBRyxDQUFDQyxHQUFKLENBQVFOLE9BQVIsRSxDQUVBOztBQUNBSyxHQUFHLENBQUNDLEdBQUosQ0FBUSxTQUFSLEVBQW1CTCxNQUFuQjtBQUNBSSxHQUFHLENBQUNDLEdBQUosQ0FBUSxPQUFSLEVBQWlCSixJQUFqQjtBQUNBRyxHQUFHLENBQUNDLEdBQUosQ0FBUSxRQUFSLEVBQWtCSCxLQUFsQjtBQUNBRSxHQUFHLENBQUNDLEdBQUosQ0FBUSxnQkFBUixFQUEwQkYsWUFBMUIsRSxDQUVBOztBQUNBQyxHQUFHLENBQUNDLEdBQUosQ0FDRSxVQURGLEVBRUVULFdBQVcsQ0FBQztFQUNWQztBQURVLENBQUQsQ0FGYixFLENBT0E7O0FBQ0FPLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLENBQUNFLEdBQUQsRUFBTUMsR0FBTixFQUFXQyxHQUFYLEVBQWdCQyxJQUFoQixLQUF5QjtFQUMvQlosTUFBTSxDQUFDYSxLQUFQLENBQWE7SUFDWEMsS0FBSyxFQUFFLE9BREk7SUFFWEMsT0FBTyxFQUFFTixHQUFHLENBQUNNO0VBRkYsQ0FBYjtFQUlBSixHQUFHLENBQUNLLE1BQUosQ0FBVyxHQUFYLEVBQWdCUixJQUFoQixDQUFxQkMsR0FBckI7QUFDRCxDQU5EO0FBT0FRLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQlosR0FBakIifQ==","map":{"version":3,"names":["express","require","bodyParser","compression","graphqlHTTP","schema","logger","reqInfo","author","book","genre","bookInstance","app","use","json","err","req","res","next","error","level","message","status","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/","sources":["app.js"],"sourcesContent":["const express = require('express');\nconst bodyParser = require('body-parser');\nconst compression = require('compression');\n\nconst { graphqlHTTP } = require('express-graphql');\nconst { schema } = require('./graphql');\n\nconst { logger } = require('./utils/logger');\nconst { reqInfo } = require('./middleware/reqInfo');\nconst author = require('./routes/author');\nconst book = require('./routes/book');\nconst genre = require('./routes/genre');\nconst bookInstance = require('./routes/bookInstance');\n\nconst app = express();\napp.use(bodyParser.json());\napp.use(compression());\n\n// 引用全局中间件\napp.use(reqInfo);\n\n// 我们定义一个路由对User 和 Book 做路由的CRUD\napp.use('/author', author);\napp.use('/book', book);\napp.use('/genre', genre);\napp.use('/book-instance', bookInstance);\n\n// 下面是单独的graphQL 路由\napp.use(\n  '/graphql',\n  graphqlHTTP({\n    schema,\n  }),\n);\n\n// 设置一个路由，如果前面的都有问题，就到这里来处理错误\napp.use((err, req, res, next) => {\n  logger.error({\n    level: 'error',\n    message: err.message,\n  });\n  res.status(500).json(err);\n});\nmodule.exports = app;\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,UAAU,GAAGD,OAAO,CAAC,aAAD,CAA1B;;AACA,MAAME,WAAW,GAAGF,OAAO,CAAC,aAAD,CAA3B;;AAEA,MAAM;EAAEG;AAAF,IAAkBH,OAAO,CAAC,iBAAD,CAA/B;;AACA,MAAM;EAAEI;AAAF,IAAaJ,OAAO,CAAC,WAAD,CAA1B;;AAEA,MAAM;EAAEK;AAAF,IAAaL,OAAO,CAAC,gBAAD,CAA1B;;AACA,MAAM;EAAEM;AAAF,IAAcN,OAAO,CAAC,sBAAD,CAA3B;;AACA,MAAMO,MAAM,GAAGP,OAAO,CAAC,iBAAD,CAAtB;;AACA,MAAMQ,IAAI,GAAGR,OAAO,CAAC,eAAD,CAApB;;AACA,MAAMS,KAAK,GAAGT,OAAO,CAAC,gBAAD,CAArB;;AACA,MAAMU,YAAY,GAAGV,OAAO,CAAC,uBAAD,CAA5B;;AAEA,MAAMW,GAAG,GAAGZ,OAAO,EAAnB;AACAY,GAAG,CAACC,GAAJ,CAAQX,UAAU,CAACY,IAAX,EAAR;AACAF,GAAG,CAACC,GAAJ,CAAQV,WAAW,EAAnB,E,CAEA;;AACAS,GAAG,CAACC,GAAJ,CAAQN,OAAR,E,CAEA;;AACAK,GAAG,CAACC,GAAJ,CAAQ,SAAR,EAAmBL,MAAnB;AACAI,GAAG,CAACC,GAAJ,CAAQ,OAAR,EAAiBJ,IAAjB;AACAG,GAAG,CAACC,GAAJ,CAAQ,QAAR,EAAkBH,KAAlB;AACAE,GAAG,CAACC,GAAJ,CAAQ,gBAAR,EAA0BF,YAA1B,E,CAEA;;AACAC,GAAG,CAACC,GAAJ,CACE,UADF,EAEET,WAAW,CAAC;EACVC;AADU,CAAD,CAFb,E,CAOA;;AACAO,GAAG,CAACC,GAAJ,CAAQ,CAACE,GAAD,EAAMC,GAAN,EAAWC,GAAX,EAAgBC,IAAhB,KAAyB;EAC/BZ,MAAM,CAACa,KAAP,CAAa;IACXC,KAAK,EAAE,OADI;IAEXC,OAAO,EAAEN,GAAG,CAACM;EAFF,CAAb;EAIAJ,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBR,IAAhB,CAAqBC,GAArB;AACD,CAND;AAOAQ,MAAM,CAACC,OAAP,GAAiBZ,GAAjB"}},"mtime":1654095299090},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/graphql/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/graphql/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const {\n  resolvers\n} = require('./resolvers');\n\nconst {\n  typeDefs\n} = require('./schema');\n\nconst {\n  makeExecutableSchema\n} = require('@graphql-tools/schema'); //  特别注意 ⚠️  对于es6 使用  npx babel-node  index.js 去编译 部分esModule,\n\n\nconst schema = makeExecutableSchema({\n  typeDefs,\n  resolvers\n});\nmodule.exports = {\n  schema: schema\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXNvbHZlcnMiLCJyZXF1aXJlIiwidHlwZURlZnMiLCJtYWtlRXhlY3V0YWJsZVNjaGVtYSIsInNjaGVtYSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Wb2x1bWVzL1dEX0JMQUNLL29yaWdpbi9wcmlzbWEtZXhwcmVzcy10ZXN0L2dyYXBocWwvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHJlc29sdmVycyB9ID0gcmVxdWlyZSgnLi9yZXNvbHZlcnMnKTtcbmNvbnN0IHsgdHlwZURlZnMgfSA9IHJlcXVpcmUoJy4vc2NoZW1hJyk7XG5jb25zdCB7IG1ha2VFeGVjdXRhYmxlU2NoZW1hIH0gPSByZXF1aXJlKCdAZ3JhcGhxbC10b29scy9zY2hlbWEnKTtcbi8vICDnibnliKvms6jmhI8g4pqg77iPICDlr7nkuo5lczYg5L2/55SoICBucHggYmFiZWwtbm9kZSAgaW5kZXguanMg5Y6757yW6K+RIOmDqOWIhmVzTW9kdWxlLFxuXG5jb25zdCBzY2hlbWEgPSBtYWtlRXhlY3V0YWJsZVNjaGVtYSh7XG4gIHR5cGVEZWZzLFxuICByZXNvbHZlcnMsXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHNjaGVtYTogc2NoZW1hLFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQTtBQUFGLElBQWdCQyxPQUFPLENBQUMsYUFBRCxDQUE3Qjs7QUFDQSxNQUFNO0VBQUVDO0FBQUYsSUFBZUQsT0FBTyxDQUFDLFVBQUQsQ0FBNUI7O0FBQ0EsTUFBTTtFQUFFRTtBQUFGLElBQTJCRixPQUFPLENBQUMsdUJBQUQsQ0FBeEMsQyxDQUNBOzs7QUFFQSxNQUFNRyxNQUFNLEdBQUdELG9CQUFvQixDQUFDO0VBQ2xDRCxRQURrQztFQUVsQ0Y7QUFGa0MsQ0FBRCxDQUFuQztBQUtBSyxNQUFNLENBQUNDLE9BQVAsR0FBaUI7RUFDZkYsTUFBTSxFQUFFQTtBQURPLENBQWpCIn0=","map":{"version":3,"names":["resolvers","require","typeDefs","makeExecutableSchema","schema","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/graphql/","sources":["index.js"],"sourcesContent":["const { resolvers } = require('./resolvers');\nconst { typeDefs } = require('./schema');\nconst { makeExecutableSchema } = require('@graphql-tools/schema');\n//  特别注意 ⚠️  对于es6 使用  npx babel-node  index.js 去编译 部分esModule,\n\nconst schema = makeExecutableSchema({\n  typeDefs,\n  resolvers,\n});\n\nmodule.exports = {\n  schema: schema,\n};\n"],"mappings":"AAAA,MAAM;EAAEA;AAAF,IAAgBC,OAAO,CAAC,aAAD,CAA7B;;AACA,MAAM;EAAEC;AAAF,IAAeD,OAAO,CAAC,UAAD,CAA5B;;AACA,MAAM;EAAEE;AAAF,IAA2BF,OAAO,CAAC,uBAAD,CAAxC,C,CACA;;;AAEA,MAAMG,MAAM,GAAGD,oBAAoB,CAAC;EAClCD,QADkC;EAElCF;AAFkC,CAAD,CAAnC;AAKAK,MAAM,CAACC,OAAP,GAAiB;EACfF,MAAM,EAAEA;AADO,CAAjB"}},"mtime":1654093534500},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/graphql/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/graphql/resolvers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const {\n  queryAuthor,\n  update,\n  createAuthor,\n  findAndDelete\n} = require('../service/authorService');\n\nconst {\n  queryBook\n} = require('../service/bookService');\n\nconst resolvers = {\n  Query: {\n    authors(parent, args, ctx, info) {\n      return queryAuthor({});\n    },\n\n    author(parent, args, ctx, info) {\n      const {\n        id\n      } = args;\n      return queryAuthor({\n        id: id\n      });\n    },\n\n    books() {\n      return queryBook({}); // 关联查询交给 service来做\n    }\n\n  },\n  Mutation: {\n    createAuthor: async (parent, args) => {\n      const {\n        id,\n        first_name,\n        family_name,\n        age\n      } = args;\n      return await createAuthor({\n        id,\n        first_name,\n        family_name,\n        age\n      });\n    },\n    deleteAuthorByID: async (parent, args) => {\n      return await findAndDelete(args.id);\n    },\n    updateAuthor: async (parent, args) => {\n      const {\n        id,\n        first_name,\n        family_name,\n        age\n      } = args;\n      const author = await queryAuthor({\n        id: id\n      }); // 由于authorService 中使用 了 findByIdAndUpdate 它返回的是被修改前的模样\n      // 所以我们又去查了一遍\n\n      if (!author) {\n        throw new Error('查无此人');\n      }\n\n      await update(id, {\n        first_name,\n        family_name,\n        age\n      });\n      return await queryAuthor({\n        id: id\n      });\n    }\n  },\n  Subscription: {\n    subsAuthor: {\n      subscribe: async (a, b, c, d) => {\n        console.log('====================================');\n        console.log(a, b, c, d);\n        console.log('====================================');\n        return await queryAuthor({});\n      },\n      resolve: (payload, variables) => {\n        console.log('🚢 接收到数据： ', payload);\n      }\n    }\n  }\n};\nmodule.exports = {\n  resolvers: resolvers\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJxdWVyeUF1dGhvciIsInVwZGF0ZSIsImNyZWF0ZUF1dGhvciIsImZpbmRBbmREZWxldGUiLCJyZXF1aXJlIiwicXVlcnlCb29rIiwicmVzb2x2ZXJzIiwiUXVlcnkiLCJhdXRob3JzIiwicGFyZW50IiwiYXJncyIsImN0eCIsImluZm8iLCJhdXRob3IiLCJpZCIsImJvb2tzIiwiTXV0YXRpb24iLCJmaXJzdF9uYW1lIiwiZmFtaWx5X25hbWUiLCJhZ2UiLCJkZWxldGVBdXRob3JCeUlEIiwidXBkYXRlQXV0aG9yIiwiRXJyb3IiLCJTdWJzY3JpcHRpb24iLCJzdWJzQXV0aG9yIiwic3Vic2NyaWJlIiwiYSIsImIiLCJjIiwiZCIsImNvbnNvbGUiLCJsb2ciLCJyZXNvbHZlIiwicGF5bG9hZCIsInZhcmlhYmxlcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Wb2x1bWVzL1dEX0JMQUNLL29yaWdpbi9wcmlzbWEtZXhwcmVzcy10ZXN0L2dyYXBocWwvIiwic291cmNlcyI6WyJyZXNvbHZlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge1xuICBxdWVyeUF1dGhvcixcbiAgdXBkYXRlLFxuICBjcmVhdGVBdXRob3IsXG4gIGZpbmRBbmREZWxldGUsXG59ID0gcmVxdWlyZSgnLi4vc2VydmljZS9hdXRob3JTZXJ2aWNlJyk7XG5jb25zdCB7IHF1ZXJ5Qm9vayB9ID0gcmVxdWlyZSgnLi4vc2VydmljZS9ib29rU2VydmljZScpO1xuY29uc3QgcmVzb2x2ZXJzID0ge1xuICBRdWVyeToge1xuICAgIGF1dGhvcnMocGFyZW50LCBhcmdzLCBjdHgsIGluZm8pIHtcbiAgICAgIHJldHVybiBxdWVyeUF1dGhvcih7fSk7XG4gICAgfSxcbiAgICBhdXRob3IocGFyZW50LCBhcmdzLCBjdHgsIGluZm8pIHtcbiAgICAgIGNvbnN0IHsgaWQgfSA9IGFyZ3M7XG4gICAgICByZXR1cm4gcXVlcnlBdXRob3IoeyBpZDogaWQgfSk7XG4gICAgfSxcbiAgICBib29rcygpIHtcbiAgICAgIHJldHVybiBxdWVyeUJvb2soe30pOyAvLyDlhbPogZTmn6Xor6LkuqTnu5kgc2VydmljZeadpeWBmlxuICAgIH0sXG4gIH0sXG4gIE11dGF0aW9uOiB7XG4gICAgY3JlYXRlQXV0aG9yOiBhc3luYyAocGFyZW50LCBhcmdzKSA9PiB7XG4gICAgICBjb25zdCB7IGlkLCBmaXJzdF9uYW1lLCBmYW1pbHlfbmFtZSwgYWdlIH0gPSBhcmdzO1xuICAgICAgcmV0dXJuIGF3YWl0IGNyZWF0ZUF1dGhvcih7IGlkLCBmaXJzdF9uYW1lLCBmYW1pbHlfbmFtZSwgYWdlIH0pO1xuICAgIH0sXG4gICAgZGVsZXRlQXV0aG9yQnlJRDogYXN5bmMgKHBhcmVudCwgYXJncykgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IGZpbmRBbmREZWxldGUoYXJncy5pZCk7XG4gICAgfSxcbiAgICB1cGRhdGVBdXRob3I6IGFzeW5jIChwYXJlbnQsIGFyZ3MpID0+IHtcbiAgICAgIGNvbnN0IHsgaWQsIGZpcnN0X25hbWUsIGZhbWlseV9uYW1lLCBhZ2UgfSA9IGFyZ3M7XG4gICAgICBjb25zdCBhdXRob3IgPSBhd2FpdCBxdWVyeUF1dGhvcih7IGlkOiBpZCB9KTtcbiAgICAgIC8vIOeUseS6jmF1dGhvclNlcnZpY2Ug5Lit5L2/55SoIOS6hiBmaW5kQnlJZEFuZFVwZGF0ZSDlroPov5Tlm57nmoTmmK/ooqvkv67mlLnliY3nmoTmqKHmoLdcbiAgICAgIC8vIOaJgOS7peaIkeS7rOWPiOWOu+afpeS6huS4gOmBjVxuICAgICAgaWYgKCFhdXRob3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfmn6Xml6DmraTkuronKTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHVwZGF0ZShpZCwge1xuICAgICAgICBmaXJzdF9uYW1lLFxuICAgICAgICBmYW1pbHlfbmFtZSxcbiAgICAgICAgYWdlLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gYXdhaXQgcXVlcnlBdXRob3IoeyBpZDogaWQgfSk7XG4gICAgfSxcbiAgfSxcbiAgU3Vic2NyaXB0aW9uOiB7XG4gICAgc3Vic0F1dGhvcjoge1xuICAgICAgc3Vic2NyaWJlOiBhc3luYyAoYSwgYiwgYywgZCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Jyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGEsIGIsIGMsIGQpO1xuICAgICAgICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Jyk7XG4gICAgICAgIHJldHVybiBhd2FpdCBxdWVyeUF1dGhvcih7fSk7XG4gICAgICB9LFxuICAgICAgcmVzb2x2ZTogKHBheWxvYWQsIHZhcmlhYmxlcykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+aoiDmjqXmlLbliLDmlbDmja7vvJogJywgcGF5bG9hZCk7XG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcmVzb2x2ZXJzOiByZXNvbHZlcnMsXG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNO0VBQ0pBLFdBREk7RUFFSkMsTUFGSTtFQUdKQyxZQUhJO0VBSUpDO0FBSkksSUFLRkMsT0FBTyxDQUFDLDBCQUFELENBTFg7O0FBTUEsTUFBTTtFQUFFQztBQUFGLElBQWdCRCxPQUFPLENBQUMsd0JBQUQsQ0FBN0I7O0FBQ0EsTUFBTUUsU0FBUyxHQUFHO0VBQ2hCQyxLQUFLLEVBQUU7SUFDTEMsT0FBTyxDQUFDQyxNQUFELEVBQVNDLElBQVQsRUFBZUMsR0FBZixFQUFvQkMsSUFBcEIsRUFBMEI7TUFDL0IsT0FBT1osV0FBVyxDQUFDLEVBQUQsQ0FBbEI7SUFDRCxDQUhJOztJQUlMYSxNQUFNLENBQUNKLE1BQUQsRUFBU0MsSUFBVCxFQUFlQyxHQUFmLEVBQW9CQyxJQUFwQixFQUEwQjtNQUM5QixNQUFNO1FBQUVFO01BQUYsSUFBU0osSUFBZjtNQUNBLE9BQU9WLFdBQVcsQ0FBQztRQUFFYyxFQUFFLEVBQUVBO01BQU4sQ0FBRCxDQUFsQjtJQUNELENBUEk7O0lBUUxDLEtBQUssR0FBRztNQUNOLE9BQU9WLFNBQVMsQ0FBQyxFQUFELENBQWhCLENBRE0sQ0FDZ0I7SUFDdkI7O0VBVkksQ0FEUztFQWFoQlcsUUFBUSxFQUFFO0lBQ1JkLFlBQVksRUFBRSxPQUFPTyxNQUFQLEVBQWVDLElBQWYsS0FBd0I7TUFDcEMsTUFBTTtRQUFFSSxFQUFGO1FBQU1HLFVBQU47UUFBa0JDLFdBQWxCO1FBQStCQztNQUEvQixJQUF1Q1QsSUFBN0M7TUFDQSxPQUFPLE1BQU1SLFlBQVksQ0FBQztRQUFFWSxFQUFGO1FBQU1HLFVBQU47UUFBa0JDLFdBQWxCO1FBQStCQztNQUEvQixDQUFELENBQXpCO0lBQ0QsQ0FKTztJQUtSQyxnQkFBZ0IsRUFBRSxPQUFPWCxNQUFQLEVBQWVDLElBQWYsS0FBd0I7TUFDeEMsT0FBTyxNQUFNUCxhQUFhLENBQUNPLElBQUksQ0FBQ0ksRUFBTixDQUExQjtJQUNELENBUE87SUFRUk8sWUFBWSxFQUFFLE9BQU9aLE1BQVAsRUFBZUMsSUFBZixLQUF3QjtNQUNwQyxNQUFNO1FBQUVJLEVBQUY7UUFBTUcsVUFBTjtRQUFrQkMsV0FBbEI7UUFBK0JDO01BQS9CLElBQXVDVCxJQUE3QztNQUNBLE1BQU1HLE1BQU0sR0FBRyxNQUFNYixXQUFXLENBQUM7UUFBRWMsRUFBRSxFQUFFQTtNQUFOLENBQUQsQ0FBaEMsQ0FGb0MsQ0FHcEM7TUFDQTs7TUFDQSxJQUFJLENBQUNELE1BQUwsRUFBYTtRQUNYLE1BQU0sSUFBSVMsS0FBSixDQUFVLE1BQVYsQ0FBTjtNQUNEOztNQUNELE1BQU1yQixNQUFNLENBQUNhLEVBQUQsRUFBSztRQUNmRyxVQURlO1FBRWZDLFdBRmU7UUFHZkM7TUFIZSxDQUFMLENBQVo7TUFLQSxPQUFPLE1BQU1uQixXQUFXLENBQUM7UUFBRWMsRUFBRSxFQUFFQTtNQUFOLENBQUQsQ0FBeEI7SUFDRDtFQXRCTyxDQWJNO0VBcUNoQlMsWUFBWSxFQUFFO0lBQ1pDLFVBQVUsRUFBRTtNQUNWQyxTQUFTLEVBQUUsT0FBT0MsQ0FBUCxFQUFVQyxDQUFWLEVBQWFDLENBQWIsRUFBZ0JDLENBQWhCLEtBQXNCO1FBQy9CQyxPQUFPLENBQUNDLEdBQVIsQ0FBWSxzQ0FBWjtRQUNBRCxPQUFPLENBQUNDLEdBQVIsQ0FBWUwsQ0FBWixFQUFlQyxDQUFmLEVBQWtCQyxDQUFsQixFQUFxQkMsQ0FBckI7UUFDQUMsT0FBTyxDQUFDQyxHQUFSLENBQVksc0NBQVo7UUFDQSxPQUFPLE1BQU0vQixXQUFXLENBQUMsRUFBRCxDQUF4QjtNQUNELENBTlM7TUFPVmdDLE9BQU8sRUFBRSxDQUFDQyxPQUFELEVBQVVDLFNBQVYsS0FBd0I7UUFDL0JKLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLFlBQVosRUFBMEJFLE9BQTFCO01BQ0Q7SUFUUztFQURBO0FBckNFLENBQWxCO0FBb0RBRSxNQUFNLENBQUNDLE9BQVAsR0FBaUI7RUFDZjlCLFNBQVMsRUFBRUE7QUFESSxDQUFqQiJ9","map":{"version":3,"names":["queryAuthor","update","createAuthor","findAndDelete","require","queryBook","resolvers","Query","authors","parent","args","ctx","info","author","id","books","Mutation","first_name","family_name","age","deleteAuthorByID","updateAuthor","Error","Subscription","subsAuthor","subscribe","a","b","c","d","console","log","resolve","payload","variables","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/graphql/","sources":["resolvers.js"],"sourcesContent":["const {\n  queryAuthor,\n  update,\n  createAuthor,\n  findAndDelete,\n} = require('../service/authorService');\nconst { queryBook } = require('../service/bookService');\nconst resolvers = {\n  Query: {\n    authors(parent, args, ctx, info) {\n      return queryAuthor({});\n    },\n    author(parent, args, ctx, info) {\n      const { id } = args;\n      return queryAuthor({ id: id });\n    },\n    books() {\n      return queryBook({}); // 关联查询交给 service来做\n    },\n  },\n  Mutation: {\n    createAuthor: async (parent, args) => {\n      const { id, first_name, family_name, age } = args;\n      return await createAuthor({ id, first_name, family_name, age });\n    },\n    deleteAuthorByID: async (parent, args) => {\n      return await findAndDelete(args.id);\n    },\n    updateAuthor: async (parent, args) => {\n      const { id, first_name, family_name, age } = args;\n      const author = await queryAuthor({ id: id });\n      // 由于authorService 中使用 了 findByIdAndUpdate 它返回的是被修改前的模样\n      // 所以我们又去查了一遍\n      if (!author) {\n        throw new Error('查无此人');\n      }\n      await update(id, {\n        first_name,\n        family_name,\n        age,\n      });\n      return await queryAuthor({ id: id });\n    },\n  },\n  Subscription: {\n    subsAuthor: {\n      subscribe: async (a, b, c, d) => {\n        console.log('====================================');\n        console.log(a, b, c, d);\n        console.log('====================================');\n        return await queryAuthor({});\n      },\n      resolve: (payload, variables) => {\n        console.log('🚢 接收到数据： ', payload);\n      },\n    },\n  },\n};\n\nmodule.exports = {\n  resolvers: resolvers,\n};\n"],"mappings":"AAAA,MAAM;EACJA,WADI;EAEJC,MAFI;EAGJC,YAHI;EAIJC;AAJI,IAKFC,OAAO,CAAC,0BAAD,CALX;;AAMA,MAAM;EAAEC;AAAF,IAAgBD,OAAO,CAAC,wBAAD,CAA7B;;AACA,MAAME,SAAS,GAAG;EAChBC,KAAK,EAAE;IACLC,OAAO,CAACC,MAAD,EAASC,IAAT,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;MAC/B,OAAOZ,WAAW,CAAC,EAAD,CAAlB;IACD,CAHI;;IAILa,MAAM,CAACJ,MAAD,EAASC,IAAT,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;MAC9B,MAAM;QAAEE;MAAF,IAASJ,IAAf;MACA,OAAOV,WAAW,CAAC;QAAEc,EAAE,EAAEA;MAAN,CAAD,CAAlB;IACD,CAPI;;IAQLC,KAAK,GAAG;MACN,OAAOV,SAAS,CAAC,EAAD,CAAhB,CADM,CACgB;IACvB;;EAVI,CADS;EAahBW,QAAQ,EAAE;IACRd,YAAY,EAAE,OAAOO,MAAP,EAAeC,IAAf,KAAwB;MACpC,MAAM;QAAEI,EAAF;QAAMG,UAAN;QAAkBC,WAAlB;QAA+BC;MAA/B,IAAuCT,IAA7C;MACA,OAAO,MAAMR,YAAY,CAAC;QAAEY,EAAF;QAAMG,UAAN;QAAkBC,WAAlB;QAA+BC;MAA/B,CAAD,CAAzB;IACD,CAJO;IAKRC,gBAAgB,EAAE,OAAOX,MAAP,EAAeC,IAAf,KAAwB;MACxC,OAAO,MAAMP,aAAa,CAACO,IAAI,CAACI,EAAN,CAA1B;IACD,CAPO;IAQRO,YAAY,EAAE,OAAOZ,MAAP,EAAeC,IAAf,KAAwB;MACpC,MAAM;QAAEI,EAAF;QAAMG,UAAN;QAAkBC,WAAlB;QAA+BC;MAA/B,IAAuCT,IAA7C;MACA,MAAMG,MAAM,GAAG,MAAMb,WAAW,CAAC;QAAEc,EAAE,EAAEA;MAAN,CAAD,CAAhC,CAFoC,CAGpC;MACA;;MACA,IAAI,CAACD,MAAL,EAAa;QACX,MAAM,IAAIS,KAAJ,CAAU,MAAV,CAAN;MACD;;MACD,MAAMrB,MAAM,CAACa,EAAD,EAAK;QACfG,UADe;QAEfC,WAFe;QAGfC;MAHe,CAAL,CAAZ;MAKA,OAAO,MAAMnB,WAAW,CAAC;QAAEc,EAAE,EAAEA;MAAN,CAAD,CAAxB;IACD;EAtBO,CAbM;EAqChBS,YAAY,EAAE;IACZC,UAAU,EAAE;MACVC,SAAS,EAAE,OAAOC,CAAP,EAAUC,CAAV,EAAaC,CAAb,EAAgBC,CAAhB,KAAsB;QAC/BC,OAAO,CAACC,GAAR,CAAY,sCAAZ;QACAD,OAAO,CAACC,GAAR,CAAYL,CAAZ,EAAeC,CAAf,EAAkBC,CAAlB,EAAqBC,CAArB;QACAC,OAAO,CAACC,GAAR,CAAY,sCAAZ;QACA,OAAO,MAAM/B,WAAW,CAAC,EAAD,CAAxB;MACD,CANS;MAOVgC,OAAO,EAAE,CAACC,OAAD,EAAUC,SAAV,KAAwB;QAC/BJ,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BE,OAA1B;MACD;IATS;EADA;AArCE,CAAlB;AAoDAE,MAAM,CAACC,OAAP,GAAiB;EACf9B,SAAS,EAAEA;AADI,CAAjB"}},"mtime":1654099094500},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/service/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/service/authorService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const AuthorModel = require('../model/Author');\n\nconst createAuthor = async data => {\n  const res = await AuthorModel.create(data); // AuthorModel.save(data); 也可以\n\n  return res;\n};\n\nconst queryAuthor = async query => {\n  if (query.id) {\n    const res = await AuthorModel.findById(query.id);\n    return res;\n  }\n\n  const res = await AuthorModel.find(); // 查所有\n\n  return res;\n};\n\nconst update = async (id, data) => {\n  const res = await AuthorModel.findByIdAndUpdate(id, data);\n  return res;\n};\n\nconst findAndDelete = async id => {\n  const res = await AuthorModel.findByIdAndRemove(id);\n  return res;\n};\n\nmodule.exports = {\n  createAuthor: createAuthor,\n  queryAuthor: queryAuthor,\n  update: update,\n  findAndDelete: findAndDelete\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBdXRob3JNb2RlbCIsInJlcXVpcmUiLCJjcmVhdGVBdXRob3IiLCJkYXRhIiwicmVzIiwiY3JlYXRlIiwicXVlcnlBdXRob3IiLCJxdWVyeSIsImlkIiwiZmluZEJ5SWQiLCJmaW5kIiwidXBkYXRlIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJmaW5kQW5kRGVsZXRlIiwiZmluZEJ5SWRBbmRSZW1vdmUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVm9sdW1lcy9XRF9CTEFDSy9vcmlnaW4vcHJpc21hLWV4cHJlc3MtdGVzdC9zZXJ2aWNlLyIsInNvdXJjZXMiOlsiYXV0aG9yU2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBBdXRob3JNb2RlbCA9IHJlcXVpcmUoJy4uL21vZGVsL0F1dGhvcicpO1xuXG5jb25zdCBjcmVhdGVBdXRob3IgPSBhc3luYyAoZGF0YSkgPT4ge1xuICBjb25zdCByZXMgPSBhd2FpdCBBdXRob3JNb2RlbC5jcmVhdGUoZGF0YSk7IC8vIEF1dGhvck1vZGVsLnNhdmUoZGF0YSk7IOS5n+WPr+S7pVxuICByZXR1cm4gcmVzO1xufTtcblxuY29uc3QgcXVlcnlBdXRob3IgPSBhc3luYyAocXVlcnkpID0+IHtcbiAgaWYgKHF1ZXJ5LmlkKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgQXV0aG9yTW9kZWwuZmluZEJ5SWQocXVlcnkuaWQpO1xuICAgIHJldHVybiByZXM7XG4gIH1cbiAgY29uc3QgcmVzID0gYXdhaXQgQXV0aG9yTW9kZWwuZmluZCgpOyAvLyDmn6XmiYDmnIlcbiAgcmV0dXJuIHJlcztcbn07XG5cbmNvbnN0IHVwZGF0ZSA9IGFzeW5jIChpZCwgZGF0YSkgPT4ge1xuICBjb25zdCByZXMgPSBhd2FpdCBBdXRob3JNb2RlbC5maW5kQnlJZEFuZFVwZGF0ZShpZCwgZGF0YSk7XG4gIHJldHVybiByZXM7XG59O1xuXG5jb25zdCBmaW5kQW5kRGVsZXRlID0gYXN5bmMgKGlkKSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IEF1dGhvck1vZGVsLmZpbmRCeUlkQW5kUmVtb3ZlKGlkKTtcbiAgcmV0dXJuIHJlcztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGVBdXRob3I6IGNyZWF0ZUF1dGhvcixcbiAgcXVlcnlBdXRob3I6IHF1ZXJ5QXV0aG9yLFxuICB1cGRhdGU6IHVwZGF0ZSxcbiAgZmluZEFuZERlbGV0ZTogZmluZEFuZERlbGV0ZSxcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFdBQVcsR0FBR0MsT0FBTyxDQUFDLGlCQUFELENBQTNCOztBQUVBLE1BQU1DLFlBQVksR0FBRyxNQUFPQyxJQUFQLElBQWdCO0VBQ25DLE1BQU1DLEdBQUcsR0FBRyxNQUFNSixXQUFXLENBQUNLLE1BQVosQ0FBbUJGLElBQW5CLENBQWxCLENBRG1DLENBQ1M7O0VBQzVDLE9BQU9DLEdBQVA7QUFDRCxDQUhEOztBQUtBLE1BQU1FLFdBQVcsR0FBRyxNQUFPQyxLQUFQLElBQWlCO0VBQ25DLElBQUlBLEtBQUssQ0FBQ0MsRUFBVixFQUFjO0lBQ1osTUFBTUosR0FBRyxHQUFHLE1BQU1KLFdBQVcsQ0FBQ1MsUUFBWixDQUFxQkYsS0FBSyxDQUFDQyxFQUEzQixDQUFsQjtJQUNBLE9BQU9KLEdBQVA7RUFDRDs7RUFDRCxNQUFNQSxHQUFHLEdBQUcsTUFBTUosV0FBVyxDQUFDVSxJQUFaLEVBQWxCLENBTG1DLENBS0c7O0VBQ3RDLE9BQU9OLEdBQVA7QUFDRCxDQVBEOztBQVNBLE1BQU1PLE1BQU0sR0FBRyxPQUFPSCxFQUFQLEVBQVdMLElBQVgsS0FBb0I7RUFDakMsTUFBTUMsR0FBRyxHQUFHLE1BQU1KLFdBQVcsQ0FBQ1ksaUJBQVosQ0FBOEJKLEVBQTlCLEVBQWtDTCxJQUFsQyxDQUFsQjtFQUNBLE9BQU9DLEdBQVA7QUFDRCxDQUhEOztBQUtBLE1BQU1TLGFBQWEsR0FBRyxNQUFPTCxFQUFQLElBQWM7RUFDbEMsTUFBTUosR0FBRyxHQUFHLE1BQU1KLFdBQVcsQ0FBQ2MsaUJBQVosQ0FBOEJOLEVBQTlCLENBQWxCO0VBQ0EsT0FBT0osR0FBUDtBQUNELENBSEQ7O0FBS0FXLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjtFQUNmZCxZQUFZLEVBQUVBLFlBREM7RUFFZkksV0FBVyxFQUFFQSxXQUZFO0VBR2ZLLE1BQU0sRUFBRUEsTUFITztFQUlmRSxhQUFhLEVBQUVBO0FBSkEsQ0FBakIifQ==","map":{"version":3,"names":["AuthorModel","require","createAuthor","data","res","create","queryAuthor","query","id","findById","find","update","findByIdAndUpdate","findAndDelete","findByIdAndRemove","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/service/","sources":["authorService.js"],"sourcesContent":["const AuthorModel = require('../model/Author');\n\nconst createAuthor = async (data) => {\n  const res = await AuthorModel.create(data); // AuthorModel.save(data); 也可以\n  return res;\n};\n\nconst queryAuthor = async (query) => {\n  if (query.id) {\n    const res = await AuthorModel.findById(query.id);\n    return res;\n  }\n  const res = await AuthorModel.find(); // 查所有\n  return res;\n};\n\nconst update = async (id, data) => {\n  const res = await AuthorModel.findByIdAndUpdate(id, data);\n  return res;\n};\n\nconst findAndDelete = async (id) => {\n  const res = await AuthorModel.findByIdAndRemove(id);\n  return res;\n};\n\nmodule.exports = {\n  createAuthor: createAuthor,\n  queryAuthor: queryAuthor,\n  update: update,\n  findAndDelete: findAndDelete,\n};\n"],"mappings":"AAAA,MAAMA,WAAW,GAAGC,OAAO,CAAC,iBAAD,CAA3B;;AAEA,MAAMC,YAAY,GAAG,MAAOC,IAAP,IAAgB;EACnC,MAAMC,GAAG,GAAG,MAAMJ,WAAW,CAACK,MAAZ,CAAmBF,IAAnB,CAAlB,CADmC,CACS;;EAC5C,OAAOC,GAAP;AACD,CAHD;;AAKA,MAAME,WAAW,GAAG,MAAOC,KAAP,IAAiB;EACnC,IAAIA,KAAK,CAACC,EAAV,EAAc;IACZ,MAAMJ,GAAG,GAAG,MAAMJ,WAAW,CAACS,QAAZ,CAAqBF,KAAK,CAACC,EAA3B,CAAlB;IACA,OAAOJ,GAAP;EACD;;EACD,MAAMA,GAAG,GAAG,MAAMJ,WAAW,CAACU,IAAZ,EAAlB,CALmC,CAKG;;EACtC,OAAON,GAAP;AACD,CAPD;;AASA,MAAMO,MAAM,GAAG,OAAOH,EAAP,EAAWL,IAAX,KAAoB;EACjC,MAAMC,GAAG,GAAG,MAAMJ,WAAW,CAACY,iBAAZ,CAA8BJ,EAA9B,EAAkCL,IAAlC,CAAlB;EACA,OAAOC,GAAP;AACD,CAHD;;AAKA,MAAMS,aAAa,GAAG,MAAOL,EAAP,IAAc;EAClC,MAAMJ,GAAG,GAAG,MAAMJ,WAAW,CAACc,iBAAZ,CAA8BN,EAA9B,CAAlB;EACA,OAAOJ,GAAP;AACD,CAHD;;AAKAW,MAAM,CAACC,OAAP,GAAiB;EACfd,YAAY,EAAEA,YADC;EAEfI,WAAW,EAAEA,WAFE;EAGfK,MAAM,EAAEA,MAHO;EAIfE,aAAa,EAAEA;AAJA,CAAjB"}},"mtime":1654092804580},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/model/Author.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const mongoose = require('mongoose');\n\nconst {\n  DateTime\n} = require('luxon'); //for date handling\n\n\nconst {\n  logger\n} = require('../utils/logger'); // 使用Schema\n\n\nconst Schema = mongoose.Schema; // 得到AuthSchema\n\nconst AuthorSchema = new Schema({\n  first_name: {\n    type: String,\n    required: true,\n    maxLength: 100\n  },\n  family_name: {\n    type: String,\n    required: true,\n    maxLength: 100\n  },\n  date_of_birth: {\n    type: Date\n  },\n  date_of_death: {\n    type: Date\n  }\n}); // 定义一些虚拟 key ，一般来说你用不到哈\n\nAuthorSchema.virtual('lifespan').get(function () {\n  var lifetime_string = '';\n\n  if (this.date_of_birth) {\n    lifetime_string = DateTime.fromJSDate(this.date_of_birth).toLocaleString(DateTime.DATE_MED);\n  }\n\n  lifetime_string += ' - ';\n\n  if (this.date_of_death) {\n    lifetime_string += DateTime.fromJSDate(this.date_of_death).toLocaleString(DateTime.DATE_MED);\n  }\n\n  return lifetime_string;\n});\nAuthorSchema.virtual('date_of_birth_yyyy_mm_dd').get(function () {\n  return DateTime.fromJSDate(this.date_of_birth).toISODate(); //format 'YYYY-MM-DD'\n});\nAuthorSchema.virtual('date_of_death_yyyy_mm_dd').get(function () {\n  return DateTime.fromJSDate(this.date_of_death).toISODate(); //format 'YYYY-MM-DD'\n}); // 前置钩子 在 scheme 实例上使用 pre 操作执行前， post 操作执行前后\n// 下面的这些操作执行，都会被监听\n\n/**\n init\n​ validate\n​ save\n​ remove\n​ count\n​ find\n​ findOne\n​ findOneAndRemove\n​ findOneAndUpdate\n​ insertMany\n​ update \n */\n\nAuthorSchema.pre('find', function (next) {\n  logger.info({\n    level: 'info',\n    message: 'find update'\n  });\n  next();\n}); // 如果你后续需要新增 字段\n\nAuthorSchema.add({\n  age: {\n    type: Number,\n    required: true,\n    default: 18,\n    min: 16,\n    max: 75 // 初次之外还更多的操做 请查阅官方文档\n\n  }\n}); // 得到 modal\n\nmodule.exports = mongoose.model('Author', AuthorSchema, 'authors');\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJEYXRlVGltZSIsImxvZ2dlciIsIlNjaGVtYSIsIkF1dGhvclNjaGVtYSIsImZpcnN0X25hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJtYXhMZW5ndGgiLCJmYW1pbHlfbmFtZSIsImRhdGVfb2ZfYmlydGgiLCJEYXRlIiwiZGF0ZV9vZl9kZWF0aCIsInZpcnR1YWwiLCJnZXQiLCJsaWZldGltZV9zdHJpbmciLCJmcm9tSlNEYXRlIiwidG9Mb2NhbGVTdHJpbmciLCJEQVRFX01FRCIsInRvSVNPRGF0ZSIsInByZSIsIm5leHQiLCJpbmZvIiwibGV2ZWwiLCJtZXNzYWdlIiwiYWRkIiwiYWdlIiwiTnVtYmVyIiwiZGVmYXVsdCIsIm1pbiIsIm1heCIsIm1vZHVsZSIsImV4cG9ydHMiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiL1ZvbHVtZXMvV0RfQkxBQ0svb3JpZ2luL3ByaXNtYS1leHByZXNzLXRlc3QvbW9kZWwvIiwic291cmNlcyI6WyJBdXRob3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuY29uc3QgeyBEYXRlVGltZSB9ID0gcmVxdWlyZSgnbHV4b24nKTsgLy9mb3IgZGF0ZSBoYW5kbGluZ1xuY29uc3QgeyBsb2dnZXIgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2xvZ2dlcicpO1xuLy8g5L2/55SoU2NoZW1hXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5cbi8vIOW+l+WIsEF1dGhTY2hlbWFcbmNvbnN0IEF1dGhvclNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBmaXJzdF9uYW1lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIG1heExlbmd0aDogMTAwLFxuICB9LFxuICBmYW1pbHlfbmFtZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICBtYXhMZW5ndGg6IDEwMCxcbiAgfSxcbiAgZGF0ZV9vZl9iaXJ0aDoge1xuICAgIHR5cGU6IERhdGUsXG4gIH0sXG4gIGRhdGVfb2ZfZGVhdGg6IHtcbiAgICB0eXBlOiBEYXRlLFxuICB9LFxufSk7XG5cbi8vIOWumuS5ieS4gOS6m+iZmuaLnyBrZXkg77yM5LiA6Iis5p2l6K+05L2g55So5LiN5Yiw5ZOIXG5BdXRob3JTY2hlbWEudmlydHVhbCgnbGlmZXNwYW4nKS5nZXQoZnVuY3Rpb24gKCkge1xuICB2YXIgbGlmZXRpbWVfc3RyaW5nID0gJyc7XG4gIGlmICh0aGlzLmRhdGVfb2ZfYmlydGgpIHtcbiAgICBsaWZldGltZV9zdHJpbmcgPSBEYXRlVGltZS5mcm9tSlNEYXRlKHRoaXMuZGF0ZV9vZl9iaXJ0aCkudG9Mb2NhbGVTdHJpbmcoXG4gICAgICBEYXRlVGltZS5EQVRFX01FRCxcbiAgICApO1xuICB9XG4gIGxpZmV0aW1lX3N0cmluZyArPSAnIC0gJztcbiAgaWYgKHRoaXMuZGF0ZV9vZl9kZWF0aCkge1xuICAgIGxpZmV0aW1lX3N0cmluZyArPSBEYXRlVGltZS5mcm9tSlNEYXRlKHRoaXMuZGF0ZV9vZl9kZWF0aCkudG9Mb2NhbGVTdHJpbmcoXG4gICAgICBEYXRlVGltZS5EQVRFX01FRCxcbiAgICApO1xuICB9XG4gIHJldHVybiBsaWZldGltZV9zdHJpbmc7XG59KTtcblxuQXV0aG9yU2NoZW1hLnZpcnR1YWwoJ2RhdGVfb2ZfYmlydGhfeXl5eV9tbV9kZCcpLmdldChmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBEYXRlVGltZS5mcm9tSlNEYXRlKHRoaXMuZGF0ZV9vZl9iaXJ0aCkudG9JU09EYXRlKCk7IC8vZm9ybWF0ICdZWVlZLU1NLUREJ1xufSk7XG5cbkF1dGhvclNjaGVtYS52aXJ0dWFsKCdkYXRlX29mX2RlYXRoX3l5eXlfbW1fZGQnKS5nZXQoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gRGF0ZVRpbWUuZnJvbUpTRGF0ZSh0aGlzLmRhdGVfb2ZfZGVhdGgpLnRvSVNPRGF0ZSgpOyAvL2Zvcm1hdCAnWVlZWS1NTS1ERCdcbn0pO1xuXG4vLyDliY3nva7pkqnlrZAg5ZyoIHNjaGVtZSDlrp7kvovkuIrkvb/nlKggcHJlIOaTjeS9nOaJp+ihjOWJje+8jCBwb3N0IOaTjeS9nOaJp+ihjOWJjeWQjlxuLy8g5LiL6Z2i55qE6L+Z5Lqb5pON5L2c5omn6KGM77yM6YO95Lya6KKr55uR5ZCsXG4vKipcbiBpbml0XG7igIsgdmFsaWRhdGVcbuKAiyBzYXZlXG7igIsgcmVtb3ZlXG7igIsgY291bnRcbuKAiyBmaW5kXG7igIsgZmluZE9uZVxu4oCLIGZpbmRPbmVBbmRSZW1vdmVcbuKAiyBmaW5kT25lQW5kVXBkYXRlXG7igIsgaW5zZXJ0TWFueVxu4oCLIHVwZGF0ZSBcbiAqL1xuQXV0aG9yU2NoZW1hLnByZSgnZmluZCcsIGZ1bmN0aW9uIChuZXh0KSB7XG4gIGxvZ2dlci5pbmZvKHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIG1lc3NhZ2U6ICdmaW5kIHVwZGF0ZScsXG4gIH0pO1xuICBuZXh0KCk7XG59KTtcbi8vIOWmguaenOS9oOWQjue7remcgOimgeaWsOWiniDlrZfmrrVcbkF1dGhvclNjaGVtYS5hZGQoe1xuICBhZ2U6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgZGVmYXVsdDogMTgsXG4gICAgbWluOiAxNixcbiAgICBtYXg6IDc1LFxuICAgIC8vIOWIneasoeS5i+Wklui/mOabtOWkmueahOaTjeWBmiDor7fmn6XpmIXlrpjmlrnmlofmoaNcbiAgfSxcbn0pO1xuXG4vLyDlvpfliLAgbW9kYWxcbm1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoJ0F1dGhvcicsIEF1dGhvclNjaGVtYSwgJ2F1dGhvcnMnKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUF4Qjs7QUFDQSxNQUFNO0VBQUVDO0FBQUYsSUFBZUQsT0FBTyxDQUFDLE9BQUQsQ0FBNUIsQyxDQUF1Qzs7O0FBQ3ZDLE1BQU07RUFBRUU7QUFBRixJQUFhRixPQUFPLENBQUMsaUJBQUQsQ0FBMUIsQyxDQUNBOzs7QUFDQSxNQUFNRyxNQUFNLEdBQUdKLFFBQVEsQ0FBQ0ksTUFBeEIsQyxDQUVBOztBQUNBLE1BQU1DLFlBQVksR0FBRyxJQUFJRCxNQUFKLENBQVc7RUFDOUJFLFVBQVUsRUFBRTtJQUNWQyxJQUFJLEVBQUVDLE1BREk7SUFFVkMsUUFBUSxFQUFFLElBRkE7SUFHVkMsU0FBUyxFQUFFO0VBSEQsQ0FEa0I7RUFNOUJDLFdBQVcsRUFBRTtJQUNYSixJQUFJLEVBQUVDLE1BREs7SUFFWEMsUUFBUSxFQUFFLElBRkM7SUFHWEMsU0FBUyxFQUFFO0VBSEEsQ0FOaUI7RUFXOUJFLGFBQWEsRUFBRTtJQUNiTCxJQUFJLEVBQUVNO0VBRE8sQ0FYZTtFQWM5QkMsYUFBYSxFQUFFO0lBQ2JQLElBQUksRUFBRU07RUFETztBQWRlLENBQVgsQ0FBckIsQyxDQW1CQTs7QUFDQVIsWUFBWSxDQUFDVSxPQUFiLENBQXFCLFVBQXJCLEVBQWlDQyxHQUFqQyxDQUFxQyxZQUFZO0VBQy9DLElBQUlDLGVBQWUsR0FBRyxFQUF0Qjs7RUFDQSxJQUFJLEtBQUtMLGFBQVQsRUFBd0I7SUFDdEJLLGVBQWUsR0FBR2YsUUFBUSxDQUFDZ0IsVUFBVCxDQUFvQixLQUFLTixhQUF6QixFQUF3Q08sY0FBeEMsQ0FDaEJqQixRQUFRLENBQUNrQixRQURPLENBQWxCO0VBR0Q7O0VBQ0RILGVBQWUsSUFBSSxLQUFuQjs7RUFDQSxJQUFJLEtBQUtILGFBQVQsRUFBd0I7SUFDdEJHLGVBQWUsSUFBSWYsUUFBUSxDQUFDZ0IsVUFBVCxDQUFvQixLQUFLSixhQUF6QixFQUF3Q0ssY0FBeEMsQ0FDakJqQixRQUFRLENBQUNrQixRQURRLENBQW5CO0VBR0Q7O0VBQ0QsT0FBT0gsZUFBUDtBQUNELENBZEQ7QUFnQkFaLFlBQVksQ0FBQ1UsT0FBYixDQUFxQiwwQkFBckIsRUFBaURDLEdBQWpELENBQXFELFlBQVk7RUFDL0QsT0FBT2QsUUFBUSxDQUFDZ0IsVUFBVCxDQUFvQixLQUFLTixhQUF6QixFQUF3Q1MsU0FBeEMsRUFBUCxDQUQrRCxDQUNIO0FBQzdELENBRkQ7QUFJQWhCLFlBQVksQ0FBQ1UsT0FBYixDQUFxQiwwQkFBckIsRUFBaURDLEdBQWpELENBQXFELFlBQVk7RUFDL0QsT0FBT2QsUUFBUSxDQUFDZ0IsVUFBVCxDQUFvQixLQUFLSixhQUF6QixFQUF3Q08sU0FBeEMsRUFBUCxDQUQrRCxDQUNIO0FBQzdELENBRkQsRSxDQUlBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0FoQixZQUFZLENBQUNpQixHQUFiLENBQWlCLE1BQWpCLEVBQXlCLFVBQVVDLElBQVYsRUFBZ0I7RUFDdkNwQixNQUFNLENBQUNxQixJQUFQLENBQVk7SUFDVkMsS0FBSyxFQUFFLE1BREc7SUFFVkMsT0FBTyxFQUFFO0VBRkMsQ0FBWjtFQUlBSCxJQUFJO0FBQ0wsQ0FORCxFLENBT0E7O0FBQ0FsQixZQUFZLENBQUNzQixHQUFiLENBQWlCO0VBQ2ZDLEdBQUcsRUFBRTtJQUNIckIsSUFBSSxFQUFFc0IsTUFESDtJQUVIcEIsUUFBUSxFQUFFLElBRlA7SUFHSHFCLE9BQU8sRUFBRSxFQUhOO0lBSUhDLEdBQUcsRUFBRSxFQUpGO0lBS0hDLEdBQUcsRUFBRSxFQUxGLENBTUg7O0VBTkc7QUFEVSxDQUFqQixFLENBV0E7O0FBQ0FDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmxDLFFBQVEsQ0FBQ21DLEtBQVQsQ0FBZSxRQUFmLEVBQXlCOUIsWUFBekIsRUFBdUMsU0FBdkMsQ0FBakIifQ==","map":{"version":3,"names":["mongoose","require","DateTime","logger","Schema","AuthorSchema","first_name","type","String","required","maxLength","family_name","date_of_birth","Date","date_of_death","virtual","get","lifetime_string","fromJSDate","toLocaleString","DATE_MED","toISODate","pre","next","info","level","message","add","age","Number","default","min","max","module","exports","model"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/model/","sources":["Author.js"],"sourcesContent":["const mongoose = require('mongoose');\nconst { DateTime } = require('luxon'); //for date handling\nconst { logger } = require('../utils/logger');\n// 使用Schema\nconst Schema = mongoose.Schema;\n\n// 得到AuthSchema\nconst AuthorSchema = new Schema({\n  first_name: {\n    type: String,\n    required: true,\n    maxLength: 100,\n  },\n  family_name: {\n    type: String,\n    required: true,\n    maxLength: 100,\n  },\n  date_of_birth: {\n    type: Date,\n  },\n  date_of_death: {\n    type: Date,\n  },\n});\n\n// 定义一些虚拟 key ，一般来说你用不到哈\nAuthorSchema.virtual('lifespan').get(function () {\n  var lifetime_string = '';\n  if (this.date_of_birth) {\n    lifetime_string = DateTime.fromJSDate(this.date_of_birth).toLocaleString(\n      DateTime.DATE_MED,\n    );\n  }\n  lifetime_string += ' - ';\n  if (this.date_of_death) {\n    lifetime_string += DateTime.fromJSDate(this.date_of_death).toLocaleString(\n      DateTime.DATE_MED,\n    );\n  }\n  return lifetime_string;\n});\n\nAuthorSchema.virtual('date_of_birth_yyyy_mm_dd').get(function () {\n  return DateTime.fromJSDate(this.date_of_birth).toISODate(); //format 'YYYY-MM-DD'\n});\n\nAuthorSchema.virtual('date_of_death_yyyy_mm_dd').get(function () {\n  return DateTime.fromJSDate(this.date_of_death).toISODate(); //format 'YYYY-MM-DD'\n});\n\n// 前置钩子 在 scheme 实例上使用 pre 操作执行前， post 操作执行前后\n// 下面的这些操作执行，都会被监听\n/**\n init\n​ validate\n​ save\n​ remove\n​ count\n​ find\n​ findOne\n​ findOneAndRemove\n​ findOneAndUpdate\n​ insertMany\n​ update \n */\nAuthorSchema.pre('find', function (next) {\n  logger.info({\n    level: 'info',\n    message: 'find update',\n  });\n  next();\n});\n// 如果你后续需要新增 字段\nAuthorSchema.add({\n  age: {\n    type: Number,\n    required: true,\n    default: 18,\n    min: 16,\n    max: 75,\n    // 初次之外还更多的操做 请查阅官方文档\n  },\n});\n\n// 得到 modal\nmodule.exports = mongoose.model('Author', AuthorSchema, 'authors');\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAM;EAAEC;AAAF,IAAeD,OAAO,CAAC,OAAD,CAA5B,C,CAAuC;;;AACvC,MAAM;EAAEE;AAAF,IAAaF,OAAO,CAAC,iBAAD,CAA1B,C,CACA;;;AACA,MAAMG,MAAM,GAAGJ,QAAQ,CAACI,MAAxB,C,CAEA;;AACA,MAAMC,YAAY,GAAG,IAAID,MAAJ,CAAW;EAC9BE,UAAU,EAAE;IACVC,IAAI,EAAEC,MADI;IAEVC,QAAQ,EAAE,IAFA;IAGVC,SAAS,EAAE;EAHD,CADkB;EAM9BC,WAAW,EAAE;IACXJ,IAAI,EAAEC,MADK;IAEXC,QAAQ,EAAE,IAFC;IAGXC,SAAS,EAAE;EAHA,CANiB;EAW9BE,aAAa,EAAE;IACbL,IAAI,EAAEM;EADO,CAXe;EAc9BC,aAAa,EAAE;IACbP,IAAI,EAAEM;EADO;AAde,CAAX,CAArB,C,CAmBA;;AACAR,YAAY,CAACU,OAAb,CAAqB,UAArB,EAAiCC,GAAjC,CAAqC,YAAY;EAC/C,IAAIC,eAAe,GAAG,EAAtB;;EACA,IAAI,KAAKL,aAAT,EAAwB;IACtBK,eAAe,GAAGf,QAAQ,CAACgB,UAAT,CAAoB,KAAKN,aAAzB,EAAwCO,cAAxC,CAChBjB,QAAQ,CAACkB,QADO,CAAlB;EAGD;;EACDH,eAAe,IAAI,KAAnB;;EACA,IAAI,KAAKH,aAAT,EAAwB;IACtBG,eAAe,IAAIf,QAAQ,CAACgB,UAAT,CAAoB,KAAKJ,aAAzB,EAAwCK,cAAxC,CACjBjB,QAAQ,CAACkB,QADQ,CAAnB;EAGD;;EACD,OAAOH,eAAP;AACD,CAdD;AAgBAZ,YAAY,CAACU,OAAb,CAAqB,0BAArB,EAAiDC,GAAjD,CAAqD,YAAY;EAC/D,OAAOd,QAAQ,CAACgB,UAAT,CAAoB,KAAKN,aAAzB,EAAwCS,SAAxC,EAAP,CAD+D,CACH;AAC7D,CAFD;AAIAhB,YAAY,CAACU,OAAb,CAAqB,0BAArB,EAAiDC,GAAjD,CAAqD,YAAY;EAC/D,OAAOd,QAAQ,CAACgB,UAAT,CAAoB,KAAKJ,aAAzB,EAAwCO,SAAxC,EAAP,CAD+D,CACH;AAC7D,CAFD,E,CAIA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAhB,YAAY,CAACiB,GAAb,CAAiB,MAAjB,EAAyB,UAAUC,IAAV,EAAgB;EACvCpB,MAAM,CAACqB,IAAP,CAAY;IACVC,KAAK,EAAE,MADG;IAEVC,OAAO,EAAE;EAFC,CAAZ;EAIAH,IAAI;AACL,CAND,E,CAOA;;AACAlB,YAAY,CAACsB,GAAb,CAAiB;EACfC,GAAG,EAAE;IACHrB,IAAI,EAAEsB,MADH;IAEHpB,QAAQ,EAAE,IAFP;IAGHqB,OAAO,EAAE,EAHN;IAIHC,GAAG,EAAE,EAJF;IAKHC,GAAG,EAAE,EALF,CAMH;;EANG;AADU,CAAjB,E,CAWA;;AACAC,MAAM,CAACC,OAAP,GAAiBlC,QAAQ,CAACmC,KAAT,CAAe,QAAf,EAAyB9B,YAAzB,EAAuC,SAAvC,CAAjB"}},"mtime":1653750407770},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/graphql/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/graphql/schema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"// 我们先做 比较独立的模块 对 author 的 Query\nconst typeDefs =\n/* GraphQL */\n`\n  type Mutation {\n    createAuthor(first_name: String, family_name: String, age: Int): Author!\n    updateAuthor(\n      id: ID!\n      first_name: String\n      family_name: String\n      age: Int\n    ): Author!\n    deleteAuthorByID(id: ID!): Author!\n  }\n\n  type Query {\n    author(id: String): Author\n    authors: [Author]!\n    books: [Book]\n  }\n\n  type Subscription {\n    subsAuthor(id: ID!): Author\n  }\n\n  type Author {\n    id: ID!\n    first_name: String\n    family_name: String\n    date_of_birth: String\n    date_of_death: String\n    age: Int\n  }\n\n  type Book {\n    id: ID!\n    title: String\n    author: Author\n    summary: String\n    isbn: String\n  }\n`;\nmodule.exports = {\n  typeDefs: typeDefs\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0eXBlRGVmcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Wb2x1bWVzL1dEX0JMQUNLL29yaWdpbi9wcmlzbWEtZXhwcmVzcy10ZXN0L2dyYXBocWwvIiwic291cmNlcyI6WyJzY2hlbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8g5oiR5Lus5YWI5YGaIOavlOi+g+eLrOeri+eahOaooeWdlyDlr7kgYXV0aG9yIOeahCBRdWVyeVxuXG5jb25zdCB0eXBlRGVmcyA9IC8qIEdyYXBoUUwgKi8gYFxuICB0eXBlIE11dGF0aW9uIHtcbiAgICBjcmVhdGVBdXRob3IoZmlyc3RfbmFtZTogU3RyaW5nLCBmYW1pbHlfbmFtZTogU3RyaW5nLCBhZ2U6IEludCk6IEF1dGhvciFcbiAgICB1cGRhdGVBdXRob3IoXG4gICAgICBpZDogSUQhXG4gICAgICBmaXJzdF9uYW1lOiBTdHJpbmdcbiAgICAgIGZhbWlseV9uYW1lOiBTdHJpbmdcbiAgICAgIGFnZTogSW50XG4gICAgKTogQXV0aG9yIVxuICAgIGRlbGV0ZUF1dGhvckJ5SUQoaWQ6IElEISk6IEF1dGhvciFcbiAgfVxuXG4gIHR5cGUgUXVlcnkge1xuICAgIGF1dGhvcihpZDogU3RyaW5nKTogQXV0aG9yXG4gICAgYXV0aG9yczogW0F1dGhvcl0hXG4gICAgYm9va3M6IFtCb29rXVxuICB9XG5cbiAgdHlwZSBTdWJzY3JpcHRpb24ge1xuICAgIHN1YnNBdXRob3IoaWQ6IElEISk6IEF1dGhvclxuICB9XG5cbiAgdHlwZSBBdXRob3Ige1xuICAgIGlkOiBJRCFcbiAgICBmaXJzdF9uYW1lOiBTdHJpbmdcbiAgICBmYW1pbHlfbmFtZTogU3RyaW5nXG4gICAgZGF0ZV9vZl9iaXJ0aDogU3RyaW5nXG4gICAgZGF0ZV9vZl9kZWF0aDogU3RyaW5nXG4gICAgYWdlOiBJbnRcbiAgfVxuXG4gIHR5cGUgQm9vayB7XG4gICAgaWQ6IElEIVxuICAgIHRpdGxlOiBTdHJpbmdcbiAgICBhdXRob3I6IEF1dGhvclxuICAgIHN1bW1hcnk6IFN0cmluZ1xuICAgIGlzYm46IFN0cmluZ1xuICB9XG5gO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgdHlwZURlZnM6IHR5cGVEZWZzLFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFFQSxNQUFNQSxRQUFRO0FBQUc7QUFBZTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBdENBO0FBd0NBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUI7RUFDZkYsUUFBUSxFQUFFQTtBQURLLENBQWpCIn0=","map":{"version":3,"names":["typeDefs","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/graphql/","sources":["schema.js"],"sourcesContent":["// 我们先做 比较独立的模块 对 author 的 Query\n\nconst typeDefs = /* GraphQL */ `\n  type Mutation {\n    createAuthor(first_name: String, family_name: String, age: Int): Author!\n    updateAuthor(\n      id: ID!\n      first_name: String\n      family_name: String\n      age: Int\n    ): Author!\n    deleteAuthorByID(id: ID!): Author!\n  }\n\n  type Query {\n    author(id: String): Author\n    authors: [Author]!\n    books: [Book]\n  }\n\n  type Subscription {\n    subsAuthor(id: ID!): Author\n  }\n\n  type Author {\n    id: ID!\n    first_name: String\n    family_name: String\n    date_of_birth: String\n    date_of_death: String\n    age: Int\n  }\n\n  type Book {\n    id: ID!\n    title: String\n    author: Author\n    summary: String\n    isbn: String\n  }\n`;\n\nmodule.exports = {\n  typeDefs: typeDefs,\n};\n"],"mappings":"AAAA;AAEA,MAAMA,QAAQ;AAAG;AAAe;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAtCA;AAwCAC,MAAM,CAACC,OAAP,GAAiB;EACfF,QAAQ,EAAEA;AADK,CAAjB"}},"mtime":1654099044910},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/middleware/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/middleware/reqInfo.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const {\n  logger\n} = require('../utils/logger');\n\nmodule.exports = {\n  reqInfo: (req, res, next) => {\n    logger.info({\n      level: 'info',\n      message: {\n        reqData: Date.now(),\n        requestType: req.method,\n        originURL: req.originalUrl\n      }\n    });\n    next();\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2dnZXIiLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcUluZm8iLCJyZXEiLCJyZXMiLCJuZXh0IiwiaW5mbyIsImxldmVsIiwibWVzc2FnZSIsInJlcURhdGEiLCJEYXRlIiwibm93IiwicmVxdWVzdFR5cGUiLCJtZXRob2QiLCJvcmlnaW5VUkwiLCJvcmlnaW5hbFVybCJdLCJzb3VyY2VSb290IjoiL1ZvbHVtZXMvV0RfQkxBQ0svb3JpZ2luL3ByaXNtYS1leHByZXNzLXRlc3QvbWlkZGxld2FyZS8iLCJzb3VyY2VzIjpbInJlcUluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBsb2dnZXIgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2xvZ2dlcicpO1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHJlcUluZm86IChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGxvZ2dlci5pbmZvKHtcbiAgICAgIGxldmVsOiAnaW5mbycsXG4gICAgICBtZXNzYWdlOiB7XG4gICAgICAgIHJlcURhdGE6IERhdGUubm93KCksXG4gICAgICAgIHJlcXVlc3RUeXBlOiByZXEubWV0aG9kLFxuICAgICAgICBvcmlnaW5VUkw6IHJlcS5vcmlnaW5hbFVybCxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgbmV4dCgpO1xuICB9LFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQTtBQUFGLElBQWFDLE9BQU8sQ0FBQyxpQkFBRCxDQUExQjs7QUFDQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0VBQ2ZDLE9BQU8sRUFBRSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBV0MsSUFBWCxLQUFvQjtJQUMzQlAsTUFBTSxDQUFDUSxJQUFQLENBQVk7TUFDVkMsS0FBSyxFQUFFLE1BREc7TUFFVkMsT0FBTyxFQUFFO1FBQ1BDLE9BQU8sRUFBRUMsSUFBSSxDQUFDQyxHQUFMLEVBREY7UUFFUEMsV0FBVyxFQUFFVCxHQUFHLENBQUNVLE1BRlY7UUFHUEMsU0FBUyxFQUFFWCxHQUFHLENBQUNZO01BSFI7SUFGQyxDQUFaO0lBUUFWLElBQUk7RUFDTDtBQVhjLENBQWpCIn0=","map":{"version":3,"names":["logger","require","module","exports","reqInfo","req","res","next","info","level","message","reqData","Date","now","requestType","method","originURL","originalUrl"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/middleware/","sources":["reqInfo.js"],"sourcesContent":["const { logger } = require('../utils/logger');\nmodule.exports = {\n  reqInfo: (req, res, next) => {\n    logger.info({\n      level: 'info',\n      message: {\n        reqData: Date.now(),\n        requestType: req.method,\n        originURL: req.originalUrl,\n      },\n    });\n    next();\n  },\n};\n"],"mappings":"AAAA,MAAM;EAAEA;AAAF,IAAaC,OAAO,CAAC,iBAAD,CAA1B;;AACAC,MAAM,CAACC,OAAP,GAAiB;EACfC,OAAO,EAAE,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;IAC3BP,MAAM,CAACQ,IAAP,CAAY;MACVC,KAAK,EAAE,MADG;MAEVC,OAAO,EAAE;QACPC,OAAO,EAAEC,IAAI,CAACC,GAAL,EADF;QAEPC,WAAW,EAAET,GAAG,CAACU,MAFV;QAGPC,SAAS,EAAEX,GAAG,CAACY;MAHR;IAFC,CAAZ;IAQAV,IAAI;EACL;AAXc,CAAjB"}},"mtime":1653915794400},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/routes/author.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const express = require('express');\n\nconst AuthorController = require('../controllers/authorController');\n\nconst author = express.Router();\n\nconst {\n  wrap\n} = require('../utils/'); // CRUD\n\n\nauthor.post('/', wrap(AuthorController.create));\nauthor.get('/', wrap(AuthorController.query));\nauthor.put('/', wrap(AuthorController.update));\nauthor.delete('/', wrap(AuthorController.deleteAuthor));\nmodule.exports = author;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIkF1dGhvckNvbnRyb2xsZXIiLCJhdXRob3IiLCJSb3V0ZXIiLCJ3cmFwIiwicG9zdCIsImNyZWF0ZSIsImdldCIsInF1ZXJ5IiwicHV0IiwidXBkYXRlIiwiZGVsZXRlIiwiZGVsZXRlQXV0aG9yIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1ZvbHVtZXMvV0RfQkxBQ0svb3JpZ2luL3ByaXNtYS1leHByZXNzLXRlc3Qvcm91dGVzLyIsInNvdXJjZXMiOlsiYXV0aG9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBBdXRob3JDb250cm9sbGVyID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvYXV0aG9yQ29udHJvbGxlcicpO1xuY29uc3QgYXV0aG9yID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbmNvbnN0IHsgd3JhcCB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvJyk7XG5cbi8vIENSVURcbmF1dGhvci5wb3N0KCcvJywgd3JhcChBdXRob3JDb250cm9sbGVyLmNyZWF0ZSkpO1xuYXV0aG9yLmdldCgnLycsIHdyYXAoQXV0aG9yQ29udHJvbGxlci5xdWVyeSkpO1xuYXV0aG9yLnB1dCgnLycsIHdyYXAoQXV0aG9yQ29udHJvbGxlci51cGRhdGUpKTtcbmF1dGhvci5kZWxldGUoJy8nLCB3cmFwKEF1dGhvckNvbnRyb2xsZXIuZGVsZXRlQXV0aG9yKSk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXV0aG9yO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQXZCOztBQUNBLE1BQU1DLGdCQUFnQixHQUFHRCxPQUFPLENBQUMsaUNBQUQsQ0FBaEM7O0FBQ0EsTUFBTUUsTUFBTSxHQUFHSCxPQUFPLENBQUNJLE1BQVIsRUFBZjs7QUFDQSxNQUFNO0VBQUVDO0FBQUYsSUFBV0osT0FBTyxDQUFDLFdBQUQsQ0FBeEIsQyxDQUVBOzs7QUFDQUUsTUFBTSxDQUFDRyxJQUFQLENBQVksR0FBWixFQUFpQkQsSUFBSSxDQUFDSCxnQkFBZ0IsQ0FBQ0ssTUFBbEIsQ0FBckI7QUFDQUosTUFBTSxDQUFDSyxHQUFQLENBQVcsR0FBWCxFQUFnQkgsSUFBSSxDQUFDSCxnQkFBZ0IsQ0FBQ08sS0FBbEIsQ0FBcEI7QUFDQU4sTUFBTSxDQUFDTyxHQUFQLENBQVcsR0FBWCxFQUFnQkwsSUFBSSxDQUFDSCxnQkFBZ0IsQ0FBQ1MsTUFBbEIsQ0FBcEI7QUFDQVIsTUFBTSxDQUFDUyxNQUFQLENBQWMsR0FBZCxFQUFtQlAsSUFBSSxDQUFDSCxnQkFBZ0IsQ0FBQ1csWUFBbEIsQ0FBdkI7QUFFQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCWixNQUFqQiJ9","map":{"version":3,"names":["express","require","AuthorController","author","Router","wrap","post","create","get","query","put","update","delete","deleteAuthor","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/routes/","sources":["author.js"],"sourcesContent":["const express = require('express');\nconst AuthorController = require('../controllers/authorController');\nconst author = express.Router();\nconst { wrap } = require('../utils/');\n\n// CRUD\nauthor.post('/', wrap(AuthorController.create));\nauthor.get('/', wrap(AuthorController.query));\nauthor.put('/', wrap(AuthorController.update));\nauthor.delete('/', wrap(AuthorController.deleteAuthor));\n\nmodule.exports = author;\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,gBAAgB,GAAGD,OAAO,CAAC,iCAAD,CAAhC;;AACA,MAAME,MAAM,GAAGH,OAAO,CAACI,MAAR,EAAf;;AACA,MAAM;EAAEC;AAAF,IAAWJ,OAAO,CAAC,WAAD,CAAxB,C,CAEA;;;AACAE,MAAM,CAACG,IAAP,CAAY,GAAZ,EAAiBD,IAAI,CAACH,gBAAgB,CAACK,MAAlB,CAArB;AACAJ,MAAM,CAACK,GAAP,CAAW,GAAX,EAAgBH,IAAI,CAACH,gBAAgB,CAACO,KAAlB,CAApB;AACAN,MAAM,CAACO,GAAP,CAAW,GAAX,EAAgBL,IAAI,CAACH,gBAAgB,CAACS,MAAlB,CAApB;AACAR,MAAM,CAACS,MAAP,CAAc,GAAd,EAAmBP,IAAI,CAACH,gBAAgB,CAACW,YAAlB,CAAvB;AAEAC,MAAM,CAACC,OAAP,GAAiBZ,MAAjB"}},"mtime":1653749972400},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/controllers/authorController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const authorService = require('../service/authorService');\n\nconst create = async (req, res, next) => {\n  const value = await authorService.createAuthor(req.body);\n  res.json(value);\n};\n\nconst query = async (req, res, next) => {\n  const value = await authorService.queryAuthor(req.query);\n  res.json(value);\n};\n\nconst update = async (req, res, next) => {\n  const value = await authorService.update(req.query.id, req.body);\n  res.json(value);\n};\n\nconst deleteAuthor = async (req, res, next) => {\n  const value = await authorService.findAndDelete(req.query.id);\n  res.json(value);\n};\n\nmodule.exports = {\n  create: create,\n  query: query,\n  update: update,\n  deleteAuthor: deleteAuthor\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRob3JTZXJ2aWNlIiwicmVxdWlyZSIsImNyZWF0ZSIsInJlcSIsInJlcyIsIm5leHQiLCJ2YWx1ZSIsImNyZWF0ZUF1dGhvciIsImJvZHkiLCJqc29uIiwicXVlcnkiLCJxdWVyeUF1dGhvciIsInVwZGF0ZSIsImlkIiwiZGVsZXRlQXV0aG9yIiwiZmluZEFuZERlbGV0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Wb2x1bWVzL1dEX0JMQUNLL29yaWdpbi9wcmlzbWEtZXhwcmVzcy10ZXN0L2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiYXV0aG9yQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBhdXRob3JTZXJ2aWNlID0gcmVxdWlyZSgnLi4vc2VydmljZS9hdXRob3JTZXJ2aWNlJyk7XG5cbmNvbnN0IGNyZWF0ZSA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCB2YWx1ZSA9IGF3YWl0IGF1dGhvclNlcnZpY2UuY3JlYXRlQXV0aG9yKHJlcS5ib2R5KTtcbiAgcmVzLmpzb24odmFsdWUpO1xufTtcblxuY29uc3QgcXVlcnkgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdmFsdWUgPSBhd2FpdCBhdXRob3JTZXJ2aWNlLnF1ZXJ5QXV0aG9yKHJlcS5xdWVyeSk7XG4gIHJlcy5qc29uKHZhbHVlKTtcbn07XG5cbmNvbnN0IHVwZGF0ZSA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCB2YWx1ZSA9IGF3YWl0IGF1dGhvclNlcnZpY2UudXBkYXRlKHJlcS5xdWVyeS5pZCwgcmVxLmJvZHkpO1xuICByZXMuanNvbih2YWx1ZSk7XG59O1xuXG5jb25zdCBkZWxldGVBdXRob3IgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdmFsdWUgPSBhd2FpdCBhdXRob3JTZXJ2aWNlLmZpbmRBbmREZWxldGUocmVxLnF1ZXJ5LmlkKTtcbiAgcmVzLmpzb24odmFsdWUpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZTogY3JlYXRlLFxuICBxdWVyeTogcXVlcnksXG4gIHVwZGF0ZTogdXBkYXRlLFxuICBkZWxldGVBdXRob3I6IGRlbGV0ZUF1dGhvcixcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLGFBQWEsR0FBR0MsT0FBTyxDQUFDLDBCQUFELENBQTdCOztBQUVBLE1BQU1DLE1BQU0sR0FBRyxPQUFPQyxHQUFQLEVBQVlDLEdBQVosRUFBaUJDLElBQWpCLEtBQTBCO0VBQ3ZDLE1BQU1DLEtBQUssR0FBRyxNQUFNTixhQUFhLENBQUNPLFlBQWQsQ0FBMkJKLEdBQUcsQ0FBQ0ssSUFBL0IsQ0FBcEI7RUFDQUosR0FBRyxDQUFDSyxJQUFKLENBQVNILEtBQVQ7QUFDRCxDQUhEOztBQUtBLE1BQU1JLEtBQUssR0FBRyxPQUFPUCxHQUFQLEVBQVlDLEdBQVosRUFBaUJDLElBQWpCLEtBQTBCO0VBQ3RDLE1BQU1DLEtBQUssR0FBRyxNQUFNTixhQUFhLENBQUNXLFdBQWQsQ0FBMEJSLEdBQUcsQ0FBQ08sS0FBOUIsQ0FBcEI7RUFDQU4sR0FBRyxDQUFDSyxJQUFKLENBQVNILEtBQVQ7QUFDRCxDQUhEOztBQUtBLE1BQU1NLE1BQU0sR0FBRyxPQUFPVCxHQUFQLEVBQVlDLEdBQVosRUFBaUJDLElBQWpCLEtBQTBCO0VBQ3ZDLE1BQU1DLEtBQUssR0FBRyxNQUFNTixhQUFhLENBQUNZLE1BQWQsQ0FBcUJULEdBQUcsQ0FBQ08sS0FBSixDQUFVRyxFQUEvQixFQUFtQ1YsR0FBRyxDQUFDSyxJQUF2QyxDQUFwQjtFQUNBSixHQUFHLENBQUNLLElBQUosQ0FBU0gsS0FBVDtBQUNELENBSEQ7O0FBS0EsTUFBTVEsWUFBWSxHQUFHLE9BQU9YLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDN0MsTUFBTUMsS0FBSyxHQUFHLE1BQU1OLGFBQWEsQ0FBQ2UsYUFBZCxDQUE0QlosR0FBRyxDQUFDTyxLQUFKLENBQVVHLEVBQXRDLENBQXBCO0VBQ0FULEdBQUcsQ0FBQ0ssSUFBSixDQUFTSCxLQUFUO0FBQ0QsQ0FIRDs7QUFLQVUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0VBQ2ZmLE1BQU0sRUFBRUEsTUFETztFQUVmUSxLQUFLLEVBQUVBLEtBRlE7RUFHZkUsTUFBTSxFQUFFQSxNQUhPO0VBSWZFLFlBQVksRUFBRUE7QUFKQyxDQUFqQiJ9","map":{"version":3,"names":["authorService","require","create","req","res","next","value","createAuthor","body","json","query","queryAuthor","update","id","deleteAuthor","findAndDelete","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/controllers/","sources":["authorController.js"],"sourcesContent":["const authorService = require('../service/authorService');\n\nconst create = async (req, res, next) => {\n  const value = await authorService.createAuthor(req.body);\n  res.json(value);\n};\n\nconst query = async (req, res, next) => {\n  const value = await authorService.queryAuthor(req.query);\n  res.json(value);\n};\n\nconst update = async (req, res, next) => {\n  const value = await authorService.update(req.query.id, req.body);\n  res.json(value);\n};\n\nconst deleteAuthor = async (req, res, next) => {\n  const value = await authorService.findAndDelete(req.query.id);\n  res.json(value);\n};\n\nmodule.exports = {\n  create: create,\n  query: query,\n  update: update,\n  deleteAuthor: deleteAuthor,\n};\n"],"mappings":"AAAA,MAAMA,aAAa,GAAGC,OAAO,CAAC,0BAAD,CAA7B;;AAEA,MAAMC,MAAM,GAAG,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACvC,MAAMC,KAAK,GAAG,MAAMN,aAAa,CAACO,YAAd,CAA2BJ,GAAG,CAACK,IAA/B,CAApB;EACAJ,GAAG,CAACK,IAAJ,CAASH,KAAT;AACD,CAHD;;AAKA,MAAMI,KAAK,GAAG,OAAOP,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACtC,MAAMC,KAAK,GAAG,MAAMN,aAAa,CAACW,WAAd,CAA0BR,GAAG,CAACO,KAA9B,CAApB;EACAN,GAAG,CAACK,IAAJ,CAASH,KAAT;AACD,CAHD;;AAKA,MAAMM,MAAM,GAAG,OAAOT,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACvC,MAAMC,KAAK,GAAG,MAAMN,aAAa,CAACY,MAAd,CAAqBT,GAAG,CAACO,KAAJ,CAAUG,EAA/B,EAAmCV,GAAG,CAACK,IAAvC,CAApB;EACAJ,GAAG,CAACK,IAAJ,CAASH,KAAT;AACD,CAHD;;AAKA,MAAMQ,YAAY,GAAG,OAAOX,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EAC7C,MAAMC,KAAK,GAAG,MAAMN,aAAa,CAACe,aAAd,CAA4BZ,GAAG,CAACO,KAAJ,CAAUG,EAAtC,CAApB;EACAT,GAAG,CAACK,IAAJ,CAASH,KAAT;AACD,CAHD;;AAKAU,MAAM,CAACC,OAAP,GAAiB;EACff,MAAM,EAAEA,MADO;EAEfQ,KAAK,EAAEA,KAFQ;EAGfE,MAAM,EAAEA,MAHO;EAIfE,YAAY,EAAEA;AAJC,CAAjB"}},"mtime":1653749987550},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/utils/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"module.exports = {\n  // 一个包装工具 🔧可以马上把 路由函数的的error 处理到next 去，\n  // 减少try 的冗余代码\n  wrap: fn => (...args) => fn(...args).catch(args[2])\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwid3JhcCIsImZuIiwiYXJncyIsImNhdGNoIl0sInNvdXJjZVJvb3QiOiIvVm9sdW1lcy9XRF9CTEFDSy9vcmlnaW4vcHJpc21hLWV4cHJlc3MtdGVzdC91dGlscy8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0ge1xuICAvLyDkuIDkuKrljIXoo4Xlt6Xlhbcg8J+Up+WPr+S7pemprOS4iuaKiiDot6/nlLHlh73mlbDnmoTnmoRlcnJvciDlpITnkIbliLBuZXh0IOWOu++8jFxuICAvLyDlh4/lsJF0cnkg55qE5YaX5L2Z5Luj56CBXG4gIHdyYXA6XG4gICAgKGZuKSA9PlxuICAgICguLi5hcmdzKSA9PlxuICAgICAgZm4oLi4uYXJncykuY2F0Y2goYXJnc1syXSksXG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQUEsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0VBQ2Y7RUFDQTtFQUNBQyxJQUFJLEVBQ0RDLEVBQUQsSUFDQSxDQUFDLEdBQUdDLElBQUosS0FDRUQsRUFBRSxDQUFDLEdBQUdDLElBQUosQ0FBRixDQUFZQyxLQUFaLENBQWtCRCxJQUFJLENBQUMsQ0FBRCxDQUF0QjtBQU5XLENBQWpCIn0=","map":{"version":3,"names":["module","exports","wrap","fn","args","catch"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/utils/","sources":["index.js"],"sourcesContent":["module.exports = {\n  // 一个包装工具 🔧可以马上把 路由函数的的error 处理到next 去，\n  // 减少try 的冗余代码\n  wrap:\n    (fn) =>\n    (...args) =>\n      fn(...args).catch(args[2]),\n};\n"],"mappings":"AAAAA,MAAM,CAACC,OAAP,GAAiB;EACf;EACA;EACAC,IAAI,EACDC,EAAD,IACA,CAAC,GAAGC,IAAJ,KACED,EAAE,CAAC,GAAGC,IAAJ,CAAF,CAAYC,KAAZ,CAAkBD,IAAI,CAAC,CAAD,CAAtB;AANW,CAAjB"}},"mtime":1653405030470},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/routes/book.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const express = require('express');\n\nconst bookController = require('../controllers/bookController');\n\nconst bookRouter = express.Router();\n\nconst {\n  wrap\n} = require('../utils/'); // CRUD\n\n\nbookRouter.post('/', wrap(bookController.create));\nbookRouter.get('/', wrap(bookController.query));\nbookRouter.put('/', wrap(bookController.update));\nbookRouter.delete('/', wrap(bookController.deleteBook));\nmodule.exports = bookRouter;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImJvb2tDb250cm9sbGVyIiwiYm9va1JvdXRlciIsIlJvdXRlciIsIndyYXAiLCJwb3N0IiwiY3JlYXRlIiwiZ2V0IiwicXVlcnkiLCJwdXQiLCJ1cGRhdGUiLCJkZWxldGUiLCJkZWxldGVCb29rIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1ZvbHVtZXMvV0RfQkxBQ0svb3JpZ2luL3ByaXNtYS1leHByZXNzLXRlc3Qvcm91dGVzLyIsInNvdXJjZXMiOlsiYm9vay5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgYm9va0NvbnRyb2xsZXIgPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9ib29rQ29udHJvbGxlcicpO1xuY29uc3QgYm9va1JvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5jb25zdCB7IHdyYXAgfSA9IHJlcXVpcmUoJy4uL3V0aWxzLycpO1xuXG4vLyBDUlVEXG5ib29rUm91dGVyLnBvc3QoJy8nLCB3cmFwKGJvb2tDb250cm9sbGVyLmNyZWF0ZSkpO1xuYm9va1JvdXRlci5nZXQoJy8nLCB3cmFwKGJvb2tDb250cm9sbGVyLnF1ZXJ5KSk7XG5ib29rUm91dGVyLnB1dCgnLycsIHdyYXAoYm9va0NvbnRyb2xsZXIudXBkYXRlKSk7XG5ib29rUm91dGVyLmRlbGV0ZSgnLycsIHdyYXAoYm9va0NvbnRyb2xsZXIuZGVsZXRlQm9vaykpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGJvb2tSb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBdkI7O0FBQ0EsTUFBTUMsY0FBYyxHQUFHRCxPQUFPLENBQUMsK0JBQUQsQ0FBOUI7O0FBQ0EsTUFBTUUsVUFBVSxHQUFHSCxPQUFPLENBQUNJLE1BQVIsRUFBbkI7O0FBQ0EsTUFBTTtFQUFFQztBQUFGLElBQVdKLE9BQU8sQ0FBQyxXQUFELENBQXhCLEMsQ0FFQTs7O0FBQ0FFLFVBQVUsQ0FBQ0csSUFBWCxDQUFnQixHQUFoQixFQUFxQkQsSUFBSSxDQUFDSCxjQUFjLENBQUNLLE1BQWhCLENBQXpCO0FBQ0FKLFVBQVUsQ0FBQ0ssR0FBWCxDQUFlLEdBQWYsRUFBb0JILElBQUksQ0FBQ0gsY0FBYyxDQUFDTyxLQUFoQixDQUF4QjtBQUNBTixVQUFVLENBQUNPLEdBQVgsQ0FBZSxHQUFmLEVBQW9CTCxJQUFJLENBQUNILGNBQWMsQ0FBQ1MsTUFBaEIsQ0FBeEI7QUFDQVIsVUFBVSxDQUFDUyxNQUFYLENBQWtCLEdBQWxCLEVBQXVCUCxJQUFJLENBQUNILGNBQWMsQ0FBQ1csVUFBaEIsQ0FBM0I7QUFFQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCWixVQUFqQiJ9","map":{"version":3,"names":["express","require","bookController","bookRouter","Router","wrap","post","create","get","query","put","update","delete","deleteBook","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/routes/","sources":["book.js"],"sourcesContent":["const express = require('express');\nconst bookController = require('../controllers/bookController');\nconst bookRouter = express.Router();\nconst { wrap } = require('../utils/');\n\n// CRUD\nbookRouter.post('/', wrap(bookController.create));\nbookRouter.get('/', wrap(bookController.query));\nbookRouter.put('/', wrap(bookController.update));\nbookRouter.delete('/', wrap(bookController.deleteBook));\n\nmodule.exports = bookRouter;\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,cAAc,GAAGD,OAAO,CAAC,+BAAD,CAA9B;;AACA,MAAME,UAAU,GAAGH,OAAO,CAACI,MAAR,EAAnB;;AACA,MAAM;EAAEC;AAAF,IAAWJ,OAAO,CAAC,WAAD,CAAxB,C,CAEA;;;AACAE,UAAU,CAACG,IAAX,CAAgB,GAAhB,EAAqBD,IAAI,CAACH,cAAc,CAACK,MAAhB,CAAzB;AACAJ,UAAU,CAACK,GAAX,CAAe,GAAf,EAAoBH,IAAI,CAACH,cAAc,CAACO,KAAhB,CAAxB;AACAN,UAAU,CAACO,GAAX,CAAe,GAAf,EAAoBL,IAAI,CAACH,cAAc,CAACS,MAAhB,CAAxB;AACAR,UAAU,CAACS,MAAX,CAAkB,GAAlB,EAAuBP,IAAI,CAACH,cAAc,CAACW,UAAhB,CAA3B;AAEAC,MAAM,CAACC,OAAP,GAAiBZ,UAAjB"}},"mtime":1653405092830},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/controllers/bookController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const bookService = require('../service/bookService');\n\nconst create = async (req, res, next) => {\n  const value = await bookService.createBook(req.body);\n  res.json(value);\n};\n\nconst query = async (req, res, next) => {\n  const value = await bookService.queryBook(req.query);\n  res.json(value);\n};\n\nconst update = async (req, res, next) => {\n  const value = await bookService.update(req.query.id, req.body);\n  res.json(value);\n};\n\nconst deleteBook = async (req, res, next) => {\n  const value = await bookService.findAndDelete(req.query.id);\n  res.json(value);\n};\n\nmodule.exports = {\n  create: create,\n  query: query,\n  update: update,\n  deleteBook: deleteBook\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJib29rU2VydmljZSIsInJlcXVpcmUiLCJjcmVhdGUiLCJyZXEiLCJyZXMiLCJuZXh0IiwidmFsdWUiLCJjcmVhdGVCb29rIiwiYm9keSIsImpzb24iLCJxdWVyeSIsInF1ZXJ5Qm9vayIsInVwZGF0ZSIsImlkIiwiZGVsZXRlQm9vayIsImZpbmRBbmREZWxldGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVm9sdW1lcy9XRF9CTEFDSy9vcmlnaW4vcHJpc21hLWV4cHJlc3MtdGVzdC9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImJvb2tDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGJvb2tTZXJ2aWNlID0gcmVxdWlyZSgnLi4vc2VydmljZS9ib29rU2VydmljZScpO1xuXG5jb25zdCBjcmVhdGUgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdmFsdWUgPSBhd2FpdCBib29rU2VydmljZS5jcmVhdGVCb29rKHJlcS5ib2R5KTtcbiAgcmVzLmpzb24odmFsdWUpO1xufTtcblxuY29uc3QgcXVlcnkgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdmFsdWUgPSBhd2FpdCBib29rU2VydmljZS5xdWVyeUJvb2socmVxLnF1ZXJ5KTtcbiAgcmVzLmpzb24odmFsdWUpO1xufTtcblxuY29uc3QgdXBkYXRlID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gYXdhaXQgYm9va1NlcnZpY2UudXBkYXRlKHJlcS5xdWVyeS5pZCwgcmVxLmJvZHkpO1xuICByZXMuanNvbih2YWx1ZSk7XG59O1xuXG5jb25zdCBkZWxldGVCb29rID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gYXdhaXQgYm9va1NlcnZpY2UuZmluZEFuZERlbGV0ZShyZXEucXVlcnkuaWQpO1xuICByZXMuanNvbih2YWx1ZSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlOiBjcmVhdGUsXG4gIHF1ZXJ5OiBxdWVyeSxcbiAgdXBkYXRlOiB1cGRhdGUsXG4gIGRlbGV0ZUJvb2s6IGRlbGV0ZUJvb2ssXG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxXQUFXLEdBQUdDLE9BQU8sQ0FBQyx3QkFBRCxDQUEzQjs7QUFFQSxNQUFNQyxNQUFNLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixLQUEwQjtFQUN2QyxNQUFNQyxLQUFLLEdBQUcsTUFBTU4sV0FBVyxDQUFDTyxVQUFaLENBQXVCSixHQUFHLENBQUNLLElBQTNCLENBQXBCO0VBQ0FKLEdBQUcsQ0FBQ0ssSUFBSixDQUFTSCxLQUFUO0FBQ0QsQ0FIRDs7QUFLQSxNQUFNSSxLQUFLLEdBQUcsT0FBT1AsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixLQUEwQjtFQUN0QyxNQUFNQyxLQUFLLEdBQUcsTUFBTU4sV0FBVyxDQUFDVyxTQUFaLENBQXNCUixHQUFHLENBQUNPLEtBQTFCLENBQXBCO0VBQ0FOLEdBQUcsQ0FBQ0ssSUFBSixDQUFTSCxLQUFUO0FBQ0QsQ0FIRDs7QUFLQSxNQUFNTSxNQUFNLEdBQUcsT0FBT1QsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixLQUEwQjtFQUN2QyxNQUFNQyxLQUFLLEdBQUcsTUFBTU4sV0FBVyxDQUFDWSxNQUFaLENBQW1CVCxHQUFHLENBQUNPLEtBQUosQ0FBVUcsRUFBN0IsRUFBaUNWLEdBQUcsQ0FBQ0ssSUFBckMsQ0FBcEI7RUFDQUosR0FBRyxDQUFDSyxJQUFKLENBQVNILEtBQVQ7QUFDRCxDQUhEOztBQUtBLE1BQU1RLFVBQVUsR0FBRyxPQUFPWCxHQUFQLEVBQVlDLEdBQVosRUFBaUJDLElBQWpCLEtBQTBCO0VBQzNDLE1BQU1DLEtBQUssR0FBRyxNQUFNTixXQUFXLENBQUNlLGFBQVosQ0FBMEJaLEdBQUcsQ0FBQ08sS0FBSixDQUFVRyxFQUFwQyxDQUFwQjtFQUNBVCxHQUFHLENBQUNLLElBQUosQ0FBU0gsS0FBVDtBQUNELENBSEQ7O0FBS0FVLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjtFQUNmZixNQUFNLEVBQUVBLE1BRE87RUFFZlEsS0FBSyxFQUFFQSxLQUZRO0VBR2ZFLE1BQU0sRUFBRUEsTUFITztFQUlmRSxVQUFVLEVBQUVBO0FBSkcsQ0FBakIifQ==","map":{"version":3,"names":["bookService","require","create","req","res","next","value","createBook","body","json","query","queryBook","update","id","deleteBook","findAndDelete","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/controllers/","sources":["bookController.js"],"sourcesContent":["const bookService = require('../service/bookService');\n\nconst create = async (req, res, next) => {\n  const value = await bookService.createBook(req.body);\n  res.json(value);\n};\n\nconst query = async (req, res, next) => {\n  const value = await bookService.queryBook(req.query);\n  res.json(value);\n};\n\nconst update = async (req, res, next) => {\n  const value = await bookService.update(req.query.id, req.body);\n  res.json(value);\n};\n\nconst deleteBook = async (req, res, next) => {\n  const value = await bookService.findAndDelete(req.query.id);\n  res.json(value);\n};\n\nmodule.exports = {\n  create: create,\n  query: query,\n  update: update,\n  deleteBook: deleteBook,\n};\n"],"mappings":"AAAA,MAAMA,WAAW,GAAGC,OAAO,CAAC,wBAAD,CAA3B;;AAEA,MAAMC,MAAM,GAAG,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACvC,MAAMC,KAAK,GAAG,MAAMN,WAAW,CAACO,UAAZ,CAAuBJ,GAAG,CAACK,IAA3B,CAApB;EACAJ,GAAG,CAACK,IAAJ,CAASH,KAAT;AACD,CAHD;;AAKA,MAAMI,KAAK,GAAG,OAAOP,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACtC,MAAMC,KAAK,GAAG,MAAMN,WAAW,CAACW,SAAZ,CAAsBR,GAAG,CAACO,KAA1B,CAApB;EACAN,GAAG,CAACK,IAAJ,CAASH,KAAT;AACD,CAHD;;AAKA,MAAMM,MAAM,GAAG,OAAOT,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACvC,MAAMC,KAAK,GAAG,MAAMN,WAAW,CAACY,MAAZ,CAAmBT,GAAG,CAACO,KAAJ,CAAUG,EAA7B,EAAiCV,GAAG,CAACK,IAArC,CAApB;EACAJ,GAAG,CAACK,IAAJ,CAASH,KAAT;AACD,CAHD;;AAKA,MAAMQ,UAAU,GAAG,OAAOX,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EAC3C,MAAMC,KAAK,GAAG,MAAMN,WAAW,CAACe,aAAZ,CAA0BZ,GAAG,CAACO,KAAJ,CAAUG,EAApC,CAApB;EACAT,GAAG,CAACK,IAAJ,CAASH,KAAT;AACD,CAHD;;AAKAU,MAAM,CAACC,OAAP,GAAiB;EACff,MAAM,EAAEA,MADO;EAEfQ,KAAK,EAAEA,KAFQ;EAGfE,MAAM,EAAEA,MAHO;EAIfE,UAAU,EAAEA;AAJG,CAAjB"}},"mtime":1653750002310},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/service/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/service/bookService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const BookModel = require('../model/Book');\n\nconst createBook = async data => {\n  const res = await BookModel.create(data);\n  return res;\n};\n\nconst queryBook = async query => {\n  //子表关联主表查询，populate里面为子表外键\n  const res = await BookModel.find().populate('author').populate('genre').exec();\n  return res;\n};\n\nconst update = async (id, data) => {\n  const res = await BookModel.findByIdAndUpdate(id, data);\n  return res;\n};\n\nconst findAndDelete = async id => {\n  const res = await BookModel.findByIdAndRemove(id);\n  return res;\n};\n\nmodule.exports = {\n  createBook: createBook,\n  queryBook: queryBook,\n  update: update,\n  findAndDelete: findAndDelete\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29rTW9kZWwiLCJyZXF1aXJlIiwiY3JlYXRlQm9vayIsImRhdGEiLCJyZXMiLCJjcmVhdGUiLCJxdWVyeUJvb2siLCJxdWVyeSIsImZpbmQiLCJwb3B1bGF0ZSIsImV4ZWMiLCJ1cGRhdGUiLCJpZCIsImZpbmRCeUlkQW5kVXBkYXRlIiwiZmluZEFuZERlbGV0ZSIsImZpbmRCeUlkQW5kUmVtb3ZlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1ZvbHVtZXMvV0RfQkxBQ0svb3JpZ2luL3ByaXNtYS1leHByZXNzLXRlc3Qvc2VydmljZS8iLCJzb3VyY2VzIjpbImJvb2tTZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEJvb2tNb2RlbCA9IHJlcXVpcmUoJy4uL21vZGVsL0Jvb2snKTtcblxuY29uc3QgY3JlYXRlQm9vayA9IGFzeW5jIChkYXRhKSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IEJvb2tNb2RlbC5jcmVhdGUoZGF0YSk7XG4gIHJldHVybiByZXM7XG59O1xuXG5jb25zdCBxdWVyeUJvb2sgPSBhc3luYyAocXVlcnkpID0+IHtcbiAgLy/lrZDooajlhbPogZTkuLvooajmn6Xor6LvvIxwb3B1bGF0ZemHjOmdouS4uuWtkOihqOWklumUrlxuICBjb25zdCByZXMgPSBhd2FpdCBCb29rTW9kZWwuZmluZCgpXG4gICAgLnBvcHVsYXRlKCdhdXRob3InKVxuICAgIC5wb3B1bGF0ZSgnZ2VucmUnKVxuICAgIC5leGVjKCk7XG4gIHJldHVybiByZXM7XG59O1xuXG5jb25zdCB1cGRhdGUgPSBhc3luYyAoaWQsIGRhdGEpID0+IHtcbiAgY29uc3QgcmVzID0gYXdhaXQgQm9va01vZGVsLmZpbmRCeUlkQW5kVXBkYXRlKGlkLCBkYXRhKTtcbiAgcmV0dXJuIHJlcztcbn07XG5cbmNvbnN0IGZpbmRBbmREZWxldGUgPSBhc3luYyAoaWQpID0+IHtcbiAgY29uc3QgcmVzID0gYXdhaXQgQm9va01vZGVsLmZpbmRCeUlkQW5kUmVtb3ZlKGlkKTtcbiAgcmV0dXJuIHJlcztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGVCb29rOiBjcmVhdGVCb29rLFxuICBxdWVyeUJvb2s6IHF1ZXJ5Qm9vayxcbiAgdXBkYXRlOiB1cGRhdGUsXG4gIGZpbmRBbmREZWxldGU6IGZpbmRBbmREZWxldGUsXG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxTQUFTLEdBQUdDLE9BQU8sQ0FBQyxlQUFELENBQXpCOztBQUVBLE1BQU1DLFVBQVUsR0FBRyxNQUFPQyxJQUFQLElBQWdCO0VBQ2pDLE1BQU1DLEdBQUcsR0FBRyxNQUFNSixTQUFTLENBQUNLLE1BQVYsQ0FBaUJGLElBQWpCLENBQWxCO0VBQ0EsT0FBT0MsR0FBUDtBQUNELENBSEQ7O0FBS0EsTUFBTUUsU0FBUyxHQUFHLE1BQU9DLEtBQVAsSUFBaUI7RUFDakM7RUFDQSxNQUFNSCxHQUFHLEdBQUcsTUFBTUosU0FBUyxDQUFDUSxJQUFWLEdBQ2ZDLFFBRGUsQ0FDTixRQURNLEVBRWZBLFFBRmUsQ0FFTixPQUZNLEVBR2ZDLElBSGUsRUFBbEI7RUFJQSxPQUFPTixHQUFQO0FBQ0QsQ0FQRDs7QUFTQSxNQUFNTyxNQUFNLEdBQUcsT0FBT0MsRUFBUCxFQUFXVCxJQUFYLEtBQW9CO0VBQ2pDLE1BQU1DLEdBQUcsR0FBRyxNQUFNSixTQUFTLENBQUNhLGlCQUFWLENBQTRCRCxFQUE1QixFQUFnQ1QsSUFBaEMsQ0FBbEI7RUFDQSxPQUFPQyxHQUFQO0FBQ0QsQ0FIRDs7QUFLQSxNQUFNVSxhQUFhLEdBQUcsTUFBT0YsRUFBUCxJQUFjO0VBQ2xDLE1BQU1SLEdBQUcsR0FBRyxNQUFNSixTQUFTLENBQUNlLGlCQUFWLENBQTRCSCxFQUE1QixDQUFsQjtFQUNBLE9BQU9SLEdBQVA7QUFDRCxDQUhEOztBQUtBWSxNQUFNLENBQUNDLE9BQVAsR0FBaUI7RUFDZmYsVUFBVSxFQUFFQSxVQURHO0VBRWZJLFNBQVMsRUFBRUEsU0FGSTtFQUdmSyxNQUFNLEVBQUVBLE1BSE87RUFJZkcsYUFBYSxFQUFFQTtBQUpBLENBQWpCIn0=","map":{"version":3,"names":["BookModel","require","createBook","data","res","create","queryBook","query","find","populate","exec","update","id","findByIdAndUpdate","findAndDelete","findByIdAndRemove","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/service/","sources":["bookService.js"],"sourcesContent":["const BookModel = require('../model/Book');\n\nconst createBook = async (data) => {\n  const res = await BookModel.create(data);\n  return res;\n};\n\nconst queryBook = async (query) => {\n  //子表关联主表查询，populate里面为子表外键\n  const res = await BookModel.find()\n    .populate('author')\n    .populate('genre')\n    .exec();\n  return res;\n};\n\nconst update = async (id, data) => {\n  const res = await BookModel.findByIdAndUpdate(id, data);\n  return res;\n};\n\nconst findAndDelete = async (id) => {\n  const res = await BookModel.findByIdAndRemove(id);\n  return res;\n};\n\nmodule.exports = {\n  createBook: createBook,\n  queryBook: queryBook,\n  update: update,\n  findAndDelete: findAndDelete,\n};\n"],"mappings":"AAAA,MAAMA,SAAS,GAAGC,OAAO,CAAC,eAAD,CAAzB;;AAEA,MAAMC,UAAU,GAAG,MAAOC,IAAP,IAAgB;EACjC,MAAMC,GAAG,GAAG,MAAMJ,SAAS,CAACK,MAAV,CAAiBF,IAAjB,CAAlB;EACA,OAAOC,GAAP;AACD,CAHD;;AAKA,MAAME,SAAS,GAAG,MAAOC,KAAP,IAAiB;EACjC;EACA,MAAMH,GAAG,GAAG,MAAMJ,SAAS,CAACQ,IAAV,GACfC,QADe,CACN,QADM,EAEfA,QAFe,CAEN,OAFM,EAGfC,IAHe,EAAlB;EAIA,OAAON,GAAP;AACD,CAPD;;AASA,MAAMO,MAAM,GAAG,OAAOC,EAAP,EAAWT,IAAX,KAAoB;EACjC,MAAMC,GAAG,GAAG,MAAMJ,SAAS,CAACa,iBAAV,CAA4BD,EAA5B,EAAgCT,IAAhC,CAAlB;EACA,OAAOC,GAAP;AACD,CAHD;;AAKA,MAAMU,aAAa,GAAG,MAAOF,EAAP,IAAc;EAClC,MAAMR,GAAG,GAAG,MAAMJ,SAAS,CAACe,iBAAV,CAA4BH,EAA5B,CAAlB;EACA,OAAOR,GAAP;AACD,CAHD;;AAKAY,MAAM,CAACC,OAAP,GAAiB;EACff,UAAU,EAAEA,UADG;EAEfI,SAAS,EAAEA,SAFI;EAGfK,MAAM,EAAEA,MAHO;EAIfG,aAAa,EAAEA;AAJA,CAAjB"}},"mtime":1654092760820},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/model/Book.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const mongoose = require('mongoose');\n\nconst Schema = mongoose.Schema;\nconst BookSchema = new Schema({\n  title: {\n    type: String,\n    required: true\n  },\n  author: {\n    type: Schema.ObjectId,\n    ref: 'Author',\n    required: true\n  },\n  summary: {\n    type: String,\n    required: true\n  },\n  isbn: {\n    type: String,\n    required: true\n  },\n  genre: [{\n    type: Schema.ObjectId,\n    ref: 'Genre'\n  }],\n  url: String\n}); // Export model.\n\nmodule.exports = mongoose.model('Book', BookSchema, 'books');\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJTY2hlbWEiLCJCb29rU2NoZW1hIiwidGl0bGUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJhdXRob3IiLCJPYmplY3RJZCIsInJlZiIsInN1bW1hcnkiLCJpc2JuIiwiZ2VucmUiLCJ1cmwiLCJtb2R1bGUiLCJleHBvcnRzIiwibW9kZWwiXSwic291cmNlUm9vdCI6Ii9Wb2x1bWVzL1dEX0JMQUNLL29yaWdpbi9wcmlzbWEtZXhwcmVzcy10ZXN0L21vZGVsLyIsInNvdXJjZXMiOlsiQm9vay5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5cbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYTtcblxuY29uc3QgQm9va1NjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICB0aXRsZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgYXV0aG9yOiB7XG4gICAgdHlwZTogU2NoZW1hLk9iamVjdElkLFxuICAgIHJlZjogJ0F1dGhvcicsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIHN1bW1hcnk6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIGlzYm46IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIGdlbnJlOiBbXG4gICAge1xuICAgICAgdHlwZTogU2NoZW1hLk9iamVjdElkLFxuICAgICAgcmVmOiAnR2VucmUnLFxuICAgIH0sXG4gIF0sXG4gIHVybDogU3RyaW5nLFxufSk7XG5cbi8vIEV4cG9ydCBtb2RlbC5cbm1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoJ0Jvb2snLCBCb29rU2NoZW1hLCAnYm9va3MnKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUF4Qjs7QUFFQSxNQUFNQyxNQUFNLEdBQUdGLFFBQVEsQ0FBQ0UsTUFBeEI7QUFFQSxNQUFNQyxVQUFVLEdBQUcsSUFBSUQsTUFBSixDQUFXO0VBQzVCRSxLQUFLLEVBQUU7SUFDTEMsSUFBSSxFQUFFQyxNQUREO0lBRUxDLFFBQVEsRUFBRTtFQUZMLENBRHFCO0VBSzVCQyxNQUFNLEVBQUU7SUFDTkgsSUFBSSxFQUFFSCxNQUFNLENBQUNPLFFBRFA7SUFFTkMsR0FBRyxFQUFFLFFBRkM7SUFHTkgsUUFBUSxFQUFFO0VBSEosQ0FMb0I7RUFVNUJJLE9BQU8sRUFBRTtJQUNQTixJQUFJLEVBQUVDLE1BREM7SUFFUEMsUUFBUSxFQUFFO0VBRkgsQ0FWbUI7RUFjNUJLLElBQUksRUFBRTtJQUNKUCxJQUFJLEVBQUVDLE1BREY7SUFFSkMsUUFBUSxFQUFFO0VBRk4sQ0Fkc0I7RUFrQjVCTSxLQUFLLEVBQUUsQ0FDTDtJQUNFUixJQUFJLEVBQUVILE1BQU0sQ0FBQ08sUUFEZjtJQUVFQyxHQUFHLEVBQUU7RUFGUCxDQURLLENBbEJxQjtFQXdCNUJJLEdBQUcsRUFBRVI7QUF4QnVCLENBQVgsQ0FBbkIsQyxDQTJCQTs7QUFDQVMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCaEIsUUFBUSxDQUFDaUIsS0FBVCxDQUFlLE1BQWYsRUFBdUJkLFVBQXZCLEVBQW1DLE9BQW5DLENBQWpCIn0=","map":{"version":3,"names":["mongoose","require","Schema","BookSchema","title","type","String","required","author","ObjectId","ref","summary","isbn","genre","url","module","exports","model"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/model/","sources":["Book.js"],"sourcesContent":["const mongoose = require('mongoose');\n\nconst Schema = mongoose.Schema;\n\nconst BookSchema = new Schema({\n  title: {\n    type: String,\n    required: true,\n  },\n  author: {\n    type: Schema.ObjectId,\n    ref: 'Author',\n    required: true,\n  },\n  summary: {\n    type: String,\n    required: true,\n  },\n  isbn: {\n    type: String,\n    required: true,\n  },\n  genre: [\n    {\n      type: Schema.ObjectId,\n      ref: 'Genre',\n    },\n  ],\n  url: String,\n});\n\n// Export model.\nmodule.exports = mongoose.model('Book', BookSchema, 'books');\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAEA,MAAMC,MAAM,GAAGF,QAAQ,CAACE,MAAxB;AAEA,MAAMC,UAAU,GAAG,IAAID,MAAJ,CAAW;EAC5BE,KAAK,EAAE;IACLC,IAAI,EAAEC,MADD;IAELC,QAAQ,EAAE;EAFL,CADqB;EAK5BC,MAAM,EAAE;IACNH,IAAI,EAAEH,MAAM,CAACO,QADP;IAENC,GAAG,EAAE,QAFC;IAGNH,QAAQ,EAAE;EAHJ,CALoB;EAU5BI,OAAO,EAAE;IACPN,IAAI,EAAEC,MADC;IAEPC,QAAQ,EAAE;EAFH,CAVmB;EAc5BK,IAAI,EAAE;IACJP,IAAI,EAAEC,MADF;IAEJC,QAAQ,EAAE;EAFN,CAdsB;EAkB5BM,KAAK,EAAE,CACL;IACER,IAAI,EAAEH,MAAM,CAACO,QADf;IAEEC,GAAG,EAAE;EAFP,CADK,CAlBqB;EAwB5BI,GAAG,EAAER;AAxBuB,CAAX,CAAnB,C,CA2BA;;AACAS,MAAM,CAACC,OAAP,GAAiBhB,QAAQ,CAACiB,KAAT,CAAe,MAAf,EAAuBd,UAAvB,EAAmC,OAAnC,CAAjB"}},"mtime":1653221750680},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/routes/genre.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const express = require('express');\n\nconst generaController = require('../controllers/genraController');\n\nconst generaRouter = express.Router();\n\nconst {\n  wrap\n} = require('../utils/'); // CRUD\n\n\ngeneraRouter.post('/', wrap(generaController.create));\ngeneraRouter.get('/', wrap(generaController.query));\ngeneraRouter.put('/', wrap(generaController.update));\ngeneraRouter.delete('/', wrap(generaController.deleteGenre));\nmodule.exports = generaRouter;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImdlbmVyYUNvbnRyb2xsZXIiLCJnZW5lcmFSb3V0ZXIiLCJSb3V0ZXIiLCJ3cmFwIiwicG9zdCIsImNyZWF0ZSIsImdldCIsInF1ZXJ5IiwicHV0IiwidXBkYXRlIiwiZGVsZXRlIiwiZGVsZXRlR2VucmUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVm9sdW1lcy9XRF9CTEFDSy9vcmlnaW4vcHJpc21hLWV4cHJlc3MtdGVzdC9yb3V0ZXMvIiwic291cmNlcyI6WyJnZW5yZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgZ2VuZXJhQ29udHJvbGxlciA9IHJlcXVpcmUoJy4uL2NvbnRyb2xsZXJzL2dlbnJhQ29udHJvbGxlcicpO1xuY29uc3QgZ2VuZXJhUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbmNvbnN0IHsgd3JhcCB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvJyk7XG5cbi8vIENSVURcbmdlbmVyYVJvdXRlci5wb3N0KCcvJywgd3JhcChnZW5lcmFDb250cm9sbGVyLmNyZWF0ZSkpO1xuZ2VuZXJhUm91dGVyLmdldCgnLycsIHdyYXAoZ2VuZXJhQ29udHJvbGxlci5xdWVyeSkpO1xuZ2VuZXJhUm91dGVyLnB1dCgnLycsIHdyYXAoZ2VuZXJhQ29udHJvbGxlci51cGRhdGUpKTtcbmdlbmVyYVJvdXRlci5kZWxldGUoJy8nLCB3cmFwKGdlbmVyYUNvbnRyb2xsZXIuZGVsZXRlR2VucmUpKTtcblxubW9kdWxlLmV4cG9ydHMgPSBnZW5lcmFSb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBdkI7O0FBQ0EsTUFBTUMsZ0JBQWdCLEdBQUdELE9BQU8sQ0FBQyxnQ0FBRCxDQUFoQzs7QUFDQSxNQUFNRSxZQUFZLEdBQUdILE9BQU8sQ0FBQ0ksTUFBUixFQUFyQjs7QUFDQSxNQUFNO0VBQUVDO0FBQUYsSUFBV0osT0FBTyxDQUFDLFdBQUQsQ0FBeEIsQyxDQUVBOzs7QUFDQUUsWUFBWSxDQUFDRyxJQUFiLENBQWtCLEdBQWxCLEVBQXVCRCxJQUFJLENBQUNILGdCQUFnQixDQUFDSyxNQUFsQixDQUEzQjtBQUNBSixZQUFZLENBQUNLLEdBQWIsQ0FBaUIsR0FBakIsRUFBc0JILElBQUksQ0FBQ0gsZ0JBQWdCLENBQUNPLEtBQWxCLENBQTFCO0FBQ0FOLFlBQVksQ0FBQ08sR0FBYixDQUFpQixHQUFqQixFQUFzQkwsSUFBSSxDQUFDSCxnQkFBZ0IsQ0FBQ1MsTUFBbEIsQ0FBMUI7QUFDQVIsWUFBWSxDQUFDUyxNQUFiLENBQW9CLEdBQXBCLEVBQXlCUCxJQUFJLENBQUNILGdCQUFnQixDQUFDVyxXQUFsQixDQUE3QjtBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJaLFlBQWpCIn0=","map":{"version":3,"names":["express","require","generaController","generaRouter","Router","wrap","post","create","get","query","put","update","delete","deleteGenre","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/routes/","sources":["genre.js"],"sourcesContent":["const express = require('express');\nconst generaController = require('../controllers/genraController');\nconst generaRouter = express.Router();\nconst { wrap } = require('../utils/');\n\n// CRUD\ngeneraRouter.post('/', wrap(generaController.create));\ngeneraRouter.get('/', wrap(generaController.query));\ngeneraRouter.put('/', wrap(generaController.update));\ngeneraRouter.delete('/', wrap(generaController.deleteGenre));\n\nmodule.exports = generaRouter;\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,gBAAgB,GAAGD,OAAO,CAAC,gCAAD,CAAhC;;AACA,MAAME,YAAY,GAAGH,OAAO,CAACI,MAAR,EAArB;;AACA,MAAM;EAAEC;AAAF,IAAWJ,OAAO,CAAC,WAAD,CAAxB,C,CAEA;;;AACAE,YAAY,CAACG,IAAb,CAAkB,GAAlB,EAAuBD,IAAI,CAACH,gBAAgB,CAACK,MAAlB,CAA3B;AACAJ,YAAY,CAACK,GAAb,CAAiB,GAAjB,EAAsBH,IAAI,CAACH,gBAAgB,CAACO,KAAlB,CAA1B;AACAN,YAAY,CAACO,GAAb,CAAiB,GAAjB,EAAsBL,IAAI,CAACH,gBAAgB,CAACS,MAAlB,CAA1B;AACAR,YAAY,CAACS,MAAb,CAAoB,GAApB,EAAyBP,IAAI,CAACH,gBAAgB,CAACW,WAAlB,CAA7B;AAEAC,MAAM,CAACC,OAAP,GAAiBZ,YAAjB"}},"mtime":1653749978880},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/controllers/genraController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const genreService = require('../service/genreService');\n\nconst create = async (req, res, next) => {\n  const value = await genreService.createGenre(req.body);\n  res.json(value);\n};\n\nconst query = async (req, res, next) => {\n  const value = await genreService.queryGenre(req.query);\n  res.json(value);\n};\n\nconst update = async (req, res, next) => {\n  const value = await genreService.update(req.query.id, req.body);\n  res.json(value);\n};\n\nconst deleteGenre = async (req, res, next) => {\n  const value = await genreService.findAndDelete(req.query.id);\n  res.json(value);\n};\n\nmodule.exports = {\n  create: create,\n  query: query,\n  update: update,\n  deleteGenre: deleteGenre\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZW5yZVNlcnZpY2UiLCJyZXF1aXJlIiwiY3JlYXRlIiwicmVxIiwicmVzIiwibmV4dCIsInZhbHVlIiwiY3JlYXRlR2VucmUiLCJib2R5IiwianNvbiIsInF1ZXJ5IiwicXVlcnlHZW5yZSIsInVwZGF0ZSIsImlkIiwiZGVsZXRlR2VucmUiLCJmaW5kQW5kRGVsZXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1ZvbHVtZXMvV0RfQkxBQ0svb3JpZ2luL3ByaXNtYS1leHByZXNzLXRlc3QvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJnZW5yYUNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZ2VucmVTZXJ2aWNlID0gcmVxdWlyZSgnLi4vc2VydmljZS9nZW5yZVNlcnZpY2UnKTtcblxuY29uc3QgY3JlYXRlID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gYXdhaXQgZ2VucmVTZXJ2aWNlLmNyZWF0ZUdlbnJlKHJlcS5ib2R5KTtcbiAgcmVzLmpzb24odmFsdWUpO1xufTtcblxuY29uc3QgcXVlcnkgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdmFsdWUgPSBhd2FpdCBnZW5yZVNlcnZpY2UucXVlcnlHZW5yZShyZXEucXVlcnkpO1xuICByZXMuanNvbih2YWx1ZSk7XG59O1xuXG5jb25zdCB1cGRhdGUgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdmFsdWUgPSBhd2FpdCBnZW5yZVNlcnZpY2UudXBkYXRlKHJlcS5xdWVyeS5pZCwgcmVxLmJvZHkpO1xuICByZXMuanNvbih2YWx1ZSk7XG59O1xuXG5jb25zdCBkZWxldGVHZW5yZSA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCB2YWx1ZSA9IGF3YWl0IGdlbnJlU2VydmljZS5maW5kQW5kRGVsZXRlKHJlcS5xdWVyeS5pZCk7XG4gIHJlcy5qc29uKHZhbHVlKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGU6IGNyZWF0ZSxcbiAgcXVlcnk6IHF1ZXJ5LFxuICB1cGRhdGU6IHVwZGF0ZSxcbiAgZGVsZXRlR2VucmU6IGRlbGV0ZUdlbnJlLFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsWUFBWSxHQUFHQyxPQUFPLENBQUMseUJBQUQsQ0FBNUI7O0FBRUEsTUFBTUMsTUFBTSxHQUFHLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDdkMsTUFBTUMsS0FBSyxHQUFHLE1BQU1OLFlBQVksQ0FBQ08sV0FBYixDQUF5QkosR0FBRyxDQUFDSyxJQUE3QixDQUFwQjtFQUNBSixHQUFHLENBQUNLLElBQUosQ0FBU0gsS0FBVDtBQUNELENBSEQ7O0FBS0EsTUFBTUksS0FBSyxHQUFHLE9BQU9QLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDdEMsTUFBTUMsS0FBSyxHQUFHLE1BQU1OLFlBQVksQ0FBQ1csVUFBYixDQUF3QlIsR0FBRyxDQUFDTyxLQUE1QixDQUFwQjtFQUNBTixHQUFHLENBQUNLLElBQUosQ0FBU0gsS0FBVDtBQUNELENBSEQ7O0FBS0EsTUFBTU0sTUFBTSxHQUFHLE9BQU9ULEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDdkMsTUFBTUMsS0FBSyxHQUFHLE1BQU1OLFlBQVksQ0FBQ1ksTUFBYixDQUFvQlQsR0FBRyxDQUFDTyxLQUFKLENBQVVHLEVBQTlCLEVBQWtDVixHQUFHLENBQUNLLElBQXRDLENBQXBCO0VBQ0FKLEdBQUcsQ0FBQ0ssSUFBSixDQUFTSCxLQUFUO0FBQ0QsQ0FIRDs7QUFLQSxNQUFNUSxXQUFXLEdBQUcsT0FBT1gsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixLQUEwQjtFQUM1QyxNQUFNQyxLQUFLLEdBQUcsTUFBTU4sWUFBWSxDQUFDZSxhQUFiLENBQTJCWixHQUFHLENBQUNPLEtBQUosQ0FBVUcsRUFBckMsQ0FBcEI7RUFDQVQsR0FBRyxDQUFDSyxJQUFKLENBQVNILEtBQVQ7QUFDRCxDQUhEOztBQUtBVSxNQUFNLENBQUNDLE9BQVAsR0FBaUI7RUFDZmYsTUFBTSxFQUFFQSxNQURPO0VBRWZRLEtBQUssRUFBRUEsS0FGUTtFQUdmRSxNQUFNLEVBQUVBLE1BSE87RUFJZkUsV0FBVyxFQUFFQTtBQUpFLENBQWpCIn0=","map":{"version":3,"names":["genreService","require","create","req","res","next","value","createGenre","body","json","query","queryGenre","update","id","deleteGenre","findAndDelete","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/controllers/","sources":["genraController.js"],"sourcesContent":["const genreService = require('../service/genreService');\n\nconst create = async (req, res, next) => {\n  const value = await genreService.createGenre(req.body);\n  res.json(value);\n};\n\nconst query = async (req, res, next) => {\n  const value = await genreService.queryGenre(req.query);\n  res.json(value);\n};\n\nconst update = async (req, res, next) => {\n  const value = await genreService.update(req.query.id, req.body);\n  res.json(value);\n};\n\nconst deleteGenre = async (req, res, next) => {\n  const value = await genreService.findAndDelete(req.query.id);\n  res.json(value);\n};\n\nmodule.exports = {\n  create: create,\n  query: query,\n  update: update,\n  deleteGenre: deleteGenre,\n};\n"],"mappings":"AAAA,MAAMA,YAAY,GAAGC,OAAO,CAAC,yBAAD,CAA5B;;AAEA,MAAMC,MAAM,GAAG,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACvC,MAAMC,KAAK,GAAG,MAAMN,YAAY,CAACO,WAAb,CAAyBJ,GAAG,CAACK,IAA7B,CAApB;EACAJ,GAAG,CAACK,IAAJ,CAASH,KAAT;AACD,CAHD;;AAKA,MAAMI,KAAK,GAAG,OAAOP,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACtC,MAAMC,KAAK,GAAG,MAAMN,YAAY,CAACW,UAAb,CAAwBR,GAAG,CAACO,KAA5B,CAApB;EACAN,GAAG,CAACK,IAAJ,CAASH,KAAT;AACD,CAHD;;AAKA,MAAMM,MAAM,GAAG,OAAOT,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACvC,MAAMC,KAAK,GAAG,MAAMN,YAAY,CAACY,MAAb,CAAoBT,GAAG,CAACO,KAAJ,CAAUG,EAA9B,EAAkCV,GAAG,CAACK,IAAtC,CAApB;EACAJ,GAAG,CAACK,IAAJ,CAASH,KAAT;AACD,CAHD;;AAKA,MAAMQ,WAAW,GAAG,OAAOX,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EAC5C,MAAMC,KAAK,GAAG,MAAMN,YAAY,CAACe,aAAb,CAA2BZ,GAAG,CAACO,KAAJ,CAAUG,EAArC,CAApB;EACAT,GAAG,CAACK,IAAJ,CAASH,KAAT;AACD,CAHD;;AAKAU,MAAM,CAACC,OAAP,GAAiB;EACff,MAAM,EAAEA,MADO;EAEfQ,KAAK,EAAEA,KAFQ;EAGfE,MAAM,EAAEA,MAHO;EAIfE,WAAW,EAAEA;AAJE,CAAjB"}},"mtime":1653750028000},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/service/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/service/genreService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const GenreModel = require('../model/Genre');\n\nconst createGenre = async data => {\n  const res = await GenreModel.create(data);\n  return res;\n};\n\nconst queryGenre = async query => {\n  const res = await GenreModel.find();\n  return res;\n};\n\nconst update = async (id, data) => {\n  const res = await GenreModel.findByIdAndUpdate(id, data);\n  return res;\n};\n\nconst findAndDelete = async id => {\n  const res = await GenreModel.findByIdAndRemove(id);\n  return res;\n};\n\nmodule.exports = {\n  createGenre: createGenre,\n  queryGenre: queryGenre,\n  update: update,\n  findAndDelete: findAndDelete\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJHZW5yZU1vZGVsIiwicmVxdWlyZSIsImNyZWF0ZUdlbnJlIiwiZGF0YSIsInJlcyIsImNyZWF0ZSIsInF1ZXJ5R2VucmUiLCJxdWVyeSIsImZpbmQiLCJ1cGRhdGUiLCJpZCIsImZpbmRCeUlkQW5kVXBkYXRlIiwiZmluZEFuZERlbGV0ZSIsImZpbmRCeUlkQW5kUmVtb3ZlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1ZvbHVtZXMvV0RfQkxBQ0svb3JpZ2luL3ByaXNtYS1leHByZXNzLXRlc3Qvc2VydmljZS8iLCJzb3VyY2VzIjpbImdlbnJlU2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBHZW5yZU1vZGVsID0gcmVxdWlyZSgnLi4vbW9kZWwvR2VucmUnKTtcblxuY29uc3QgY3JlYXRlR2VucmUgPSBhc3luYyAoZGF0YSkgPT4ge1xuICBjb25zdCByZXMgPSBhd2FpdCBHZW5yZU1vZGVsLmNyZWF0ZShkYXRhKTtcbiAgcmV0dXJuIHJlcztcbn07XG5cbmNvbnN0IHF1ZXJ5R2VucmUgPSBhc3luYyAocXVlcnkpID0+IHtcbiAgY29uc3QgcmVzID0gYXdhaXQgR2VucmVNb2RlbC5maW5kKCk7XG4gIHJldHVybiByZXM7XG59O1xuXG5jb25zdCB1cGRhdGUgPSBhc3luYyAoaWQsIGRhdGEpID0+IHtcbiAgY29uc3QgcmVzID0gYXdhaXQgR2VucmVNb2RlbC5maW5kQnlJZEFuZFVwZGF0ZShpZCwgZGF0YSk7XG4gIHJldHVybiByZXM7XG59O1xuXG5jb25zdCBmaW5kQW5kRGVsZXRlID0gYXN5bmMgKGlkKSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IEdlbnJlTW9kZWwuZmluZEJ5SWRBbmRSZW1vdmUoaWQpO1xuICByZXR1cm4gcmVzO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZUdlbnJlOiBjcmVhdGVHZW5yZSxcbiAgcXVlcnlHZW5yZTogcXVlcnlHZW5yZSxcbiAgdXBkYXRlOiB1cGRhdGUsXG4gIGZpbmRBbmREZWxldGU6IGZpbmRBbmREZWxldGUsXG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxVQUFVLEdBQUdDLE9BQU8sQ0FBQyxnQkFBRCxDQUExQjs7QUFFQSxNQUFNQyxXQUFXLEdBQUcsTUFBT0MsSUFBUCxJQUFnQjtFQUNsQyxNQUFNQyxHQUFHLEdBQUcsTUFBTUosVUFBVSxDQUFDSyxNQUFYLENBQWtCRixJQUFsQixDQUFsQjtFQUNBLE9BQU9DLEdBQVA7QUFDRCxDQUhEOztBQUtBLE1BQU1FLFVBQVUsR0FBRyxNQUFPQyxLQUFQLElBQWlCO0VBQ2xDLE1BQU1ILEdBQUcsR0FBRyxNQUFNSixVQUFVLENBQUNRLElBQVgsRUFBbEI7RUFDQSxPQUFPSixHQUFQO0FBQ0QsQ0FIRDs7QUFLQSxNQUFNSyxNQUFNLEdBQUcsT0FBT0MsRUFBUCxFQUFXUCxJQUFYLEtBQW9CO0VBQ2pDLE1BQU1DLEdBQUcsR0FBRyxNQUFNSixVQUFVLENBQUNXLGlCQUFYLENBQTZCRCxFQUE3QixFQUFpQ1AsSUFBakMsQ0FBbEI7RUFDQSxPQUFPQyxHQUFQO0FBQ0QsQ0FIRDs7QUFLQSxNQUFNUSxhQUFhLEdBQUcsTUFBT0YsRUFBUCxJQUFjO0VBQ2xDLE1BQU1OLEdBQUcsR0FBRyxNQUFNSixVQUFVLENBQUNhLGlCQUFYLENBQTZCSCxFQUE3QixDQUFsQjtFQUNBLE9BQU9OLEdBQVA7QUFDRCxDQUhEOztBQUtBVSxNQUFNLENBQUNDLE9BQVAsR0FBaUI7RUFDZmIsV0FBVyxFQUFFQSxXQURFO0VBRWZJLFVBQVUsRUFBRUEsVUFGRztFQUdmRyxNQUFNLEVBQUVBLE1BSE87RUFJZkcsYUFBYSxFQUFFQTtBQUpBLENBQWpCIn0=","map":{"version":3,"names":["GenreModel","require","createGenre","data","res","create","queryGenre","query","find","update","id","findByIdAndUpdate","findAndDelete","findByIdAndRemove","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/service/","sources":["genreService.js"],"sourcesContent":["const GenreModel = require('../model/Genre');\n\nconst createGenre = async (data) => {\n  const res = await GenreModel.create(data);\n  return res;\n};\n\nconst queryGenre = async (query) => {\n  const res = await GenreModel.find();\n  return res;\n};\n\nconst update = async (id, data) => {\n  const res = await GenreModel.findByIdAndUpdate(id, data);\n  return res;\n};\n\nconst findAndDelete = async (id) => {\n  const res = await GenreModel.findByIdAndRemove(id);\n  return res;\n};\n\nmodule.exports = {\n  createGenre: createGenre,\n  queryGenre: queryGenre,\n  update: update,\n  findAndDelete: findAndDelete,\n};\n"],"mappings":"AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,gBAAD,CAA1B;;AAEA,MAAMC,WAAW,GAAG,MAAOC,IAAP,IAAgB;EAClC,MAAMC,GAAG,GAAG,MAAMJ,UAAU,CAACK,MAAX,CAAkBF,IAAlB,CAAlB;EACA,OAAOC,GAAP;AACD,CAHD;;AAKA,MAAME,UAAU,GAAG,MAAOC,KAAP,IAAiB;EAClC,MAAMH,GAAG,GAAG,MAAMJ,UAAU,CAACQ,IAAX,EAAlB;EACA,OAAOJ,GAAP;AACD,CAHD;;AAKA,MAAMK,MAAM,GAAG,OAAOC,EAAP,EAAWP,IAAX,KAAoB;EACjC,MAAMC,GAAG,GAAG,MAAMJ,UAAU,CAACW,iBAAX,CAA6BD,EAA7B,EAAiCP,IAAjC,CAAlB;EACA,OAAOC,GAAP;AACD,CAHD;;AAKA,MAAMQ,aAAa,GAAG,MAAOF,EAAP,IAAc;EAClC,MAAMN,GAAG,GAAG,MAAMJ,UAAU,CAACa,iBAAX,CAA6BH,EAA7B,CAAlB;EACA,OAAON,GAAP;AACD,CAHD;;AAKAU,MAAM,CAACC,OAAP,GAAiB;EACfb,WAAW,EAAEA,WADE;EAEfI,UAAU,EAAEA,UAFG;EAGfG,MAAM,EAAEA,MAHO;EAIfG,aAAa,EAAEA;AAJA,CAAjB"}},"mtime":1653750045830},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/model/Genre.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const mongoose = require('mongoose');\n\nconst Schema = mongoose.Schema;\nconst GenreSchema = new Schema({\n  name: {\n    type: String,\n    required: true,\n    minLength: 3,\n    maxLength: 100\n  },\n  url: String\n}); // Export model.\n\nmodule.exports = mongoose.model('Genre', GenreSchema, 'genres');\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJTY2hlbWEiLCJHZW5yZVNjaGVtYSIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJ1cmwiLCJtb2R1bGUiLCJleHBvcnRzIiwibW9kZWwiXSwic291cmNlUm9vdCI6Ii9Wb2x1bWVzL1dEX0JMQUNLL29yaWdpbi9wcmlzbWEtZXhwcmVzcy10ZXN0L21vZGVsLyIsInNvdXJjZXMiOlsiR2VucmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5jb25zdCBHZW5yZVNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBuYW1lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIG1pbkxlbmd0aDogMyxcbiAgICBtYXhMZW5ndGg6IDEwMCxcbiAgfSxcbiAgdXJsOiBTdHJpbmcsXG59KTtcblxuLy8gRXhwb3J0IG1vZGVsLlxubW9kdWxlLmV4cG9ydHMgPSBtb25nb29zZS5tb2RlbCgnR2VucmUnLCBHZW5yZVNjaGVtYSwgJ2dlbnJlcycpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQXhCOztBQUVBLE1BQU1DLE1BQU0sR0FBR0YsUUFBUSxDQUFDRSxNQUF4QjtBQUNBLE1BQU1DLFdBQVcsR0FBRyxJQUFJRCxNQUFKLENBQVc7RUFDN0JFLElBQUksRUFBRTtJQUNKQyxJQUFJLEVBQUVDLE1BREY7SUFFSkMsUUFBUSxFQUFFLElBRk47SUFHSkMsU0FBUyxFQUFFLENBSFA7SUFJSkMsU0FBUyxFQUFFO0VBSlAsQ0FEdUI7RUFPN0JDLEdBQUcsRUFBRUo7QUFQd0IsQ0FBWCxDQUFwQixDLENBVUE7O0FBQ0FLLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQlosUUFBUSxDQUFDYSxLQUFULENBQWUsT0FBZixFQUF3QlYsV0FBeEIsRUFBcUMsUUFBckMsQ0FBakIifQ==","map":{"version":3,"names":["mongoose","require","Schema","GenreSchema","name","type","String","required","minLength","maxLength","url","module","exports","model"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/model/","sources":["Genre.js"],"sourcesContent":["const mongoose = require('mongoose');\n\nconst Schema = mongoose.Schema;\nconst GenreSchema = new Schema({\n  name: {\n    type: String,\n    required: true,\n    minLength: 3,\n    maxLength: 100,\n  },\n  url: String,\n});\n\n// Export model.\nmodule.exports = mongoose.model('Genre', GenreSchema, 'genres');\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAEA,MAAMC,MAAM,GAAGF,QAAQ,CAACE,MAAxB;AACA,MAAMC,WAAW,GAAG,IAAID,MAAJ,CAAW;EAC7BE,IAAI,EAAE;IACJC,IAAI,EAAEC,MADF;IAEJC,QAAQ,EAAE,IAFN;IAGJC,SAAS,EAAE,CAHP;IAIJC,SAAS,EAAE;EAJP,CADuB;EAO7BC,GAAG,EAAEJ;AAPwB,CAAX,CAApB,C,CAUA;;AACAK,MAAM,CAACC,OAAP,GAAiBZ,QAAQ,CAACa,KAAT,CAAe,OAAf,EAAwBV,WAAxB,EAAqC,QAArC,CAAjB"}},"mtime":1653221757740},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/routes/bookInstance.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const express = require('express');\n\nconst bookInstanceController = require('../controllers/bookInstanceController');\n\nconst bookRouter = express.Router();\n\nconst {\n  wrap\n} = require('../utils/'); // CRUD\n\n\nbookRouter.post('/', wrap(bookInstanceController.create));\nbookRouter.get('/', wrap(bookInstanceController.query));\nbookRouter.put('/', wrap(bookInstanceController.update));\nbookRouter.delete('/', wrap(bookInstanceController.deleteBookInstance));\nmodule.exports = bookRouter;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImJvb2tJbnN0YW5jZUNvbnRyb2xsZXIiLCJib29rUm91dGVyIiwiUm91dGVyIiwid3JhcCIsInBvc3QiLCJjcmVhdGUiLCJnZXQiLCJxdWVyeSIsInB1dCIsInVwZGF0ZSIsImRlbGV0ZSIsImRlbGV0ZUJvb2tJbnN0YW5jZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Wb2x1bWVzL1dEX0JMQUNLL29yaWdpbi9wcmlzbWEtZXhwcmVzcy10ZXN0L3JvdXRlcy8iLCJzb3VyY2VzIjpbImJvb2tJbnN0YW5jZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgYm9va0luc3RhbmNlQ29udHJvbGxlciA9IHJlcXVpcmUoJy4uL2NvbnRyb2xsZXJzL2Jvb2tJbnN0YW5jZUNvbnRyb2xsZXInKTtcbmNvbnN0IGJvb2tSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuY29uc3QgeyB3cmFwIH0gPSByZXF1aXJlKCcuLi91dGlscy8nKTtcblxuLy8gQ1JVRFxuYm9va1JvdXRlci5wb3N0KCcvJywgd3JhcChib29rSW5zdGFuY2VDb250cm9sbGVyLmNyZWF0ZSkpO1xuYm9va1JvdXRlci5nZXQoJy8nLCB3cmFwKGJvb2tJbnN0YW5jZUNvbnRyb2xsZXIucXVlcnkpKTtcbmJvb2tSb3V0ZXIucHV0KCcvJywgd3JhcChib29rSW5zdGFuY2VDb250cm9sbGVyLnVwZGF0ZSkpO1xuYm9va1JvdXRlci5kZWxldGUoJy8nLCB3cmFwKGJvb2tJbnN0YW5jZUNvbnRyb2xsZXIuZGVsZXRlQm9va0luc3RhbmNlKSk7XG5cbm1vZHVsZS5leHBvcnRzID0gYm9va1JvdXRlcjtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUF2Qjs7QUFDQSxNQUFNQyxzQkFBc0IsR0FBR0QsT0FBTyxDQUFDLHVDQUFELENBQXRDOztBQUNBLE1BQU1FLFVBQVUsR0FBR0gsT0FBTyxDQUFDSSxNQUFSLEVBQW5COztBQUNBLE1BQU07RUFBRUM7QUFBRixJQUFXSixPQUFPLENBQUMsV0FBRCxDQUF4QixDLENBRUE7OztBQUNBRSxVQUFVLENBQUNHLElBQVgsQ0FBZ0IsR0FBaEIsRUFBcUJELElBQUksQ0FBQ0gsc0JBQXNCLENBQUNLLE1BQXhCLENBQXpCO0FBQ0FKLFVBQVUsQ0FBQ0ssR0FBWCxDQUFlLEdBQWYsRUFBb0JILElBQUksQ0FBQ0gsc0JBQXNCLENBQUNPLEtBQXhCLENBQXhCO0FBQ0FOLFVBQVUsQ0FBQ08sR0FBWCxDQUFlLEdBQWYsRUFBb0JMLElBQUksQ0FBQ0gsc0JBQXNCLENBQUNTLE1BQXhCLENBQXhCO0FBQ0FSLFVBQVUsQ0FBQ1MsTUFBWCxDQUFrQixHQUFsQixFQUF1QlAsSUFBSSxDQUFDSCxzQkFBc0IsQ0FBQ1csa0JBQXhCLENBQTNCO0FBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQlosVUFBakIifQ==","map":{"version":3,"names":["express","require","bookInstanceController","bookRouter","Router","wrap","post","create","get","query","put","update","delete","deleteBookInstance","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/routes/","sources":["bookInstance.js"],"sourcesContent":["const express = require('express');\nconst bookInstanceController = require('../controllers/bookInstanceController');\nconst bookRouter = express.Router();\nconst { wrap } = require('../utils/');\n\n// CRUD\nbookRouter.post('/', wrap(bookInstanceController.create));\nbookRouter.get('/', wrap(bookInstanceController.query));\nbookRouter.put('/', wrap(bookInstanceController.update));\nbookRouter.delete('/', wrap(bookInstanceController.deleteBookInstance));\n\nmodule.exports = bookRouter;\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,sBAAsB,GAAGD,OAAO,CAAC,uCAAD,CAAtC;;AACA,MAAME,UAAU,GAAGH,OAAO,CAACI,MAAR,EAAnB;;AACA,MAAM;EAAEC;AAAF,IAAWJ,OAAO,CAAC,WAAD,CAAxB,C,CAEA;;;AACAE,UAAU,CAACG,IAAX,CAAgB,GAAhB,EAAqBD,IAAI,CAACH,sBAAsB,CAACK,MAAxB,CAAzB;AACAJ,UAAU,CAACK,GAAX,CAAe,GAAf,EAAoBH,IAAI,CAACH,sBAAsB,CAACO,KAAxB,CAAxB;AACAN,UAAU,CAACO,GAAX,CAAe,GAAf,EAAoBL,IAAI,CAACH,sBAAsB,CAACS,MAAxB,CAAxB;AACAR,UAAU,CAACS,MAAX,CAAkB,GAAlB,EAAuBP,IAAI,CAACH,sBAAsB,CAACW,kBAAxB,CAA3B;AAEAC,MAAM,CAACC,OAAP,GAAiBZ,UAAjB"}},"mtime":1653405126930},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/controllers/bookInstanceController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const bookInstanceService = require('../service/bookInstanceService');\n\nconst create = async (req, res, next) => {\n  const value = await bookInstanceService.create(req.body);\n  res.json(value);\n};\n\nconst query = async (req, res, next) => {\n  const value = await bookInstanceService.query(req.query);\n  res.json(value);\n};\n\nconst update = async (req, res, next) => {\n  const value = await bookInstanceService.update(req.query.id, req.body);\n  res.json(value);\n};\n\nconst deleteBookInstance = async (req, res, next) => {\n  const value = await bookInstanceService.findAndDelete(req.query.id);\n  res.json(value);\n};\n\nmodule.exports = {\n  create: create,\n  query: query,\n  update: update,\n  deleteBookInstance: deleteBookInstance\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJib29rSW5zdGFuY2VTZXJ2aWNlIiwicmVxdWlyZSIsImNyZWF0ZSIsInJlcSIsInJlcyIsIm5leHQiLCJ2YWx1ZSIsImJvZHkiLCJqc29uIiwicXVlcnkiLCJ1cGRhdGUiLCJpZCIsImRlbGV0ZUJvb2tJbnN0YW5jZSIsImZpbmRBbmREZWxldGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVm9sdW1lcy9XRF9CTEFDSy9vcmlnaW4vcHJpc21hLWV4cHJlc3MtdGVzdC9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImJvb2tJbnN0YW5jZUNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYm9va0luc3RhbmNlU2VydmljZSA9IHJlcXVpcmUoJy4uL3NlcnZpY2UvYm9va0luc3RhbmNlU2VydmljZScpO1xuXG5jb25zdCBjcmVhdGUgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdmFsdWUgPSBhd2FpdCBib29rSW5zdGFuY2VTZXJ2aWNlLmNyZWF0ZShyZXEuYm9keSk7XG4gIHJlcy5qc29uKHZhbHVlKTtcbn07XG5cbmNvbnN0IHF1ZXJ5ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gYXdhaXQgYm9va0luc3RhbmNlU2VydmljZS5xdWVyeShyZXEucXVlcnkpO1xuICByZXMuanNvbih2YWx1ZSk7XG59O1xuXG5jb25zdCB1cGRhdGUgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdmFsdWUgPSBhd2FpdCBib29rSW5zdGFuY2VTZXJ2aWNlLnVwZGF0ZShyZXEucXVlcnkuaWQsIHJlcS5ib2R5KTtcbiAgcmVzLmpzb24odmFsdWUpO1xufTtcblxuY29uc3QgZGVsZXRlQm9va0luc3RhbmNlID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gYXdhaXQgYm9va0luc3RhbmNlU2VydmljZS5maW5kQW5kRGVsZXRlKHJlcS5xdWVyeS5pZCk7XG4gIHJlcy5qc29uKHZhbHVlKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGU6IGNyZWF0ZSxcbiAgcXVlcnk6IHF1ZXJ5LFxuICB1cGRhdGU6IHVwZGF0ZSxcbiAgZGVsZXRlQm9va0luc3RhbmNlOiBkZWxldGVCb29rSW5zdGFuY2UsXG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxtQkFBbUIsR0FBR0MsT0FBTyxDQUFDLGdDQUFELENBQW5DOztBQUVBLE1BQU1DLE1BQU0sR0FBRyxPQUFPQyxHQUFQLEVBQVlDLEdBQVosRUFBaUJDLElBQWpCLEtBQTBCO0VBQ3ZDLE1BQU1DLEtBQUssR0FBRyxNQUFNTixtQkFBbUIsQ0FBQ0UsTUFBcEIsQ0FBMkJDLEdBQUcsQ0FBQ0ksSUFBL0IsQ0FBcEI7RUFDQUgsR0FBRyxDQUFDSSxJQUFKLENBQVNGLEtBQVQ7QUFDRCxDQUhEOztBQUtBLE1BQU1HLEtBQUssR0FBRyxPQUFPTixHQUFQLEVBQVlDLEdBQVosRUFBaUJDLElBQWpCLEtBQTBCO0VBQ3RDLE1BQU1DLEtBQUssR0FBRyxNQUFNTixtQkFBbUIsQ0FBQ1MsS0FBcEIsQ0FBMEJOLEdBQUcsQ0FBQ00sS0FBOUIsQ0FBcEI7RUFDQUwsR0FBRyxDQUFDSSxJQUFKLENBQVNGLEtBQVQ7QUFDRCxDQUhEOztBQUtBLE1BQU1JLE1BQU0sR0FBRyxPQUFPUCxHQUFQLEVBQVlDLEdBQVosRUFBaUJDLElBQWpCLEtBQTBCO0VBQ3ZDLE1BQU1DLEtBQUssR0FBRyxNQUFNTixtQkFBbUIsQ0FBQ1UsTUFBcEIsQ0FBMkJQLEdBQUcsQ0FBQ00sS0FBSixDQUFVRSxFQUFyQyxFQUF5Q1IsR0FBRyxDQUFDSSxJQUE3QyxDQUFwQjtFQUNBSCxHQUFHLENBQUNJLElBQUosQ0FBU0YsS0FBVDtBQUNELENBSEQ7O0FBS0EsTUFBTU0sa0JBQWtCLEdBQUcsT0FBT1QsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixLQUEwQjtFQUNuRCxNQUFNQyxLQUFLLEdBQUcsTUFBTU4sbUJBQW1CLENBQUNhLGFBQXBCLENBQWtDVixHQUFHLENBQUNNLEtBQUosQ0FBVUUsRUFBNUMsQ0FBcEI7RUFDQVAsR0FBRyxDQUFDSSxJQUFKLENBQVNGLEtBQVQ7QUFDRCxDQUhEOztBQUtBUSxNQUFNLENBQUNDLE9BQVAsR0FBaUI7RUFDZmIsTUFBTSxFQUFFQSxNQURPO0VBRWZPLEtBQUssRUFBRUEsS0FGUTtFQUdmQyxNQUFNLEVBQUVBLE1BSE87RUFJZkUsa0JBQWtCLEVBQUVBO0FBSkwsQ0FBakIifQ==","map":{"version":3,"names":["bookInstanceService","require","create","req","res","next","value","body","json","query","update","id","deleteBookInstance","findAndDelete","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/controllers/","sources":["bookInstanceController.js"],"sourcesContent":["const bookInstanceService = require('../service/bookInstanceService');\n\nconst create = async (req, res, next) => {\n  const value = await bookInstanceService.create(req.body);\n  res.json(value);\n};\n\nconst query = async (req, res, next) => {\n  const value = await bookInstanceService.query(req.query);\n  res.json(value);\n};\n\nconst update = async (req, res, next) => {\n  const value = await bookInstanceService.update(req.query.id, req.body);\n  res.json(value);\n};\n\nconst deleteBookInstance = async (req, res, next) => {\n  const value = await bookInstanceService.findAndDelete(req.query.id);\n  res.json(value);\n};\n\nmodule.exports = {\n  create: create,\n  query: query,\n  update: update,\n  deleteBookInstance: deleteBookInstance,\n};\n"],"mappings":"AAAA,MAAMA,mBAAmB,GAAGC,OAAO,CAAC,gCAAD,CAAnC;;AAEA,MAAMC,MAAM,GAAG,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACvC,MAAMC,KAAK,GAAG,MAAMN,mBAAmB,CAACE,MAApB,CAA2BC,GAAG,CAACI,IAA/B,CAApB;EACAH,GAAG,CAACI,IAAJ,CAASF,KAAT;AACD,CAHD;;AAKA,MAAMG,KAAK,GAAG,OAAON,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACtC,MAAMC,KAAK,GAAG,MAAMN,mBAAmB,CAACS,KAApB,CAA0BN,GAAG,CAACM,KAA9B,CAApB;EACAL,GAAG,CAACI,IAAJ,CAASF,KAAT;AACD,CAHD;;AAKA,MAAMI,MAAM,GAAG,OAAOP,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACvC,MAAMC,KAAK,GAAG,MAAMN,mBAAmB,CAACU,MAApB,CAA2BP,GAAG,CAACM,KAAJ,CAAUE,EAArC,EAAyCR,GAAG,CAACI,IAA7C,CAApB;EACAH,GAAG,CAACI,IAAJ,CAASF,KAAT;AACD,CAHD;;AAKA,MAAMM,kBAAkB,GAAG,OAAOT,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACnD,MAAMC,KAAK,GAAG,MAAMN,mBAAmB,CAACa,aAApB,CAAkCV,GAAG,CAACM,KAAJ,CAAUE,EAA5C,CAApB;EACAP,GAAG,CAACI,IAAJ,CAASF,KAAT;AACD,CAHD;;AAKAQ,MAAM,CAACC,OAAP,GAAiB;EACfb,MAAM,EAAEA,MADO;EAEfO,KAAK,EAAEA,KAFQ;EAGfC,MAAM,EAAEA,MAHO;EAIfE,kBAAkB,EAAEA;AAJL,CAAjB"}},"mtime":1653750020990},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/service/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/service/bookInstanceService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const BookInstanceModel = require('../model/BookInstance');\n\nconst create = async data => {\n  const res = await BookInstanceModel.create(data);\n  return res;\n};\n\nconst query = async query => {\n  //子表关联主表查询，populate里面为子表外键\n  const res = await BookInstanceModel.find().populate('book').exec();\n  return res;\n};\n\nconst update = async (id, data) => {\n  const res = await BookInstanceModel.findByIdAndUpdate(id, data);\n  return res;\n};\n\nconst findAndDelete = async id => {\n  const res = await BookInstanceModel.findByIdAndRemove(id);\n  return res;\n};\n\nmodule.exports = {\n  create: create,\n  query: query,\n  update: update,\n  findAndDelete: findAndDelete\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29rSW5zdGFuY2VNb2RlbCIsInJlcXVpcmUiLCJjcmVhdGUiLCJkYXRhIiwicmVzIiwicXVlcnkiLCJmaW5kIiwicG9wdWxhdGUiLCJleGVjIiwidXBkYXRlIiwiaWQiLCJmaW5kQnlJZEFuZFVwZGF0ZSIsImZpbmRBbmREZWxldGUiLCJmaW5kQnlJZEFuZFJlbW92ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Wb2x1bWVzL1dEX0JMQUNLL29yaWdpbi9wcmlzbWEtZXhwcmVzcy10ZXN0L3NlcnZpY2UvIiwic291cmNlcyI6WyJib29rSW5zdGFuY2VTZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEJvb2tJbnN0YW5jZU1vZGVsID0gcmVxdWlyZSgnLi4vbW9kZWwvQm9va0luc3RhbmNlJyk7XG5cbmNvbnN0IGNyZWF0ZSA9IGFzeW5jIChkYXRhKSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IEJvb2tJbnN0YW5jZU1vZGVsLmNyZWF0ZShkYXRhKTtcbiAgcmV0dXJuIHJlcztcbn07XG5cbmNvbnN0IHF1ZXJ5ID0gYXN5bmMgKHF1ZXJ5KSA9PiB7XG4gIC8v5a2Q6KGo5YWz6IGU5Li76KGo5p+l6K+i77yMcG9wdWxhdGXph4zpnaLkuLrlrZDooajlpJbplK5cbiAgY29uc3QgcmVzID0gYXdhaXQgQm9va0luc3RhbmNlTW9kZWwuZmluZCgpLnBvcHVsYXRlKCdib29rJykuZXhlYygpO1xuICByZXR1cm4gcmVzO1xufTtcblxuY29uc3QgdXBkYXRlID0gYXN5bmMgKGlkLCBkYXRhKSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IEJvb2tJbnN0YW5jZU1vZGVsLmZpbmRCeUlkQW5kVXBkYXRlKGlkLCBkYXRhKTtcbiAgcmV0dXJuIHJlcztcbn07XG5cbmNvbnN0IGZpbmRBbmREZWxldGUgPSBhc3luYyAoaWQpID0+IHtcbiAgY29uc3QgcmVzID0gYXdhaXQgQm9va0luc3RhbmNlTW9kZWwuZmluZEJ5SWRBbmRSZW1vdmUoaWQpO1xuICByZXR1cm4gcmVzO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZTogY3JlYXRlLFxuICBxdWVyeTogcXVlcnksXG4gIHVwZGF0ZTogdXBkYXRlLFxuICBmaW5kQW5kRGVsZXRlOiBmaW5kQW5kRGVsZXRlLFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsaUJBQWlCLEdBQUdDLE9BQU8sQ0FBQyx1QkFBRCxDQUFqQzs7QUFFQSxNQUFNQyxNQUFNLEdBQUcsTUFBT0MsSUFBUCxJQUFnQjtFQUM3QixNQUFNQyxHQUFHLEdBQUcsTUFBTUosaUJBQWlCLENBQUNFLE1BQWxCLENBQXlCQyxJQUF6QixDQUFsQjtFQUNBLE9BQU9DLEdBQVA7QUFDRCxDQUhEOztBQUtBLE1BQU1DLEtBQUssR0FBRyxNQUFPQSxLQUFQLElBQWlCO0VBQzdCO0VBQ0EsTUFBTUQsR0FBRyxHQUFHLE1BQU1KLGlCQUFpQixDQUFDTSxJQUFsQixHQUF5QkMsUUFBekIsQ0FBa0MsTUFBbEMsRUFBMENDLElBQTFDLEVBQWxCO0VBQ0EsT0FBT0osR0FBUDtBQUNELENBSkQ7O0FBTUEsTUFBTUssTUFBTSxHQUFHLE9BQU9DLEVBQVAsRUFBV1AsSUFBWCxLQUFvQjtFQUNqQyxNQUFNQyxHQUFHLEdBQUcsTUFBTUosaUJBQWlCLENBQUNXLGlCQUFsQixDQUFvQ0QsRUFBcEMsRUFBd0NQLElBQXhDLENBQWxCO0VBQ0EsT0FBT0MsR0FBUDtBQUNELENBSEQ7O0FBS0EsTUFBTVEsYUFBYSxHQUFHLE1BQU9GLEVBQVAsSUFBYztFQUNsQyxNQUFNTixHQUFHLEdBQUcsTUFBTUosaUJBQWlCLENBQUNhLGlCQUFsQixDQUFvQ0gsRUFBcEMsQ0FBbEI7RUFDQSxPQUFPTixHQUFQO0FBQ0QsQ0FIRDs7QUFLQVUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0VBQ2ZiLE1BQU0sRUFBRUEsTUFETztFQUVmRyxLQUFLLEVBQUVBLEtBRlE7RUFHZkksTUFBTSxFQUFFQSxNQUhPO0VBSWZHLGFBQWEsRUFBRUE7QUFKQSxDQUFqQiJ9","map":{"version":3,"names":["BookInstanceModel","require","create","data","res","query","find","populate","exec","update","id","findByIdAndUpdate","findAndDelete","findByIdAndRemove","module","exports"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/service/","sources":["bookInstanceService.js"],"sourcesContent":["const BookInstanceModel = require('../model/BookInstance');\n\nconst create = async (data) => {\n  const res = await BookInstanceModel.create(data);\n  return res;\n};\n\nconst query = async (query) => {\n  //子表关联主表查询，populate里面为子表外键\n  const res = await BookInstanceModel.find().populate('book').exec();\n  return res;\n};\n\nconst update = async (id, data) => {\n  const res = await BookInstanceModel.findByIdAndUpdate(id, data);\n  return res;\n};\n\nconst findAndDelete = async (id) => {\n  const res = await BookInstanceModel.findByIdAndRemove(id);\n  return res;\n};\n\nmodule.exports = {\n  create: create,\n  query: query,\n  update: update,\n  findAndDelete: findAndDelete,\n};\n"],"mappings":"AAAA,MAAMA,iBAAiB,GAAGC,OAAO,CAAC,uBAAD,CAAjC;;AAEA,MAAMC,MAAM,GAAG,MAAOC,IAAP,IAAgB;EAC7B,MAAMC,GAAG,GAAG,MAAMJ,iBAAiB,CAACE,MAAlB,CAAyBC,IAAzB,CAAlB;EACA,OAAOC,GAAP;AACD,CAHD;;AAKA,MAAMC,KAAK,GAAG,MAAOA,KAAP,IAAiB;EAC7B;EACA,MAAMD,GAAG,GAAG,MAAMJ,iBAAiB,CAACM,IAAlB,GAAyBC,QAAzB,CAAkC,MAAlC,EAA0CC,IAA1C,EAAlB;EACA,OAAOJ,GAAP;AACD,CAJD;;AAMA,MAAMK,MAAM,GAAG,OAAOC,EAAP,EAAWP,IAAX,KAAoB;EACjC,MAAMC,GAAG,GAAG,MAAMJ,iBAAiB,CAACW,iBAAlB,CAAoCD,EAApC,EAAwCP,IAAxC,CAAlB;EACA,OAAOC,GAAP;AACD,CAHD;;AAKA,MAAMQ,aAAa,GAAG,MAAOF,EAAP,IAAc;EAClC,MAAMN,GAAG,GAAG,MAAMJ,iBAAiB,CAACa,iBAAlB,CAAoCH,EAApC,CAAlB;EACA,OAAON,GAAP;AACD,CAHD;;AAKAU,MAAM,CAACC,OAAP,GAAiB;EACfb,MAAM,EAAEA,MADO;EAEfG,KAAK,EAAEA,KAFQ;EAGfI,MAAM,EAAEA,MAHO;EAIfG,aAAa,EAAEA;AAJA,CAAjB"}},"mtime":1653403541770},"{\"assumptions\":{},\"sourceRoot\":\"/Volumes/WD_BLACK/origin/prisma-express-test/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"filename\":\"/Volumes/WD_BLACK/origin/prisma-express-test/model/BookInstance.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Volumes/WD_BLACK/origin/prisma-express-test\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.17.12:development":{"value":{"code":"const mongoose = require('mongoose');\n\nconst {\n  DateTime\n} = require('luxon'); //for date handling\n\n\nconst Schema = mongoose.Schema;\nconst BookInstanceSchema = new Schema({\n  book: {\n    type: Schema.ObjectId,\n    ref: 'Book',\n    required: true\n  },\n  imprint: {\n    type: String,\n    required: true\n  },\n  status: {\n    type: String,\n    required: true,\n    enum: ['Available', 'Maintenance', 'Loaned', 'Reserved'],\n    // 枚举\n    default: 'Maintenance'\n  },\n  due_back: {\n    type: Date,\n    default: Date.now\n  },\n  url: String\n});\nBookInstanceSchema.virtual('due_back_formatted').get(function () {\n  return DateTime.fromJSDate(this.due_back).toLocaleString(DateTime.DATE_MED);\n});\nBookInstanceSchema.virtual('due_back_yyyy_mm_dd').get(function () {\n  return DateTime.fromJSDate(this.due_back).toISODate(); //format 'YYYY-MM-DD'\n}); // Export model.\n\nmodule.exports = mongoose.model('BookInstance', BookInstanceSchema, 'book_instances');\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJEYXRlVGltZSIsIlNjaGVtYSIsIkJvb2tJbnN0YW5jZVNjaGVtYSIsImJvb2siLCJ0eXBlIiwiT2JqZWN0SWQiLCJyZWYiLCJyZXF1aXJlZCIsImltcHJpbnQiLCJTdHJpbmciLCJzdGF0dXMiLCJlbnVtIiwiZGVmYXVsdCIsImR1ZV9iYWNrIiwiRGF0ZSIsIm5vdyIsInVybCIsInZpcnR1YWwiLCJnZXQiLCJmcm9tSlNEYXRlIiwidG9Mb2NhbGVTdHJpbmciLCJEQVRFX01FRCIsInRvSVNPRGF0ZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiL1ZvbHVtZXMvV0RfQkxBQ0svb3JpZ2luL3ByaXNtYS1leHByZXNzLXRlc3QvbW9kZWwvIiwic291cmNlcyI6WyJCb29rSW5zdGFuY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuY29uc3QgeyBEYXRlVGltZSB9ID0gcmVxdWlyZSgnbHV4b24nKTsgLy9mb3IgZGF0ZSBoYW5kbGluZ1xuXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5cbmNvbnN0IEJvb2tJbnN0YW5jZVNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBib29rOiB7XG4gICAgdHlwZTogU2NoZW1hLk9iamVjdElkLFxuICAgIHJlZjogJ0Jvb2snLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBpbXByaW50OiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBzdGF0dXM6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgZW51bTogWydBdmFpbGFibGUnLCAnTWFpbnRlbmFuY2UnLCAnTG9hbmVkJywgJ1Jlc2VydmVkJ10sIC8vIOaemuS4vlxuICAgIGRlZmF1bHQ6ICdNYWludGVuYW5jZScsXG4gIH0sXG4gIGR1ZV9iYWNrOiB7XG4gICAgdHlwZTogRGF0ZSxcbiAgICBkZWZhdWx0OiBEYXRlLm5vdyxcbiAgfSxcbiAgdXJsOiBTdHJpbmcsXG59KTtcblxuQm9va0luc3RhbmNlU2NoZW1hLnZpcnR1YWwoJ2R1ZV9iYWNrX2Zvcm1hdHRlZCcpLmdldChmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBEYXRlVGltZS5mcm9tSlNEYXRlKHRoaXMuZHVlX2JhY2spLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLkRBVEVfTUVEKTtcbn0pO1xuXG5Cb29rSW5zdGFuY2VTY2hlbWEudmlydHVhbCgnZHVlX2JhY2tfeXl5eV9tbV9kZCcpLmdldChmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBEYXRlVGltZS5mcm9tSlNEYXRlKHRoaXMuZHVlX2JhY2spLnRvSVNPRGF0ZSgpOyAvL2Zvcm1hdCAnWVlZWS1NTS1ERCdcbn0pO1xuXG4vLyBFeHBvcnQgbW9kZWwuXG5tb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlLm1vZGVsKFxuICAnQm9va0luc3RhbmNlJyxcbiAgQm9va0luc3RhbmNlU2NoZW1hLFxuICAnYm9va19pbnN0YW5jZXMnLFxuKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUF4Qjs7QUFDQSxNQUFNO0VBQUVDO0FBQUYsSUFBZUQsT0FBTyxDQUFDLE9BQUQsQ0FBNUIsQyxDQUF1Qzs7O0FBRXZDLE1BQU1FLE1BQU0sR0FBR0gsUUFBUSxDQUFDRyxNQUF4QjtBQUVBLE1BQU1DLGtCQUFrQixHQUFHLElBQUlELE1BQUosQ0FBVztFQUNwQ0UsSUFBSSxFQUFFO0lBQ0pDLElBQUksRUFBRUgsTUFBTSxDQUFDSSxRQURUO0lBRUpDLEdBQUcsRUFBRSxNQUZEO0lBR0pDLFFBQVEsRUFBRTtFQUhOLENBRDhCO0VBTXBDQyxPQUFPLEVBQUU7SUFDUEosSUFBSSxFQUFFSyxNQURDO0lBRVBGLFFBQVEsRUFBRTtFQUZILENBTjJCO0VBVXBDRyxNQUFNLEVBQUU7SUFDTk4sSUFBSSxFQUFFSyxNQURBO0lBRU5GLFFBQVEsRUFBRSxJQUZKO0lBR05JLElBQUksRUFBRSxDQUFDLFdBQUQsRUFBYyxhQUFkLEVBQTZCLFFBQTdCLEVBQXVDLFVBQXZDLENBSEE7SUFHb0Q7SUFDMURDLE9BQU8sRUFBRTtFQUpILENBVjRCO0VBZ0JwQ0MsUUFBUSxFQUFFO0lBQ1JULElBQUksRUFBRVUsSUFERTtJQUVSRixPQUFPLEVBQUVFLElBQUksQ0FBQ0M7RUFGTixDQWhCMEI7RUFvQnBDQyxHQUFHLEVBQUVQO0FBcEIrQixDQUFYLENBQTNCO0FBdUJBUCxrQkFBa0IsQ0FBQ2UsT0FBbkIsQ0FBMkIsb0JBQTNCLEVBQWlEQyxHQUFqRCxDQUFxRCxZQUFZO0VBQy9ELE9BQU9sQixRQUFRLENBQUNtQixVQUFULENBQW9CLEtBQUtOLFFBQXpCLEVBQW1DTyxjQUFuQyxDQUFrRHBCLFFBQVEsQ0FBQ3FCLFFBQTNELENBQVA7QUFDRCxDQUZEO0FBSUFuQixrQkFBa0IsQ0FBQ2UsT0FBbkIsQ0FBMkIscUJBQTNCLEVBQWtEQyxHQUFsRCxDQUFzRCxZQUFZO0VBQ2hFLE9BQU9sQixRQUFRLENBQUNtQixVQUFULENBQW9CLEtBQUtOLFFBQXpCLEVBQW1DUyxTQUFuQyxFQUFQLENBRGdFLENBQ1Q7QUFDeEQsQ0FGRCxFLENBSUE7O0FBQ0FDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjFCLFFBQVEsQ0FBQzJCLEtBQVQsQ0FDZixjQURlLEVBRWZ2QixrQkFGZSxFQUdmLGdCQUhlLENBQWpCIn0=","map":{"version":3,"names":["mongoose","require","DateTime","Schema","BookInstanceSchema","book","type","ObjectId","ref","required","imprint","String","status","enum","default","due_back","Date","now","url","virtual","get","fromJSDate","toLocaleString","DATE_MED","toISODate","module","exports","model"],"sourceRoot":"/Volumes/WD_BLACK/origin/prisma-express-test/model/","sources":["BookInstance.js"],"sourcesContent":["const mongoose = require('mongoose');\nconst { DateTime } = require('luxon'); //for date handling\n\nconst Schema = mongoose.Schema;\n\nconst BookInstanceSchema = new Schema({\n  book: {\n    type: Schema.ObjectId,\n    ref: 'Book',\n    required: true,\n  },\n  imprint: {\n    type: String,\n    required: true,\n  },\n  status: {\n    type: String,\n    required: true,\n    enum: ['Available', 'Maintenance', 'Loaned', 'Reserved'], // 枚举\n    default: 'Maintenance',\n  },\n  due_back: {\n    type: Date,\n    default: Date.now,\n  },\n  url: String,\n});\n\nBookInstanceSchema.virtual('due_back_formatted').get(function () {\n  return DateTime.fromJSDate(this.due_back).toLocaleString(DateTime.DATE_MED);\n});\n\nBookInstanceSchema.virtual('due_back_yyyy_mm_dd').get(function () {\n  return DateTime.fromJSDate(this.due_back).toISODate(); //format 'YYYY-MM-DD'\n});\n\n// Export model.\nmodule.exports = mongoose.model(\n  'BookInstance',\n  BookInstanceSchema,\n  'book_instances',\n);\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAM;EAAEC;AAAF,IAAeD,OAAO,CAAC,OAAD,CAA5B,C,CAAuC;;;AAEvC,MAAME,MAAM,GAAGH,QAAQ,CAACG,MAAxB;AAEA,MAAMC,kBAAkB,GAAG,IAAID,MAAJ,CAAW;EACpCE,IAAI,EAAE;IACJC,IAAI,EAAEH,MAAM,CAACI,QADT;IAEJC,GAAG,EAAE,MAFD;IAGJC,QAAQ,EAAE;EAHN,CAD8B;EAMpCC,OAAO,EAAE;IACPJ,IAAI,EAAEK,MADC;IAEPF,QAAQ,EAAE;EAFH,CAN2B;EAUpCG,MAAM,EAAE;IACNN,IAAI,EAAEK,MADA;IAENF,QAAQ,EAAE,IAFJ;IAGNI,IAAI,EAAE,CAAC,WAAD,EAAc,aAAd,EAA6B,QAA7B,EAAuC,UAAvC,CAHA;IAGoD;IAC1DC,OAAO,EAAE;EAJH,CAV4B;EAgBpCC,QAAQ,EAAE;IACRT,IAAI,EAAEU,IADE;IAERF,OAAO,EAAEE,IAAI,CAACC;EAFN,CAhB0B;EAoBpCC,GAAG,EAAEP;AApB+B,CAAX,CAA3B;AAuBAP,kBAAkB,CAACe,OAAnB,CAA2B,oBAA3B,EAAiDC,GAAjD,CAAqD,YAAY;EAC/D,OAAOlB,QAAQ,CAACmB,UAAT,CAAoB,KAAKN,QAAzB,EAAmCO,cAAnC,CAAkDpB,QAAQ,CAACqB,QAA3D,CAAP;AACD,CAFD;AAIAnB,kBAAkB,CAACe,OAAnB,CAA2B,qBAA3B,EAAkDC,GAAlD,CAAsD,YAAY;EAChE,OAAOlB,QAAQ,CAACmB,UAAT,CAAoB,KAAKN,QAAzB,EAAmCS,SAAnC,EAAP,CADgE,CACT;AACxD,CAFD,E,CAIA;;AACAC,MAAM,CAACC,OAAP,GAAiB1B,QAAQ,CAAC2B,KAAT,CACf,cADe,EAEfvB,kBAFe,EAGf,gBAHe,CAAjB"}},"mtime":1653403630710}}